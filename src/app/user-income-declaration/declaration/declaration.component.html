<div class="col-12 full-v main-container">
  <div class="col-md-12 bg-light mb-3 d-flex align-items-center">
    <ul class="nav col-md-9">
      <li class="nav-item">
        <a class="nav-link text-dark nav-active" id="attendance-tab" (click)="activateMe('declaration-tab')"
          aria-current="page" href="javascript:void(0)">DECLARATION</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" id="timesheet-tab" (click)="activateMe('salary-tab')"
          href="javascript:void(0)">SALARY</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" id="leave-tab" (click)="activateMe('summary-tab')"
          href="javascript:void(0)">SUMMARY</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" id="leave-tab" (click)="activateMe('preference-tab')"
          href="javascript:void(0)">Preference</a>
      </li>
    </ul>
  </div>
  <div class="col-12 x_panel p-0 m-0">
    <div class="">
      <app-breadcrums></app-breadcrums>
    </div>
    <div [ngClass]="{'blur-section': !SectionIsReady}">
      <div class="blur-section__highlight" [ngClass]="{'d-none': SectionIsReady}">
        <div class="blur-section__content">
          Please login again
        </div>
      </div>
      <div class="blur-this">
        <div class="right-panel col-md-12 p-0">
          <div class="col-md-12 bg-light mb-3 mt-3">
            <ul class="nav">
              <li class="nav-item">
                <a class="nav-link new-nav-link text-dark new-nav-active" id="attendance-tab"
                  (click)="activeTab('declaration-tab')" aria-current="page" href="javascript:void(0)">Declaration</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" id="timesheet-tab" (click)="activeTab('previous-income-tab')"
                  href="javascript:void(0)">Previous Income</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" id="leave-tab" (click)="activeTab('form-12-tab')"
                  href="javascript:void(0)">Form 12 BB</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" id="leave-tab" (click)="activeTab('free-tax-tab')"
                  href="javascript:void(0)">Free Tax Filling</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" id="leave-tab" (click)="activeTab('tax-saving-tab')"
                  href="javascript:void(0)">Tax Saving Investment</a>
              </li>
            </ul>
          </div>
          <ng-container>
            <div class="container-fluid pt-4">
              <div class="d-flex justify-content-between">
                <h5 class="text-dark">Declaration</h5>
                <div class="pt-3 pe-3">
                  <select class="form-select">
                    <option value="currentyear" selected>APR {{year}} - MAR {{year +1}}</option>
                    <option value="previousyear">APR {{year - 1}} - MAR {{year}}</option>
                  </select>
                </div>
              </div>
              <div class="card my-3">
                <div class="d-flex text-dark fs-4 pt-3 align-items-center ps-3">
                  <i class=" fa fa-lightbulb-o"></i>
                  <h5 class="mb-0 ps-3">Important</h5>
                </div>
                <ul class="ps-5 ms-3">
                  <li class="pt-3">'$' - Not considered for exemption if opted <form action="" method="post"></form> New tax regime (Section 115BAC).</li>
                  <li class="pt-3">You can declare your investment amount till <span class="fw-bold">20th of every
                      month</span> until the cutoff date of <span class="fw-bold">May 20, {{year}}</span></li>
                  <li class="pt-3">Last date for submitting your investment proofs is <span class="fw-bold">Dec 20,
                      {{year}}</span></li>
                </ul>
                <div class="alert alert-warning mx-5">
                  Not submitting your investment proofs may lead to additional tax being deducted in the subsequent
                  months of this fiscal year.
                </div>
                <div class="alert alert-danger mx-5 text-dark fw-bold" *ngIf="employeeDeclaration.DefaultSlaryGroupMessage != null && employeeDeclaration.DefaultSlaryGroupMessage != ''">
                  {{this.employeeDeclaration.DefaultSlaryGroupMessage}}
                </div>
              </div>
              <div class="col-md-12 row my-4" [ngClass]="{'d-none': !SectionIsReady}">
                <div class="col-md-5">
                  <div class="card py-3 ps-3">
                    <p class="mb-0">Net Taxable Income</p>
                    <p class="text-dark fs-2 mb-0 ">
                      <span class="" *ngIf="employeeDeclaration.TotalAmount > 200000">INR {{employeeDeclaration.TotalAmount | number : '1.2-2'}}</span>
                      <span class="" *ngIf="employeeDeclaration.TotalAmount < 200000">INR 0</span>
                      <span class="float-end pe-2">
                        <a href="javascript:void(0)" (click)="gotoTaxSection()" class="text-decoration-none fs-6">
                          Income Tax Computitation
                        </a>
                      </span>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card py-3 ps-3">
                    <p class="mb-0">Total Tax Payable <i class="fa fa-exclamation-circle float-end fa-lg pe-3"
                        data-bs-placement="right" data-toggle="tooltip"
                        title="Net tax amount {{taxAmount.TotalTaxPayable}} of after round Off is"></i></p>
                    <p class="text-dark fs-2 mb-0">INR {{employeeDeclaration.TaxNeedToPay | number : '1.2-2'}}</p>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card py-3 ps-3">
                    <p class="mb-0">Tax Already Paid</p>
                    <p class="text-dark fs-2 mb-0 vhide">INR {{employeeDeclaration.TaxPaid | number : '1.2-2'}}</p>
                  </div>
                </div>
              </div>

              <!-- <ng-container *ngIf="!SectionIsReady">
                <app-pre-load-table></app-pre-load-table>
              </ng-container> -->
              <div *ngIf="SectionIsReady" [ngClass]="{'d-none': !SectionIsReady}">
                <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
                  <li [ngbNavItem]="1">
                    <a ngbNavLink class="custom-text-color">My Declaration</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <h5 class="text-dark pt-3">My Declarations</h5>
                        <p class="mb-0 pb-2">Below are the declarations done by you under various sections.</p>
                        <div class="t-table t-list t-border col-md-12 my-3">
                          <div class="t-head bg-light">
                            <div class="tr">
                              <div class="th fe-3">
                                <div class="cell-wrapper">
                                  DECLARATIONS
                                </div>
                              </div>
                              <div class="th fe-3">
                                <div class="cell-wrapper">
                                  # OF DECLARATIONS
                                </div>
                              </div>
                              <div class="th fe-2">
                                <div class="cell-wrapper">
                                  DECLARED AMOUNT
                                </div>
                              </div>
                              <div class="th fe-2">
                                <div class="cell-wrapper">
                                  PROOF SUBMITTED
                                </div>
                              </div>
                              <div class="th fe-2">
                                <div class="cell-wrapper">
                                  AMOUNT REJECTED
                                </div>
                              </div>
                              <div class="th fe-2">
                                <div class="cell-wrapper">
                                  AMOUNT ACCEPTED
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="t-body">
                            <ng-container
                              *ngIf="employeeDeclaration.Declarations != null && employeeDeclaration.Declarations.length > 0">
                              <div class="tr py-3" *ngFor="let declaration of employeeDeclaration.Declarations; let i = index;">
                                <div class="td align-middle fe-3">
                                  <div class="cell-wrapper">
                                    <a href="javascript:void(0)" class="text-muted" (click)="navDeclarationTab(i+2)">
                                      {{declaration.DeclarationName}}
                                    </a>
                                  </div>
                                </div>
                                <div class="td align-middle fe-3">
                                  <ng-container *ngIf="declaration.DeclarationName == 'HRA'">
                                    <ng-container *ngIf="declaration.TotalAmountDeclared > 0">
                                      <div class="cell-wrapper">
                                        1
                                      </div>
                                    </ng-container>
                                    <ng-container *ngIf="declaration.TotalAmountDeclared <= 0">
                                      <div class="cell-wrapper">
                                        0
                                      </div>
                                    </ng-container>
                                  </ng-container>
                                  <ng-container *ngIf="declaration.DeclarationName != 'HRA'">
                                    <div class="cell-wrapper">
                                      {{declaration.Declarations.length}}
                                    </div>
                                  </ng-container>
                                </div>
                                <div class="td align-middle fe-2">
                                  <div class="cell-wrapper d-flex align-items-baseline">
                                    <i class="fa fa-inr pe-2" aria-hidden="true"></i>
                                    <input type="text" readonly class="w-50 ps-2 border-0 bg-transparent"
                                      [attr.value]="declaration.TotalAmountDeclared">
                                  </div>
                                </div>
                                <div class="td align-middle fe-2">
                                  <div class="cell-wrapper">
                                    {{declaration.NumberOfProofSubmitted}}
                                  </div>
                                </div>
                                <div class="td align-middle fe-2">
                                  <div class="cell-wrapper d-flex align-items-baseline">
                                    <i class="fa fa-inr pe-2" aria-hidden="true"></i>
                                    <input type="text" class="w-50 ps-2 border-0 bg-transparent"
                                      [attr.value]="declaration.RejectedAmount">
                                  </div>
                                </div>
                                <div class="td align-middle fe-2">
                                  <div class="cell-wrapper d-flex align-items-baseline">
                                    <i class="fa fa-inr pe-2" aria-hidden="true"></i>
                                    <input type="text" class="w-50 ps-2 border-0 bg-transparent"
                                      [attr.value]="declaration.AcceptedAmount">
                                  </div>
                                </div>
                              </div>
                            </ng-container>

                            <ng-container
                              *ngIf="employeeDeclaration.Declarations == null || employeeDeclaration.Declarations.length == 0">
                              <div class="p-5 m-5 d-flex flex-column justify-content-center text-center fs-5">
                                Unable to get declaration detail. Please contact to admin.
                              </div>
                            </ng-container>

                          </div>
                        </div>
                        <div class="py-3">
                          <h5 class="text-dark ps-2 pb-0 mb-0">Monthly Tax Deductions Details</h5>
                          <p class="mb-0 ps-2">Below deduction are based on your declared amount. Tax amount may change
                            based
                            on th amount approved.</p>
                        </div>
                        <div class="col-md-12 row mb-4">
                          <div class="col-md-4">
                            <div class="card py-3 ps-3">
                              <p class="mb-0">TOTAL TAX PAYABLE</p>
                              <p class="text-dark fs-2 mb-0">INR {{employeeDeclaration.TaxNeedToPay | number : '1.2-2'}}
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="card py-3 ps-3">
                              <p class="mb-0">TAX PAID TILL NOW</p>
                              <p class="text-dark fs-2 mb-0">INR {{employeeDeclaration.TaxPaid| number : '1.2-2'}}</p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="card py-3 ps-3">
                              <p class="mb-0">REMAINING TAX AMOUNT</p>
                              <p class="text-dark fs-2 mb-0">INR {{employeeDeclaration.TaxNeedToPay -
                                employeeDeclaration.TaxPaid | number : '1.2-2'}}</p>
                            </div>
                          </div>
                        </div>
                        <div class="t-table t-list t-border mb-3 col-md-12 bg-white">
                          <div class="t-head overflow-hidden custom-bg">
                            <div class="tr bg-light py-3">
                              <div class="th ps-2 fe-2">Month</div>
                              <div class="th" *ngFor="let item of taxCalender">
                                <div class="d-flex align-items-center">
                                  <span>{{item.month}} {{item.year}}</span>
                                  <div class="curent-employer-indicator indicator ms-1"></div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="t-body border-bottom overflow-hidden">
                            <div class="tr py-3">
                              <div class="td px-2 fe-2">Monthly Total Tax</div>
                              <ng-container *ngFor="let item of TaxDetails">
                                <div class="td ps-1">{{item.TaxDeducted| number:'1.2-2'}}</div>
                              </ng-container>
                            </div>
                          </div>
                          <div class="ps-2 py-3 row">
                            <div class="col d-flex align-items-center">
                              <div class="previous-employer-indicator indicator"></div>
                              <p class="p-0 m-0 ps-2">Tax Deduction from previous employer</p>
                            </div>
                            <div class="col d-flex align-items-center">
                              <div class="curent-employer-indicator indicator"></div>
                              <p class="p-0 m-0 ps-2">Imported Tax Deduction from current employer</p>
                            </div>
                            <div class="col d-flex align-items-center">
                              <div class="project-salary-indicator indicator"></div>
                              <p class="p-0 m-0 ps-2">Projected Income Tax</p>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>

                  <li [ngbNavItem]="2">
                    <a ngbNavLink class="custom-text-color">1.5 Lac Exemptions</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <div class="row justify-content-between my-3">
                          <div class="col-md-8">
                            <h5 class="ps-3">1.5 Lac Exemptions</h5>
                            <p class=" ps-3">
                              The aggregate amount of deductions under section 80C, section 80CCC and sub-section (1) of
                              80CCD
                            </p>
                          </div>
                          <div class="col-md-3">
                            <label for="" class="form-label">Search perform on section and deduction name.</label>
                            <div class="form-group has-search">
                              <span class="fa fa-search form-control-feedback"></span>
                              <input type="text" class="form-control" [(ngModel)]="filterValue"
                                oninput="this.value = this.value.toUpperCase()" placeholder="Search"
                                (keyup.enter)="filterDeduction($event, '1.5lac')" (keyup.esc)="resetFilter($event)">
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12 row pb-4 ps-3">
                          <div class="col-auto me-2">
                            <label for="" class="form-label pe-2 mb-0">MAX LIMIT</label>
                            <h6 class="text-dark">INR 150000</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT DECLARED</label>
                            <h6 class="text-dark">{{employeeDeclaration.Declarations[0].TotalAmountDeclared}}</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AUTO APPROVED AMOUNT</label>
                            <h6 class="text-dark">INR 150000</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT ACCEPTED</label>
                            <h6 class="text-dark">INR 21600</h6>
                          </div>
                          <div class="col-auto ms-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT REJECTED</label>
                            <h6 class="text-dark">INR 0</h6>
                          </div>
                        </div>
                        <div class="t-table t-list t-border col-md-12">
                          <div class="hide-bar"></div>
                          <div class="t-head">
                            <div class="tr">
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">SECTION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-3">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DEDUCTION NAME</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DECLARATION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">PROOF</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">STATUS</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1 text-center">ACTIONS</div>
                            </div>
                          </div>
                          <div class="t-body" *ngIf="SectionIsReady">
                            <ng-container *ngFor="let r of ExemptionDeclaration; let i=index">
                              <div class="tr py-2" name="table-row"
                                [ngClass]="{'activated-row fw-bold text-dark': r.DeclaredValue != 0}">
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    {{r.Section}} <sup>$</sup>
                                  </div>
                                </div>
                                <div class="td align-middle fe-3">
                                  <div class="cell-wrapper">
                                    {{r.ComponentId}} ({{r.ComponentFullName}}) <a href="javascript:void(0)"
                                      class="text-decoration-none"><i
                                        class="fa fa-question-circle ps-3 text-secondary text-justify"
                                        data-bs-toggle="tooltip" data-bs-placement="right"
                                        title='{{r.ComponentDescription}}'></i></a>
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper" name="view-control">
                                    <span *ngIf="r.DeclaredValue != 0">&#8377; {{r.DeclaredValue |
                                      number:'':'en'}}</span>
                                    <span *ngIf="r.DeclaredValue == 0">Not Declared</span>
                                  </div>
                                  <div class="cell-wrapper d-flex flex-row justify-content-start d-none"
                                    name="edit-control">
                                    <span class="pe-2 d-flex flex-column justify-content-center">
                                      <i class="fa fa-inr"></i>
                                    </span>
                                    <input [value]="r.DeclaredValue" name="DeclaratedValue" class="form-control">
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    <div *ngIf="r.UploadedFileIds != null && r.UploadedFileIds != '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <div class="d-flex align-items-center">

                                          <i class="fa fa-check-circle fa-lg text-success"></i>
                                          <span class="ps-2">Uploaded</span>
                                        </div>
                                      </a>
                                    </div>
                                    <div *ngIf="r.UploadedFileIds == null || r.UploadedFileIds == '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <i class="fa fa-paperclip pe-2"></i>Not Upload
                                      </a>
                                    </div>
                                  </div>
                                </div>
                                <div class="td align-middle">
                                  <div class="cell-wrapper">
                                    <div class="d-flex align-items-center">
                                      <ng-container *ngIf="r.ComponentId == 'EPF' || r.ComponentId == 'VPF'">
                                        <i class="fa fa-check-circle fa-lg text-success"></i>
                                        <span class="ps-2 fw-bold text-dark">Auto Accepted</span>
                                      </ng-container>
                                      <ng-container *ngIf="r.DeclaredValue > 0 && (r.ComponentId != 'EPF' || r.ComponentId != 'VPF')">
                                        <i class="fa fa-check-circle fa-lg text-success"></i>
                                        <span class="ps-2">Submitted</span>
                                      </ng-container>
                                    </div>
                                    <span *ngIf="r.DeclaredValue <= 0 && (r.ComponentId != 'EPF' && r.ComponentId != 'VPF')">Not Submitted</span>
                                  </div>
                                </div>
                                <div class="td text-center fe-1" *ngIf="r.ComponentId != 'EPF' && r.ComponentId != 'VPF'">
                                  <i class="fa fa-pencil text-muted ps-3" name="edit-declaration" placement="top"
                                    ngbTooltip="Edit Declaration" (click)="editDeclaration(r, $event)"></i>
                                  <div class="d-flex align-items-center justify-content-center d-none"
                                    name="cancel-declaration">
                                    <a href="javascript:void(0)" class="text-decoration-none" [ngClass]="{'pe-none': isLoading}"
                                      (click)="saveDeclaration(r, $event)">
                                      <i *ngIf="isLoading" class="fa fa-spin fa-spinner"></i>
                                      <i *ngIf="!isLoading" class="fa fa-floppy-o" aria-hidden="true" placement="top" ngbTooltip="Save"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-danger ps-3"  [ngClass]="{'pe-none': isLoading}"
                                      (click)="closeDeclaration(r, $event)">
                                      <i class="fa fa-times" placement="top" ngbTooltip="Close Declaration"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-success ps-3"
                                      [ngClass]="{'pe-none': isLoading}" (click)="deletePopup(r, 'delete-declaration')">
                                      <i class="fa fa-trash-o" aria-hidden="true" placement="top" ngbTooltip="Remove Declaration"></i>
                                    </a>
                                  </div>
                                </div>
                                <div class="td text-center fe-1" *ngIf="r.ComponentId == 'EPF' || r.ComponentId == 'VPF'">
                                </div>
                              </div>
                            </ng-container>
                          </div>

                          <div class="t-body fs-5 text-center p-5 m-5" *ngIf="!SectionIsReady">
                            Unable to load the declaration.
                            Please contact to admin.
                          </div>
                        </div>
                        <div class="modal-footer border-top-0">
                          <button type="button" class="btn btn-outline-success"
                            (click)="nextDeclaration('otherExemptions')"> <span class="pe-2">{{isLoading ? 'Wait': 'Next'}}</span>
                            <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-arrow-right': !isLoading}"></i>
                          </button>
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>

                  <li [ngbNavItem]="3">
                    <a ngbNavLink class="custom-text-color">Other Exemptions</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <div class="row justify-content-between mt-3">
                          <div class="col-md-8">
                            <h5 class="ps-3">Other Exemptions</h5>
                            <p class=" ps-3">Other deductions under chapter VI(A) which is from 80CCD1(B) to 80U</p>
                          </div>
                          <div class="col-md-3">
                            <label for="" class="form-label">Search perform on section and deduction name.</label>
                            <div class="form-group has-search">
                              <span class="fa fa-search form-control-feedback"></span>
                              <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                                placeholder="Search" (keyup.enter)="filterDeduction($event, 'other')"
                                (keyup.esc)="resetFilter($event)">
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12 row pb-4 ps-3">
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT DECLARED</label>
                            <h6 class="text-dark">INR {{employeeDeclaration.Declarations[1].TotalAmountDeclared | number}}</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AUTO APPROVED AMOUNT</label>
                            <h6 class="text-dark">INR {{employeeDeclaration.Declarations[1].TotalAmountDeclared }}</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT ACCEPTED</label>
                            <h6 class="text-dark">INR 0</h6>
                          </div>
                          <div class="col-auto ms-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT REJECTED</label>
                            <h6 class="text-dark">INR 0</h6>
                          </div>
                        </div>
                        <div class="t-table t-list t-border col-md-12">
                          <div class="hide-bar"></div>
                          <div class="t-head">
                            <div class="tr">
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">SECTION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-3">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DEDUCTION NAME</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">MAX LIMIT</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DECLARATION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">PROOF</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">STATUS</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">ACTIONS</div>
                            </div>
                          </div>
                          <div class="t-body" *ngIf="SectionIsReady">
                            <ng-container *ngFor="let r of OtherDeclaration; let i=index">
                              <div class="tr py-2" name="table-row"
                                [ngClass]="{'activated-row fw-bold text-dark': r.DeclaredValue != 0}">
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    {{r.Section}} <sup>$</sup>
                                  </div>
                                </div>
                                <div class="td align-middle fe-3">
                                  <div class="cell-wrapper">
                                    {{r.ComponentId}} ({{r.ComponentFullName}}) <a href="javascript:void(0)"
                                      class="text-decoration-none"><i
                                        class="fa fa-question-circle ps-3 text-secondary text-justify"
                                        data-bs-toggle="tooltip" data-bs-placement="right"
                                        title='{{r.ComponentDescription}}'></i></a>
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    <span *ngIf="r.MaxLimit > 0">
                                      <i class="fa fa-rupee pe-2"></i> {{r.MaxLimit | number:'':'en'}}
                                    </span>
                                    <span *ngIf="r.MaxLimit <= 0">
                                      No Limit
                                    </span>
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper" name="view-control">
                                    <span *ngIf="r.DeclaredValue != 0">&#8377; {{r.DeclaredValue |
                                      number:'':'en'}}</span>
                                    <span *ngIf="r.DeclaredValue == 0">Not Declared</span>
                                  </div>
                                  <div class="cell-wrapper d-flex flex-row justify-content-start d-none"
                                    name="edit-control">
                                    <span class="pe-2 d-flex flex-column justify-content-center">
                                      <i class="fa fa-inr"></i>
                                    </span>
                                    <input [ngClass]="{'error-field': isAmountExceed}" [value]="r.DeclaredValue"
                                      name="DeclaratedValue" class="form-control"
                                      (keyup)="checkMaxLimit($event, r.MaxLimit)">
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    <div *ngIf="r.UploadedFileIds != null && r.UploadedFileIds != '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <div class="d-flex align-items-center">
                                          <i class="fa fa-check-circle fa-lg text-success"></i>
                                          <span class="ps-2">Uploaded</span>
                                        </div>
                                      </a>
                                    </div>
                                    <div *ngIf="r.UploadedFileIds == null || r.UploadedFileIds == '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <i class="fa fa-paperclip pe-2"></i>Not Upload
                                      </a>
                                    </div>
                                  </div>
                                </div>
                                <div class="td align-middle">
                                  <div class="cell-wrapper">
                                    <div class="d-flex align-items-center">
                                      <!-- <ng-container *ngIf="r.Status != 2">
                                        <div class="circle">
                                          <div class="checkmark">
                                          </div>
                                        </div>
                                        <span class="ps-3">Auto Accepted</span>
                                      </ng-container> -->
                                      <ng-container *ngIf="r.DeclaredValue > 0">
                                        <i class="fa fa-check-circle fa-lg text-success"></i>
                                        <span class="ps-2">Submitted</span>
                                      </ng-container>
                                    </div>
                                    <span *ngIf="r.DeclaredValue <= 0">Not Submitted</span>
                                  </div>
                                </div>
                                <div class="td text-center fe-1">
                                  <i class="fa fa-pencil text-muted ps-3" name="edit-declaration" placement="top"
                                    ngbTooltip="Edit Declaration" (click)="editDeclaration(r, $event)"></i>
                                  <div class="d-flex align-items-center justify-content-center d-none"
                                    name="cancel-declaration">
                                    <a href="javascript:void(0)" class="text-decoration-none"  [ngClass]="{'pe-none': isLoading}"
                                      (click)="saveDeclaration(r, $event)">
                                      <i *ngIf="isLoading" class="fa fa-spin fa-spinner"></i>
                                      <i *ngIf="!isLoading" class="fa fa-floppy-o" aria-hidden="true" placement="top" ngbTooltip="Save"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-danger ps-3"  [ngClass]="{'pe-none': isLoading}"
                                      (click)="closeDeclaration(r, $event)">
                                      <i class="fa fa-times" placement="top" ngbTooltip="Close Declaration"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-success ps-3"  [ngClass]="{'pe-none': isLoading}" (click)="deletePopup(r, 'delete-declaration')">
                                      <i class="fa fa-trash-o" aria-hidden="true" placement="top" ngbTooltip="Remove Declaration"></i>
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </ng-container>
                          </div>

                          <div class="t-body fs-5 text-center p-5 m-5" *ngIf="!SectionIsReady">
                            Unable to load other Exemptions.
                            Please contact to admin.
                          </div>
                        </div>
                        <div class="modal-footer border-top-0">
                          <button type="button" class="btn btn-outline-primary" (click)="nextDeclaration('exemptions')">
                            <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-arrow-left': !isLoading}"></i>
                            <span class="ps-2">{{isLoading ? 'Wait': 'Prev'}}</span>
                          </button>
                          <button type="button" class="btn btn-outline-success" (click)="nextDeclaration('taxSavingAllowance')"><span class="pe-2">{{isLoading ? 'Wait': 'Next'}}</span>
                            <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-arrow-right': !isLoading}"></i>
                          </button>
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>

                  <li [ngbNavItem]="4">
                    <a ngbNavLink class="custom-text-color">Tax Saving Allowances</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <div class="row justify-content-between mt-3 mb-2">
                          <div class="col-md-8">
                            <h5 class="ps-3">Tax Saving Allowances</h5>
                            <p class=" ps-3">Following allowances are exempted from Gross for Income tax calculation
                              only
                              when
                              claim is submitted against allowances.</p>
                          </div>
                          <div class="col-md-3">
                            <label for="" class="form-label">Search perform on section and deduction name.</label>
                            <div class="form-group has-search">
                              <span class="fa fa-search form-control-feedback"></span>
                              <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                                placeholder="Search" (keyup.enter)="filterDeduction($event, 'taxsaving')"
                                (keyup.esc)="resetFilter($event)">
                            </div>
                          </div>
                        </div>
                        <div class="alert alert-warning mx-4" role="alert">
                          Tax exempted values are based on the amount allocated in your salary structure. Please check
                          income
                          tax calculation to view tax exempted amount.
                        </div>
                        <div class="col-md-12 row pb-4 ps-3 pt-2">
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT DECLARED</label>
                            <h6 class="text-dark">INR {{employeeDeclaration.Declarations[2].TotalAmountDeclared}}</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AUTO APPROVED AMOUNT</label>
                            <h6 class="text-dark">INR {{employeeDeclaration.Declarations[2].TotalAmountDeclared}}</h6>
                          </div>
                          <div class="col-auto mx-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT ACCEPTED</label>
                            <h6 class="text-dark">INR 0</h6>
                          </div>
                          <div class="col-auto ms-3">
                            <label for="" class="form-label pe-2 mb-0">AMOUNT REJECTED</label>
                            <h6 class="text-dark">INR 0</h6>
                          </div>
                        </div>
                        <div class="t-table t-list t-border col-md-12">
                          <div class="hide-bar"></div>
                          <div class="t-head">
                            <div class="tr">
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">SECTION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-3">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DEDUCTION NAME</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">MAX LIMIT</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">DECLARATION</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">PROOF</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">
                                <div class="cell-wrapper">
                                  <div class="t-filter">
                                    <a href="javascript:void()">STATUS</a>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-1">ACTIONS</div>
                            </div>
                          </div>
                          <div class="t-body" *ngIf="SectionIsReady">
                            <ng-container *ngFor="let r of TaxSavingAlloance; let i=index">
                              <div class="tr py-2" name="table-row"
                                [ngClass]="{'activated-row fw-bold text-dark': r.DeclaredValue != 0}">
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    {{r.Section}} <sup>$</sup>
                                  </div>
                                </div>
                                <div class="td align-middle fe-3">
                                  <div class="cell-wrapper">
                                    {{r.ComponentId}} ({{r.ComponentFullName}}) <a href="javascript:void(0)"
                                      class="text-decoration-none"><i
                                        class="fa fa-question-circle ps-3 text-secondary text-justify"
                                        data-bs-toggle="tooltip" data-bs-placement="right"
                                        title='{{r.ComponentDescription}}'></i></a>
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    <i class="fa fa-rupee pe-2"></i> {{r.MaxLimit | number:'':'en'}}
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper" name="view-control">
                                    <span *ngIf="r.DeclaredValue != 0">&#8377; {{r.DeclaredValue |
                                      number:'':'en'}}</span>
                                    <span *ngIf="r.DeclaredValue == 0">Not Declared</span>
                                  </div>
                                  <div class="cell-wrapper d-flex flex-row justify-content-start d-none"
                                    name="edit-control">
                                    <span class="pe-2 d-flex flex-column justify-content-center">
                                      <i class="fa fa-inr"></i>
                                    </span>
                                    <input [ngClass]="{'error-field': isAmountExceed}" [value]="r.DeclaredValue"
                                      name="DeclaratedValue" class="form-control"
                                      (keyup)="checkMaxLimit($event, r.MaxLimit)">
                                  </div>
                                </div>
                                <div class="td align-middle fe-1">
                                  <div class="cell-wrapper">
                                    <div *ngIf="r.UploadedFileIds != null && r.UploadedFileIds != '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <div class="d-flex align-items-center">
                                          <i class="fa fa-check-circle fa-lg text-success"></i>
                                          <span class="ps-2">Uploaded</span>
                                        </div>
                                      </a>
                                    </div>
                                    <div *ngIf="r.UploadedFileIds == null || r.UploadedFileIds == '[]'">
                                      <a href="javascript:void(0)" name="upload-proof"
                                        class="text-muted pe-none text-decoration-none" (click)="uploadDocument(r)">
                                        <i class="fa fa-paperclip pe-2"></i><span>Not Upload</span>
                                      </a>
                                    </div>
                                  </div>
                                </div>
                                <div class="td align-middle">
                                  <div class="cell-wrapper">
                                    <div class="d-flex align-items-center">
                                      <ng-container *ngIf="r.DeclaredValue > 0">
                                        <i class="fa fa-check-circle fa-lg text-success"></i>
                                        <span class="ps-2">Submitted</span>
                                      </ng-container>
                                    </div>
                                    <span *ngIf="r.DeclaredValue <= 0">Not Submitted</span>
                                  </div>
                                </div>
                                <div class="td text-center fe-1">
                                  <i class="fa fa-pencil text-muted ps-3" name="edit-declaration" placement="top" ngbTooltip="Edit Declaration" (click)="editDeclaration(r, $event)"></i>
                                  <div class="d-flex align-items-center justify-content-center d-none"
                                    name="cancel-declaration">
                                    <a href="javascript:void(0)" class="text-decoration-none"  [ngClass]="{'pe-none': isLoading}"
                                      (click)="saveDeclaration(r, $event)">
                                      <i *ngIf="isLoading" class="fa fa-spin fa-spinner"></i>
                                      <i *ngIf="!isLoading" class="fa fa-floppy-o" aria-hidden="true" placement="top" ngbTooltip="Save"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-danger ps-3"  [ngClass]="{'pe-none': isLoading}"
                                      (click)="closeDeclaration(r, $event)" >
                                      <i class="fa fa-times" placement="top" ngbTooltip="Close Declaration"></i>
                                    </a>
                                    <a href="javascript:void(0)" class="text-decoration-none text-success ps-3"  [ngClass]="{'pe-none': isLoading}" (click)="deletePopup(r, 'delete-declaration')">
                                      <i class="fa fa-trash-o" aria-hidden="true" placement="top" ngbTooltip="Remove Declaration"></i>
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </ng-container>
                          </div>

                          <div class="t-body fs-5 text-center p-5 m-5" *ngIf="!SectionIsReady">
                            Unable to load tax saving allowances.
                            Please contact to admin.
                          </div>
                        </div>
                        <div class="modal-footer border-top-0">
                          <button type="button" class="btn btn-outline-primary" (click)="nextDeclaration('otherExemptions')">
                            <i class="fa pe-2" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-arrow-left': !isLoading}"></i>
                            <span class="ps-2">{{isLoading ? 'Wait': 'Prev'}}</span>
                          </button>
                          <!-- <button type="button" class="btn btn-outline-success"
                            (click)="submitDeclaration()">Submit</button> -->
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>

                  <li [ngbNavItem]="5">
                    <a ngbNavLink class="custom-text-color">House Property</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <h5 class="text-dark">House Property</h5>
                        <p>Here you can declare all the gouse property rented or owned.</p>
                        <div class="alert alert-warning fs-6" role="alert" *ngIf="houseRentDetail.TotalRent > 0 && houseRentDetail.TotalRent > 100000">
                          The total rent amount for this financial year exceeds INR 1,00,000. You need to provide Owner PAN details or Signed documents.
                        </div>
                        <div class="col-md-12 row">
                          <div class="col-md-9 ps-3">
                            <div class="col-md-12">
                              <div class="card px-3 pb-3">
                                <h5 class="pt-3 pb-2">I live in a rented residence</h5>
                                <div class="alert alert-info" role="alert" *ngIf="houseRentDetail== null || houseRentDetail == ''">
                                  There are no rental details available
                                </div>
                                <p class="mb-0">{{houseRentDetail.RentedFrom}} - {{houseRentDetail.RentedTo}}</p>
                                <div class="custom-bg text-dark d-flex align-items-center py-2 my-3 rounded" *ngIf="houseRentDetail.TotalRent > 0">
                                  <a href="javascript:void(0)" class="text-decoration-none" (click)="showrentedDetail()">
                                    <i class="fa fa-lg ps-4" [ngClass]="{'fa-caret-right': !isShowRentedDetail, 'fa-caret-down': isShowRentedDetail}"></i>
                                  </a>
                                  <div class="pe-2 ps-4">
                                    <small>MONTH</small>
                                    <p class="mb-0">{{houseRentDetail.RentedFrom}} - {{houseRentDetail.RentedTo}}</p>
                                  </div>
                                  <span class="fs-5 px-4"></span>
                                  <div class="px-2">
                                    <small>CITY</small>
                                    <p class="mb-0">{{houseRentDetail.City}}</p>
                                  </div>
                                  <span class="fs-5 px-4"></span>
                                  <div class="px-2">
                                    <small>NUMBER OF OWNERS</small>
                                    <p class="mb-0">1</p>
                                  </div>
                                  <div class="ms-auto">
                                    <span class="badge bg-primary">RENTED</span>
                                    <span class="badge bg-success ms-2">AUTO APPROVED TILL CUTOFF DATE</span>
                                    <a href="javascript:void(0)" class="text-decoration-none text-dark" (click)="editRentedResidence(houseRentDetail)">
                                      <i class="fa fa-ellipsis-v ps-3 pe-4" aria-hidden="true"></i>
                                    </a>
                                  </div>
                                </div>
                                <div class="card mb-4" *ngIf="isShowRentedDetail">
                                  <p class="mb-0 custom-bg text-dark py-2 ps-2">Rentail Details</p>
                                  <div class="bg-white d-flex align-items-center py-2 my-3 rounded" *ngIf="houseRentDetail.TotalRent > 0">
                                    <div class="pe-2 ps-4 col-md-4">
                                      <small>RENTED DECLARED</small>
                                      <p class="mb-0 text-dark">INR {{houseRentDetail.TotalRent}}</p>
                                    </div>
                                    <div class="px-2 col-md-4">
                                      <small>ADDRESS</small>
                                      <p class="mb-0 text-dark">{{houseRentDetail.Address}}</p>
                                    </div>
                                  </div>
                                  <p class="mb-0 custom-bg text-dark py-2 ps-2">Owner Details</p>
                                  <div class="bg-white d-flex align-items-center py-2 my-3 rounded" *ngIf="houseRentDetail.TotalRent > 0">
                                    <div class="pe-2 ps-4 col-md-2">
                                      <small>NAME</small>
                                      <p class="mb-0 text-dark">{{houseRentDetail.OwnerName}}</p>
                                    </div>
                                    <div class="px-2 col-md-2">
                                      <small>PAN NUMBER</small>
                                      <p class="mb-0 text-dark">{{houseRentDetail.PANNo}}</p>
                                    </div>
                                    <div class="px-2 col-md-4">
                                      <small>ADDRESS</small>
                                      <p class="mb-0 text-dark">{{houseRentDetail.OwnerAddress}}</p>
                                    </div>
                                  </div>
                                </div>
                                <div *ngIf="houseRentDetail.TotalRent <= 0">
                                  <button class="btn btn-outline-primary" (click)="rentedDecalrationPopup()"> <i
                                      class="fa fa-plus"></i> Add Rented
                                    Residence</button>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-12 mt-4 mb-3">
                              <div class="card px-3 pb-3">
                                <h5 class="pt-3 pb-2">I own residdence</h5>
                                <div class="alert alert-info" role="alert">
                                  There are no own residence details available
                                </div>
                                <div>
                                  <button class="btn btn-outline-primary"> <i class="fa fa-plus"></i> Add Own
                                    Residence</button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-3 mb-3">
                            <div class="card">
                              <div class="d-flex align-items-center pt-3 ps-3">
                                <i class="fa fa-bullhorn"></i>
                                <h6 class="mb-0 ps-3">House property declaration</h6>
                              </div>
                              <ul class="pt-3">
                                <li>You can add more than one rented property or own property for the current financial
                                  year.
                                </li>
                                <li class="pt-3">For rented property if the total rent is more than &#x20b9; 100000 then
                                  you
                                  need to provide either PAN of owner or declaration letter.</li>
                                <li class="pt-3">For rented property you are eligible for HRA and in case HRA is not
                                  paid by
                                  your employer you will be eligible for exemption under section 80 GG.</li>
                                <li class="pt-2">For own property/residence you will be eligible for house loan interest
                                  exemption under section 24.</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>

                  <li [ngbNavItem]="6">
                    <a ngbNavLink class="custom-text-color">Income From Other Sources</a>
                    <ng-template ngbNavContent>
                      <ng-container>
                        <h5 class="text-dark">Income From Other Sources</h5>
                        <p>Income from other sources is a residual category used to classify income that is not
                          classified
                          as
                          taxed under any other head of income.</p>
                        <div class="mb-3">
                          <button class="btn btn-outline-primary"> <i class="fa fa-plus"></i> Add Income From Other
                            Sources</button>
                        </div>
                      </ng-container>
                    </ng-template>
                  </li>
                </ul>
                <div [ngbNavOutlet]="nav" class="mt-3"></div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Attachment Modal -->
<div class="modal fade attachment-popup" id="addAttachmentModal" tabindex="-1" aria-labelledby="addAttachmentModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl p-5 ">
    <div class="modal-content rounded-3 px-4">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title fw-normal" id="addAttachmentModalLabel">{{viewAttachment == '' ? 'Add Attachment' : 'View Attachment'}}  for {{attachmentForDeclaration}}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="col-12 row m-0">
          <div class="col-md-12 mt-4 overflow-auto" style="height: 33vh">
            <ng-container *ngIf="slectedDeclarationnFile.length > 0">
              <table class="table">
                <thead>
                  <tr>
                    <th width="8%">#</th>
                    <th>File Name</th>
                    <th width="25%">File Size (KB)</th>
                    <td width="10%">Action</td>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of slectedDeclarationnFile; let i = index">
                    <td class="counterCell">{{i+1}}</td>
                    <td>{{item.FileName}}</td>
                    <td>
                      <ng-container *ngIf="item.FileSize > 0">
                        {{item.FileSize/1024 | number: '1.2-2'}}
                      </ng-container>
                      <ng-container *ngIf="item.FileSize == null || item.FileSize <= 0">
                        ---
                      </ng-container>
                    </td>
                    <td>
                      <!-- <input type="file" id="modifyAttachment" class="d-none"
                        (change)="ModifyAttachment($event, item.FileId)" />
                      <a href="javascript:void(0)" (click)="fireBrowser()" class="text-decoration-none"> <i
                          class="fa fa-pencil text-primary"></i></a> -->
                      <a href="javascript:void(0)" class="text-decoration-none" (click)="viewFile(item)"><i class="fa fa-eye px-2 text-dark"></i></a>
                      <a href="javascript:void(0)" class="text-decoration-none" (click)="deletePopup(item, 'deletefile')"><i class="fa fa-trash px-2 text-danger"></i></a>
                    </td>
                  </tr>
                  <tr *ngIf="viewAttachment == null || viewAttachment == ''">
                    <td colspan="2" class="ps-5 fw-bold">Total Size: </td>
                    <td colspan="2" class="fw-bold">{{totalFileSize | number: '1.2-2'}} KB</td>
                  </tr>
                </tbody>
              </table>
            </ng-container>
            <ng-container *ngIf="slectedDeclarationnFile.length == 0">
              <table class="table" *ngIf="FilesCollection.length > 0">
                <thead>
                  <tr>
                    <th width="8%">#</th>
                    <th>File Name</th>
                    <th width="15%">File Size (KB)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of FilesCollection">
                    <td class="counterCell"></td>
                    <td>{{item.name}}</td>
                    <td>{{item.size/1024 | number: '1.2-2'}}</td>
                  </tr>
                  <tr>
                    <td colspan="2" class="ps-5 fw-bold">Total Size: </td>
                    <td width="15%" class="fw-bold">{{totalFileSize | number: '1.2-2'}} KB</td>
                  </tr>
                </tbody>
              </table>
            </ng-container>

            <div class="text-danger text-center fw-bold" *ngIf="isLargeFile">
              File size is greater than 2028KB i.e 2 MB, so please remove some file
            </div>
            <div class="select-message" *ngIf="FilesCollection.length == 0  && slectedDeclarationnFile.length == 0">
              <h3>
                Please upload at least one file and You will see their details here.
              </h3>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer border-top-0 mb-2">
        <input type="file" id="uploadAttachment" class="d-none" multiple (change)="UploadAttachment($event)" />
        <a href="javascript:void(0)" class="text-decoration-none mx-2" (click)="fireFileBrowser()"><i class="fa fa-paperclip pe-2"></i>Add Attachment</a>
        <button type="button" class="btn btn-outline-danger mx-2" (click)="closeAttachmentModal()">
          <i class="fa fa-eraser pe-2"></i> Clean
        </button>
        <button type="button" class="btn btn-primary-c ms-2" (click)="saveAttachment()"
          [disabled]="isLargeFile || FilesCollection.length == 0">
          <i class="fa fa-upload pe-2" aria-hidden="true"></i>Upload
        </button>
      </div>
    </div>
  </div>
</div>

<!-- rented residence modal -->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="rentedResidenceModal" tabindex="-1"
  aria-labelledby="rentedResidenceModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title" id="rentedResidenceModalLabel">{{isRentedResidenceEdit ? 'Edit': 'Add'}} Rented Residence</h5>
        <button class="btn btn-danger" (click)="deleteRentDeclarationPopUp()"><i class="fa fa-trash-o pe-2"></i>Reset</button>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <form [formGroup]="rentResidenceForm" *ngIf="rentResidenceForm">
          <ng-container *ngIf="rentalPage == 1">
            <h5>Rental Deatils</h5>
            <div class="row">
              <div class="col-md-6 mt-3">
                <label class="form-label">From</label>
                <select class="form-select" formControlName="RentedFrom">
                  <option value="">Select from date</option>
                  <option [value]="item.month + item.year" *ngFor="let item of taxCalender">{{item.month}} {{item.year}}
                  </option>
                </select>
              </div>
              <div class="col-md-6 mt-3">
                <label class="form-label">To</label>
                <select class="form-select" formControlName="RentedTo">
                  <option value="">Select to date</option>
                  <option [value]="item.month + item.year" *ngFor="let item of taxCalender">{{item.month}} {{item.year}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-12 mt-3">
              <label class="form-label">Address</label>
              <textarea formControlName="Address" placeholder="Address" class="form-control" oninput="this.value = this.value.toUpperCase()"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6 mt-3">
                <label class="form-label">City</label>
                <input type="text" formControlName="City" placeholder="City" class="form-control" oninput="this.value = this.value.toUpperCase()">
              </div>
              <div class="col-md-6 mt-3">
                <label class="form-label">Monthly Rent</label>
                <div class="form-group has-search">
                  <span class="fa fa-inr form-control-feedback"></span>
                  <input type="text" class="form-control" formControlName="TotalRent" placeholder="Total Rent"
                    OnlyNumber="9">
                </div>
                <small>Total Rent: <i class="fa fa-inr pe-1" aria-hidden="true"></i>{{rentResidenceForm.get('TotalRent').value * 12 | number: '1.2-2'}}</small>
              </div>
            </div>
            <div class="mt-3">
              <input type="file" class="d-none" accept=".png, .jpg, .pdf. .doc, .docx, .txt, application/pdf"
                (change)="uploadReceipts($event)" multiple id="uploadreceipt">
              <a href="javascript:void(0)" *ngIf="houseRentDetailFile.length <=0" (click)="fireuploadreceipt()" class="text-decoration-none"><i
                  class="fa fa-paperclip pe-2 pt-3"></i>Rent Receipts or Agreement <i
                  class="fa fa-exclamation-circle ps-2 text-secondary"></i></a>
              <span class="ps-3 fw-bold" *ngIf="FileDocumentList.length > 0">{{FileDocumentList.length}} file selected</span>
              <a href="javascript:void(0)" (click)="viewRentFilePopUp(houseRentDetailFile)">
                <span class="ps-3 fw-bold" *ngIf="FileDocumentList.length == 0 && houseRentDetailFile.length > 0">{{houseRentDetailFile.length}} file uploaded</span>
              </a>
            </div>
            <div class="modal-footer border-top-0">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-close pe-2"></i>
                Cancel</button>
              <button type="button" class="btn btn-primary-c" (click)="navRentalpage(2)"><i
                  class="fa fa-arrow-right pe-2"></i> Next</button>
            </div>
          </ng-container>
          <ng-container *ngIf="rentalPage == 2">
            <h5>Owner Name</h5>
            <div class="col-md-6 mt-3">
              <label class="form-label">Owner Name</label>
              <input type="text" class="form-control" placeholder="Owner Name" formControlName="OwnerName" oninput="this.value = this.value.toUpperCase()">
            </div>
            <div class="form-check d-flex align-items-center col-md-6 mt-3">
              <input class="form-check-input" type="checkbox" (click)="panFieldEnable($event)"
                formControlName="IsPANNo">
              <label class="form-check-label px-2">
                PAN Number
              </label>
              <div class="col-md-9">
                <input type="text" class="form-control" placeholder="PAN Number" [readonly]="!isPanEnable" oninput="this.value = this.value.toUpperCase()"
                  formControlName="PANNo">
              </div>
            </div>
            <div class="form-check col-md-6 mt-3">
              <input class="form-check-input" type="checkbox" (click)="sameOwnerAddress($event)" oninput="this.value = this.value.toUpperCase()" formControlName="IsOwnerAddressSame">
              <label class="form-check-label">
                Owner address same as rental address
              </label>
            </div>
            <div class="col-md-12 mt-3">
              <label class="form-label">Address</label>
              <textarea type="text" formControlName="Address" placeholder="OwnerAddress" class="form-control"
                formControlName="OwnerAddress"></textarea>
            </div>
            <div class="form-check mt-3">
              <input class="form-check-input" formControlName="IsSignedDeclaration"
                (click)="signDeclFieldEnable($event)" type="checkbox">
              <label class="form-check-label">
                Signed Declaration Letter. You can use this <a href="javascript:void(0)"
                  class="text-decoration-none">Declaration Format. <i
                    class="fa fa-exclamation-circle ps-2 text-secondary"></i></a>
              </label>
              <div class="col-md-6 mt-3">
                <label class="form-label">Owner Type</label>
                <select class="form-select" [disabled]="!isSignDeclareEnable" formControlName="LandlordType">
                  <option value="" disabled>Select Land lord Type</option>
                  <option value="Government">Government</option>
                  <option value="NonResident">Non Resident</option>
                  <option value="OtherValue">Other Value</option>
                </select>
                <div class="mt-3">
                  <input type="file" class="d-none" accept=".png, .jpg, .pdf. .doc, .docx, .txt, application/pdf"
                    (change)="uploadHRALetter($event)" multiple id="uploadHRALetter">
                  <a href="javascript:void(0)" class="text-decoration-none" (click)="fireuploadHRALetter()" *ngIf="houseRentDetailLetterFile.length <= 0"><i
                      class="fa fa-paperclip pe-2 pt-3"></i>Upload declaration letter</a>
                  <span class="ps-3 fw-bold" *ngIf="hraLetterList.length > 0">{{this.hraLetterList.length}} file selected</span>
                  <a href="javascript:void(0)" (click)="viewRentFilePopUp(houseRentDetailLetterFile)">
                    <span class="ps-3 fw-bold" *ngIf="hraLetterList.length == 0 && houseRentDetailLetterFile.length > 0">{{houseRentDetailLetterFile.length}} file uploaded</span>
                  </a>
                </div>
              </div>
            </div>
            <div class="modal-footer border-top-0">
              <button type="button" class="btn btn-secondary" (click)="navRentalpage(1)"><i
                  class="fa fa-arrow-left pe-2"></i> Back</button>
              <button class="btn btn btn-primary-c" [disabled]="isLoading" (click)="submitRentResidence()">
                <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-save': !isLoading}"></i>
                {{ isLoading ? 'Wait' : 'Save' }}
              </button>
            </div>
          </ng-container>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- end -->

<!-- Add Attachment Popup -->
<!-- <div class="modal fade attachment-popup" id="addAttachmentModal" tabindex="-1" aria-labelledby="addAttachmentModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded">
      <div class="modal-header bg-secondary text-light">
        <h5 class="modal-title fw-normal" id="addAttachmentModalLabel">Add Attachment</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-secondary">DECLARATION: {{attachmentForDeclaration}}</p>
        <div class="text-center rounded py-4 upload-document-container">
          <input type="file" class="d-none"  accept=".png, .jpg, .pdf. .doc, .docx, .txt, application/pdf"
            (change)="UploadAttachment($event)" multiple id="uploadAttachment">
          <a href="javascript:void(0)" class="text-decoration-none" (click)="fireFileBrowser()"><i
              class="fa fa-paperclip pe-2"></i>
            Add Attachment <i class="fa fa-info-circle text-secondary ps-2" placement="top" ngbTooltip="You are allowed to submit only 12 file(s).
                    Allowed format are .pdf, .jpg, .png, .doc, .txt. The file size should not exceed 2MB."></i></a>
          <div class="text-danger text-center fw-bold" *ngIf="isLargeFile">
            File size is greater than 2MB.
          </div>
        </div>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-outline-danger" (click)="closeAttachmentModal()"
          data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-outline-primary" [disabled]="isLargeFile"
          (click)="saveAttachment()">Save</button>
      </div>
    </div>
  </div>
</div> -->
<!-- End -->

<!-- Pdf viewer modal -->
<div class="d-none file-container" id="file-container" (click)="closePdfViewer()">
  <div class="text-end">
    <a (click)="closePdfViewer()" class="close_view">
      <i class="fa fa-times fa-2x" aria-hidden="true"></i>
    </a>
  </div>
  <iframe src="" width="800px" height="600px" style="border: none;"></iframe>
</div>
<!-- End pdf view modal -->

<!-- Delete Attachment Popup -->
<div class="modal delete-modal fade delete-popup" id="deleteAttachmentModal" tabindex="-1" aria-labelledby="deleteAttachmentModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded">
      <div class="modal-header">
        <h5 class="modal-title fw-normal" id="deleteAttachmentModalLabel">{{deleteType == 'deletefile' ? 'Delete Only File' : 'Remove Declaration'}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" *ngIf="deleteFile != null">
        <ng-container *ngIf="deleteType == 'deletefile'">
          <h5>You are trying to delete <span class="text-dark fw-bold">{{deleteFile.FileName}}</span> attachment file only.</h5>
          <p>Please press the confirm button to delete the file permanently</p>
        </ng-container>
        <ng-container *ngIf="deleteType == 'delete-declaration'">
          <h5>You are trying to delete <span class="text-dark fw-bold">{{deleteFile.ComponentFullName}}</span> component details</h5>
          <p>Please press the confirm button to delete {{deleteFile.ComponentFullName}} record permanently</p>
          <p><b>Note:</b> Make sure after deleting your declaration and tax amount may vary.</p>
        </ng-container>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn btn-primary-c" *ngIf="deleteType == 'delete-declaration'" [disabled]="isLoading" (click)="deleteDeclaration()">
          <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-save': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Confirm' }}
        </button>
        <button class="btn btn btn-primary-c" *ngIf="deleteType == 'deletefile'" [disabled]="isLoading" (click)="deleteOnlyFile()">
          <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-save': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Confirm' }}
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->

<!-- View Rent file -->
<div class="modal fade delete-modal" id="rentFileModal" tabindex="-1" aria-labelledby="rentFileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title" id="rentFileModalLabel">Uploaded Rent Files</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ng-container >
          <table class="table">
            <thead>
              <tr>
                <th width="8%">#</th>
                <th>File Name</th>
                <td width="20%">Action</td>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of viewRentPropFile; let i = index">
                <td class="counterCell">{{i+1}}</td>
                <td>{{item.FileName}}.{{item.FileExtension}}</td>
                <td>
                  <a href="javascript:void(0)" class="text-decoration-none" (click)="viewFile(item)"><i class="fa fa-eye px-2 text-dark"></i></a>
                  <a href="javascript:void(0)" class="text-decoration-none" (click)="deleteRentFile(item)"><i class="fa fa-trash px-2 text-danger"></i></a>
                </td>
              </tr>
            </tbody>
          </table>
        </ng-container>
      </div>
    </div>
  </div>
</div>
<!-- End -->

<!-- Delete rented declaration Popup -->
<div class="modal delete-modal fade delete-popup" id="deleteRentDeclrModal" tabindex="-1" aria-labelledby="deleteRentDeclrModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded px-4">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title fw-normal" id="deleteRentDeclrModalLabel">Remove Rent Declaration</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <h5>You are trying to delete <span class="text-dark fw-bold">Rent Declaration</span> details and files</h5>
          <p>Please press the confirm button to delete Rent Declaration record permanently</p>
          <p><b>Note:</b> Make sure after deleting your rent declaration and amount may vary.</p>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn btn-primary-c" [disabled]="isLoading" (click)="deleteRentDeclaration()">
          <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-save': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Confirm' }}
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->
