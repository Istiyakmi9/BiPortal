<div class="col-md-12 main-container" [ngClass]="{'preload': !isRecordAvailable}">
  <div class="x_panel">
    <div class="x_header">
      <div class="x_header_title ps-1 pe-2">
        <h2>Upload Files <small>Add files</small>
        </h2>
        <div class="float-end d-inline create-link">
          <button class="btn btn-outline-success btn-sm"> <i class="fa fa-plus-square-o me-1" aria-hidden="true"></i>Add
            File</button>
          <button class="btn btn-outline-primary btn-sm ms-2"><i class="fa fa-upload me-2" aria-hidden="true"></i>Upload
            bulk files
          </button>
        </div>
      </div>
    </div>
    <div class="mx-2 pe-1">
      <app-breadcrums></app-breadcrums>
    </div>
    <div [ngSwitch]="isRecordAvailable">
      <div *ngSwitchCase="false">
        <div class="mt-5">
          <app-pre-load-table></app-pre-load-table>
        </div>
      </div>
      <div *ngSwitchDefault>
        <ng-container>
          <div class="col-md-12 p-0 mt-3">
            <div class="x_content">
              <div class="x_header_title">
                <h5 class="ps-1">Available Candidates
                  <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#myModal"><i
                      class="ms-4 fa fa-upload"></i></a>
                </h5>
              </div>
              <div class="mb-4 row m-0">
                <div class="col-md-9 ps-1">
                  <input type="text" class="form-control form-control-sm" (keyup.enter)="globalFilter()"
                    (keydown.esc)="resetFilter()" placeholder="Search by any: (Name, Mobile, Email And Title)"
                    [(ngModel)]="anyFilter">
                </div>
                <div class="col-md-3 text-end pe-2">
                  <button class="btn btn-primary filter-btn-grp btn-sm" (click)="globalFilter()">
                    <i class="fa fa-filter me-1"></i> Filter
                  </button>
                  <button class="btn btn-outline-danger filter-btn-grp btn-sm ms-2" (click)="resetFilter()">
                    <i class="fa fa-repeat"></i> Reset filter
                  </button>
                </div>
              </div>
              <ng-container *ngIf="isRecordAvailable">
                <div class="x_content">
                  <div class="t-table t-list t-border col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void()" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-2">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Name" placeholder="Search by Name">
                            <div class="t-filter" (click)="arrangeDetails(orderByNameAsc, 'Name')">
                              <a href="javascript:void()" class="pe-2">Name</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByNameAsc == null || !orderByNameAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByNameAsc == null || orderByNameAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Phone_Number"
                                placeholder="Mobile No">
                            <div class="t-filter" (click)="arrangeDetails(orderByMobileAsc, 'Phone_Number')">
                              <a href="javascript:void()" class="pe-2">Mobile</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByMobileAsc == null || !orderByMobileAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByMobileAsc == null || orderByMobileAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-2">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Email_ID"
                                placeholder="Search by Email Id">
                            <div class="t-filter" (click)="arrangeDetails(orderByEmailAsc, 'Email_ID')">
                              <a href="javascript:void()" class="pe-2">Email</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByEmailAsc == null || !orderByEmailAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByEmailAsc == null || orderByEmailAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control">
                            <div class="t-filter" >
                              <a href="javascript:void()" class="ps-3">Speciality</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                            (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Job_Title"
                            placeholder="By Job Title">
                            <div class="t-filter" (click)="arrangeDetails(orderBySpecialityAsc, 'Job_Title')">
                              <a href="javascript:void()" class="pe-2">Title</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderBySpecialityAsc == null || !orderBySpecialityAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderBySpecialityAsc == null || orderBySpecialityAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Preferred_Locations"
                                placeholder="By Location">
                            <div class="t-filter" (click)="arrangeDetails(orderByLocationAsc, 'Preferred_Locations')">
                              <a href="javascript:void()" class="pe-2">Location</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByLocationAsc == null || !orderByLocationAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByLocationAsc == null || orderByLocationAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Total_Experience"
                                placeholder="By Exp">
                            <div class="t-filter" (click)="arrangeDetails(orderByExpAsc, 'Total_Experience')">
                              <a href="javascript:void()"  class="pe-2">Exp (mo)</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByExpAsc == null || !orderByExpAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByExpAsc == null || orderByExpAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                                (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Notice_Period"
                                placeholder="Notice Period">
                            <div class="t-filter" (click)="arrangeDetails(orderByNoticeAsc, 'Notice_Period')">
                              <a href="javascript:void()" class="pe-2">Notice</a>
                              <i class="fa fa-sort-amount-asc" [ngClass]="{'d-none': orderByNoticeAsc == null || !orderByNoticeAsc }" aria-hidden="true"></i>
                              <i class="fa fa-sort-amount-desc" [ngClass]="{'d-none': orderByNoticeAsc == null || orderByNoticeAsc }" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div class="th text-center fe-1">
                          <div class="cell-wrapper">
                            <button (click)="filterRecords()" class="btn btn-primary srch-btn"><i
                              class="fa fa-search pr-2"></i>
                              Search
                            </button>
                            <div class="t-filter text-center d-block">
                              <a href="javascript:void()" class="fw-bold">ACTIONS</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <div class="tr py-2" *ngFor="let item of ProfessionalUserDetail">
                        <div class="td align-middle text-center fe-index">{{item.UserId}}</div>
                        <div class="td align-middle fe-2">
                          <div class="cell-wrapper">
                            <a (click)="EditCurrent(user)">{{item.Name}}</a>
                            <div class="float-end">
                              <a href=""><span (click)="EditCurrent(user)" class="badge bg-primary">
                                  <i class="fa fa-pencil-square-o"></i>
                                </span>
                              </a>
                            </div>
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            {{item.Phone_Number}}
                          </div>
                        </div>
                        <div class="td align-middle fe-2">
                          <div class="cell-wrapper">
                            {{item.Email_ID}}
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            SKILLS
                            <div class="float-end ms-1">
                              <a href="">
                                <span class="badge bg-primary"><i (click)="EditCurrent(item.UserId)"
                                    class="fa fa-code"></i>&nbsp;
                                  5</span>
                              </a>
                            </div>
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            {{item.Job_Title}}
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            NA
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            {{item.Total_Experience}}
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="cell-wrapper">
                            {{item.Notice_Period}}
                          </div>
                        </div>
                        <div class="td align-middle fe-1">
                          <div class="d-flex flex-row justify-content-around">
                            <a href="">
                              <span class="badge bg-danger">
                                <i class="fa fa-trash" aria-hidden="true" (click)="DeleteCurrent(item.UserId)"></i>
                              </span>
                            </a>
                            <a href="javascript:void(0)" (click)="AddEditDocuments(item)">
                              <span class="badge bg-dark">
                                <i class="fa fa-folder" aria-hidden="true"></i>
                              </span>
                            </a>
                            <a href="">
                              <span class="badge bg-info ms-1">
                                <input type="file" id="browsfile" multiple class="d-none"
                                  (change)="GetDocumentFile($event)" />
                                <i class="fa fa-cloud-upload" aria-hidden="true" (click)="uploadResume()"></i>
                              </span>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- <div class="border">
                  <div class="tb-scroll">
                    <table class="table table-striped table-hover">
                      <thead>
                        <tr>
                          <th width="1%">
                            <div class="col-title">
                              #
                            </div>
                          </th>
                          <th width="20%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Name" placeholder="Search by Name">
                            <div class="col-title">
                              Name
                            </div>
                          </th>
                          <th width="8%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Phone_Number"
                              placeholder="Mobile No">
                            <div class="col-title">
                              Mobile
                            </div>
                          </th>
                          <th width="15%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Email_ID"
                              placeholder="Search by Email Id">
                            <div class="col-title">
                              Email
                            </div>
                          </th>
                          <th width="9%">
                            <input class="form-control table-filter-control">
                            <div class="col-title">
                              Speciality
                            </div>
                          </th>
                          <th width="10%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Job_Title"
                              placeholder="By Job Title">
                            <div class="col-title">
                              Title
                            </div>
                          </th>
                          <th width="9%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Preferred_Locations"
                              placeholder="By Location">
                            <div class="col-title">
                              Location
                            </div>
                          </th>
                          <th width="7%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Total_Experience"
                              placeholder="By Exp">
                            <div class="col-title">
                              Exp (mo)
                            </div>
                          </th>
                          <th width="8%">
                            <input class="form-control table-filter-control" (keyup.enter)="filterRecords()"
                              (keydown.esc)="resetFilter()" [(ngModel)]="resumeFile.Notice_Period"
                              placeholder="Notice Period">
                            <div class="col-title">
                              Notice Period
                            </div>
                          </th>
                          <th width="8%">
                            <button (click)="filterRecords()" class="btn btn-primary srch-btn"><i
                                class="fa fa-search pr-2"></i>
                              Search
                            </button>
                            <div class="col-title">
                              Action
                            </div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngFor="let item of ProfessionalUserDetail">
                          <tr>
                            <td>{{item.UserId}}</td>
                            <td><a (click)="EditCurrent(user)">{{item.Name}}</a>
                              <div class="float-end">
                                <a href=""><span (click)="EditCurrent(user)" class="badge bg-primary">
                                    <i class="fa fa-pencil-square-o"></i>
                                  </span></a>
                              </div>
                            </td>
                            <td>{{item.Phone_Number}}</td>
                            <td>{{item.Email_ID}}</td>
                            <td>SKILLS
                              <div class="float-end ms-1">
                                <a href="">
                                  <span class="badge bg-primary"><i (click)="EditCurrent(item.UserId)"
                                      class="fa fa-code"></i>&nbsp;
                                    5</span>
                                </a>
                              </div>
                            </td>
                            <td>{{item.Job_Title}}</td>
                            <td>NA</td>
                            <td>{{item.Total_Experience}}</td>
                            <td>{{item.Notice_Period}}</td>
                            <td>
                              <div class="d-flex flex-row justify-content-around">
                                <a href="">
                                  <span class="badge bg-danger">
                                    <i class="fa fa-trash" aria-hidden="true" (click)="DeleteCurrent(item.UserId)"></i>
                                  </span>
                                </a>
                                <a href="javascript:void(0)" (click)="AddEditDocuments(item)">
                                  <span class="badge bg-dark">
                                    <i class="fa fa-folder" aria-hidden="true"></i>
                                  </span>
                                </a>
                                <a href="">
                                  <span class="badge bg-info ms-1">
                                    <input type="file" id="browsfile" multiple class="d-none"
                                      (change)="GetDocumentFile($event)" />
                                    <i class="fa fa-cloud-upload" aria-hidden="true" (click)="uploadResume()"></i>
                                  </span>
                                </a>
                              </div>
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div> -->
                <div class="mt-3">
                  <app-pagination [pagination]="candidatesData" (onPageChange)="GetFilterResult($event)">
                  </app-pagination>
                </div>
              </ng-container>
            </div>
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog modal-fullscreen p-4">
        <div class="modal-content rounded-3">

          <!-- Modal Header -->
          <div class="modal-header border-bottom-0" *ngIf="expandedTable">
            <h4 class="modal-title">Upoad ExcelFile</h4>
            <button type="button" class="btn-close" (click)="closeModal()" data-bs-dismiss="modal"></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body row overflow-hidden" *ngIf="expandedTable">
            <div class="col-md-4 x_content fade show" id="upload-container">
              <div class="">
                <input type="file" id="uploadexcel" (change)="readExcelData($event)" class="d-none" *ngIf="isUploadFile"
                  accept=".xlx, .xlsx" />
                <div class="page-card">
                  <div class="card">
                    <div class="col-md-12 p-0">
                      <div class="table-responsive">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                          <div role="tabpanel" class="active in mt-4 ps-4 pe-4" id="tab_content1"
                            aria-labelledby="home-tab">
                            <div id="classmasterdata" class="col-md-12">
                              <div name="ifilezone" class="ifilezone mb-4" (click)="fireBrowserFile()">
                                <div *ngIf="!isFileReady">
                                  <span style="color: darkgray;margin-top: 9rem;display: block;">
                                    Drop files here.
                                  </span>
                                </div>
                                <div class="col-md-12 solid-bg justify-content-center" *ngIf="isFileReady"
                                  name="uploading">
                                  <img src="assets/img/ExcelFile.png" />
                                  <div class="filetitle">
                                    File:
                                    <div name="filename" style="display: inline-block !important;">
                                      {{ fileName }}
                                    </div>
                                  </div>
                                  <div>
                                    File size: &nbsp;
                                    <div name="filesize" style="display: inline-block !important;">
                                      {{ fileSize }}
                                    </div>
                                    KB
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12 mt-3 solid-bg pt-2 ps-3 pb-3 rounded">
                <div class="filetitle text-center">Upload File Details</div>
                <div *ngIf="isFileReady">
                  <div class="fw-bold">
                    File:
                    <div name="filename" style="display: inline-block !important;">
                      {{ fileName }}
                    </div>
                  </div>
                  <div>
                    <div>
                      File size: &nbsp;
                      <div name="filesize" style="display: inline-block !important;">
                        {{ fileSize }}
                      </div>
                      KB
                    </div>
                    <div>
                      No. of record(s): &nbsp;
                      <div name="noofrecords" style="display: inline-block !important;">
                        <!-- {{ noOfRecords }} -->
                        {{tableConfiguration.data.length}}
                      </div>
                    </div>
                    <div>
                      File type: &nbsp;
                      <div name="uploadingdatetime" style="display: inline-block !important;">
                        {{ file.type }}
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="!isFileReady">
                  <div class="fw-bold">
                    File: NA
                  </div>
                  <div>
                    <div>
                      File size: &nbsp; NA
                    </div>
                    <div>
                      No. of record(s): &nbsp; NA
                    </div>
                    <div>
                      File type: &nbsp; NA
                    </div>
                  </div>
                </div>
                <div class="mt-4">
                  <button type="button" class="btn btn-primary me-2" (click)="uploadExcelSheet($event)"
                    [disabled]="isDiasble">
                    <i class="fa fa-upload pe-2" aria-hidden="true"></i>Upload selected excel data
                  </button>
                  <button type="button" class="btn btn-outline-info" (click)="cleanFileHandler()"
                    [disabled]="isDiasble">
                    <i class="fa fa-eraser pe-2"></i> Cancel
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-8 pb-4">
              <div class="x_content">
                <div class="x_header_title">
                  <div>
                    <h5 class="d-inline">Uploaded Records</h5>
                    <p *ngIf="!isAvailable" class="sample-note float-end"><i class="fa fa-dot-circle-o me-2"></i> Upload
                      correct format of excel sheet. <a href="javascript:void(0)">Click to download the sample.</a></p>
                    <span *ngIf="isAvailable" class="d-inline">
                      <ul class="d-inline-block">
                        <li class="ms-2 mt-1">On top of every header one dropdown will be there for column mapping.</li>
                      </ul>
                      <a class="float-end" href="javascript:void(0)" (click)="expandTable()">
                        <i class="fa fa-expand"></i>
                      </a>
                    </span>
                  </div>

                  <div class="mt-4 border card p-5 uplod-message-container" *ngIf="!isAvailable">
                    <label for="" class="fw-bold">
                      Your uploaded file's converted tabal will be dispaly in this section.
                    </label>
                    <ul class="ms-5 mt-1">
                      <li class="mt-1">Table and excel header will be same.</li>
                      <li class="mt-1">On top of every header one dropdown will be there for column mapping.</li>
                      <li class="mt-1">Select dropdown to map your value with the application level header.</li>
                    </ul>
                  </div>
                </div>
                <div *ngIf="isAvailable">
                  <div class="uploada-data-scroll">
                    <table class="table table-striped table-bordered table-hover">
                      <thead>
                        <tr>
                          <th class="col-min-width" *ngFor="let header of tableConfiguration.header">
                            <select class="form-select header-btn" aria-label="Default select example">
                              <option selected>Select Header</option>
                              <option *ngFor="let item of columns" value="item.DbName">{{item.Title}}</option>
                            </select>
                            <div class="mt-2">{{header.ColumnName}}</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngFor="let data of tableConfiguration.data">
                          <tr>
                            <ng-container *ngFor="let header of tableConfiguration.header">
                              <td>
                                <div class="wrap-content">
                                  {{data[header.ColumnName]}}
                                </div>
                              </td>
                            </ng-container>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                  <div class="mt-3">
                    <app-pagination [pagination]="uploadedCandidatesData"
                      (onPageChange)="changeUploadedRecords($event)"></app-pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class="modal-body" *ngIf="!expandedTable">
            <div class="col-md-12 p-0">
              <div class="x_content">
                <div class="x_header_title">
                  <div>
                    <h5 class="d-inline">Uploaded Records</h5>
                    <span>
                      <ul class="d-inline-block">
                        <li class="ms-2 mt-1">On top of every header one dropdown will be there for column mapping.</li>
                      </ul>
                    </span>
                    <button type="button" class="btn-close float-end" (click)="closeExpandModel()"></button>
                  </div>
                </div>
                <div *ngIf="isAvailable" class="expand-modal-scroll">
                  <table class="table table-striped table-bordered table-hover">
                    <thead>
                      <tr>
                        <th class="col-min-width" *ngFor="let header of tableConfiguration.header">
                          <select class="form-select header-btn" aria-label="Default select example">
                            <option selected>Select Header</option>
                            <option *ngFor="let item of columns" value="item.DbName">{{item.Title}}</option>
                          </select>
                          <div class="mt-2">{{header.ColumnName}}</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container *ngFor="let data of tableConfiguration.data">
                        <tr>
                          <ng-container *ngFor="let header of tableConfiguration.header">
                            <td>{{data[header.ColumnName]}}</td>
                          </ng-container>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
                <div class="mt-3">
                  <app-pagination [pagination]="paginationData" (onPageChange)="displayActivePage($event)">
                  </app-pagination>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
