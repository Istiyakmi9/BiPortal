<div class="main-container">
  <div class="x_panel">
    <div class="x_header">
      <div class="x_header_title">
        <h2>Email Template <small>Add or update template</small></h2>
        <button class="btn btn-primary-c float-end"><i class="fa fa-plus pe-2"></i> Add Template</button>
      </div>
    </div>
    <div>
      <app-breadcrums></app-breadcrums>
    </div>
    <div class="x_content">
      <form [formGroup]="emailTemplateForm" *ngIf="!isPageLoading">
        <div class="row">
          <div class="mt-3 col-md-4">
            <label for="" class="form-label">Template Name</label>
            <input type="text" formControlName="TemplateName" class="form-control" placeholder="e.g Billing Template" [ngClass]="{'error-field': submitted && f.TemplateName.errors !== null && f.TemplateName.errors.required}">
          </div>
          <div class="mt-3 col-md-4">
            <label for="" class="form-label">Subject</label>
            <input type="text" formControlName="SubjectLine" class="form-control" placeholder="e.g Bill detail" [ngClass]="{'error-field': submitted && f.SubjectLine.errors !== null && f.SubjectLine.errors.required}">
          </div>
          <div class="mt-3 col-md-4">
            <label for="" class="form-label">Title</label>
            <input type="text" formControlName="EmailTitle" class="form-control" placeholder="e.g Title" [ngClass]="{'error-field': submitted && f.EmailTitle.errors !== null && f.EmailTitle.errors.required}">
          </div>
        </div>
        <div class="mt-3">
          <small>Note: Enter the description of this template for (optional)</small>
          <textarea type="text" class="form-control" placeholder="Description" formControlName="Description"></textarea>
        </div>
        <div class="col-md-12">
          <div class="my-3 col-md-12">
            <label for="" class="form-label">Salutation</label>
            <input type="text" formControlName="Salutation" class="form-control" placeholder="e.g Dear Sir/ Madam" [ngClass]="{'error-field': submitted && f.Salutation.errors !== null && f.Salutation.errors.required}">
          </div>
          <app-editor [content]="emailTemplateDetail.BodyContent"></app-editor>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="mt-3 col-md-8">
              <input type="text" formControlName="EmailNote" class="form-control border-0 border-bottom" placeholder="Note: Will be appended with body content (Optional)">
            </div>
            <div class="mt-3 col-md-8">
              <input type="text" formControlName="EmailClosingStatement" class="form-control border-0 border-bottom" [ngClass]="{'custom-error-field': submitted && f.EmailClosingStatement.errors !== null && f.EmailClosingStatement.errors.required}" placeholder="Thanks & Regards or Define custom">
            </div>
            <div class="mt-3 col-md-8">
              <input type="text" formControlName="SignatureDetail" class="form-control border-0 border-bottom" [ngClass]="{'custom-error-field': submitted && f.SignatureDetail.errors !== null && f.SignatureDetail.errors.required}" placeholder="Name or Signature">
            </div>
            <div class="mt-3 col-md-8">
              <input type="text" formControlName="ContactNo" OnlyNumber="10" onkeypress="return event.charCode >= 48 && event.charCode <= 57" class="form-control border-0 border-bottom" placeholder="+91-000000000 (Optional)">
            </div>
          </div>
          <div class="mt-3 col-md-6">
            <div class="col-auto col-md-6">
              <select class="form-select" (change)="loadImageLocally($event)" formControlName="FileId">
                <option value="" disabled>Select image</option>
                <option [attr.value]="img.FileId" *ngFor="let img of companyFiles">{{img.FileName}}</option>
              </select>
            </div>
            <div class="mt-3 col-md-6 ">
              <img [attr.src]="logoUrl" class="small-img-preview" alt="">
            </div>
          </div>
        </div>
        <div class="text-end mt-3 col-md-12">
          <button class="btn btn-outline-danger"><i class="fa fa-trash pe-2"></i> Reset</button>
          <button class="btn btn-primary-c ms-3" [disabled]="isLoading" (click)="saveEmailTemplate()">
            <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-file-o': !isLoading}"></i>
            {{ isLoading ? 'Wait' : 'Save' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
