<div class="col-md-12 col-sm-12 main-container">
  <div class="x_panel">
    <div class="x_header">
      <h2>Email service</h2>
      <div class="clearfix"></div>
    </div>
    <div>
      <ul class="list-group">
        <li class="list-group-item py-3"><a href="javascript:void(0)" class="text-decoration-none text-dark">An item</a></li>
        <li class="list-group-item py-3"><a href="javascript:void(0)" class="text-decoration-none text-dark">A second item</a></li>
        <li class="list-group-item py-3"><a href="javascript:void(0)" class="text-decoration-none text-dark">A third item</a></li>
        <li class="list-group-item py-3"><a href="javascript:void(0)" class="text-decoration-none text-dark">A fourth item</a></li>
        <li class="list-group-item py-3"><a href="javascript:void(0)" class="text-decoration-none text-dark">And a fifth one</a></li>
      </ul>
      <div class="compose-container float-end shadow-lg mt-4 me-3 rounded-circle d-flex align-items-center justify-content-center" (click)="composeMailPopUp()">
        <a href="javascript:void(0)" class="text-decoration-none text-dark"><i class="fa fa-pencil fa-lg text-white"></i></a>
      </div>
    </div>
  </div>
</div>

<!-- Compose Mail Modal -->
<div class="modal fade" id="composeMailModal" tabindex="-1" aria-labelledby="composeMailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title" id="composeMailModalLabel">New Message</h5>
        <div>
          <a href="javascript:void(0)" class="text-decoration-none" (click)="minimizeMailBox()">
            <i class="fa fa-minus px-2 text-dark"></i>
          </a>
          <a href="javascript:void(0)" class="text-decoration-none" (click)="maximizeMailbox()">
            <i class="fa fa-window-maximize px-2 text-dark"></i>
          </a>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
      </div>
      <div class="modal-body">
        <form [formGroup]="emailForm">
          <div class="email-address-box border-bottom d-flex align-items-center" [ngClass]="{'error-field': isSubmitted && f.To.errors != null && f.To.errors.required}">
            <label for="to-email-address" class="form-label fs-5 m-0 pe-1 d-none">To</label>
            <div class="d-flex flex-row flex-wrap w-100 align-items-center">
              <span class="badge bg-primary fs-6 m-2" *ngFor="let item of toEmail; let i = index">{{item}} <a href="javascript:void(0)" class="text-decoration-none"><i class="fa fa-close text-danger" (click)="removeToEmail(i, 'to-emails')"></i></a></span>
              <input type="text" class="col border-0 ms-2 fs-5" placeholder="Receipents" formControlName="To" (click)="emailAddress()" (keyup.Space)="addEmailChip($event, 'to-emails')">
              <div class="col-auto float-end d-none" data-name="Cc-Bcc-address">
                <a href="javascript:void(0)" class="text-decoration-none text-muted fs-5" (click)="otherAddress($event, 'Cc-address')">Cc</a>
                <a href="javascript:void(0)" class="text-decoration-none text-muted ps-2 fs-5" (click)="otherAddress($event, 'Bcc-address')">Bcc</a>
              </div>
            </div>
          </div>
          <div class="email-address-box my-4 border-bottom d-flex align-items-center d-none" data-name="Cc-address">
            <label for="Cc-email-address" class="form-label fs-5 m-0 pe-1">Cc</label>
            <div class="d-flex flex-row flex-wrap w-100 align-items-center">
              <span class="badge bg-primary fs-6 m-2" *ngFor="let item of ccEmail; let i = index">{{item}} <a href="javascript:void(0)" class="text-decoration-none"><i class="fa fa-close text-danger" (click)="removeToEmail(i, 'cc-emails')"></i></a></span>
              <input type="text" class="col border-0 ms-2 fs-5" formControlName="CC" (click)="emailAddress()" (keyup.Space)="addEmailChip($event, 'cc-emails')">
              <div class="col-auto float-end" data-name="Add-Bcc-btn">
                <a href="javascript:void(0)" class="text-decoration-none text-muted ps-2 fs-5" (click)="otherAddress($event, 'Bcc-address')">Bcc</a>
              </div>
            </div>
          </div>
          <div class="email-address-box my-4 border-bottom d-flex align-items-center d-none" data-name="Bcc-address">
            <label for="Bcc-email-address" class="form-label fs-5 m-0 pe-1">Bcc</label>
            <div class="d-flex flex-row flex-wrap w-100 align-items-center">
              <span class="badge bg-primary fs-6 m-2" *ngFor="let item of bccEmail; let i = index">{{item}} <a href="javascript:void(0)" class="text-decoration-none"><i class="fa fa-close text-danger" (click)="removeToEmail(i, 'bcc-emails')"></i></a></span>
              <input type="text" class="col border-0 ms-2 fs-5" formControlName="BCC"  (click)="emailAddress()" (keyup.Space)="addEmailChip($event, 'bcc-emails')">
              <div class="col-auto float-end" data-name="Add-Cc-btn">
                <a href="javascript:void(0)" class="text-decoration-none text-muted fs-5" (click)="otherAddress($event, 'Cc-address')">Cc</a>
              </div>
            </div>
          </div>
          <div class="email-address-box"  [ngClass]="{'error-field': isSubmitted && f.Subject.errors != null && f.Subject.errors.required}">
            <input type="text" class="form-control border-0 border-bottom py-3 fs-5" formControlName="Subject" placeholder="Subject">
          </div>
          <div class="message-box">
            <div contenteditable="true" id="emailbody" class="form-control border-0 py-3 fs-5 small-message-box" (keydown.control.b)="getSelectedText($event)"></div>
          </div>
        </form>
      </div>
      <div class="modal-footer border-top-0 justify-content-start">
        <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
        <input type="file" id="fileAttachment" class="d-none" (change)="uploadProfilePicture($event)">
        <button type="button" class="btn btn-outline-primary" [disabled]="isLoading" (click)="sendEmailRequest()"><i class="fa " [ngClass]="{'fa-send-o': !isLoading, 'fa-spin fa-spinner': isLoading}"></i><span class="ps-2">{{ isLoading ? 'Wait' : 'Send' }}</span></button>
        <a href="javascript:void(0)" class="text-decoration-none ps-2" (click)="fireBrowserFile()"><i class="fa fa-paperclip pe-2"></i>Attach</a>
        <a href="javascript:void(0)" class="text-decoration-none ps-2"><i class="fa fa-html5 pe-2"></i>Template</a>
      </div>
    </div>
  </div>
</div>
