<div class="col-md-12 col-sm-12 main-container">
  <div class="col-md-12 bg-light mb-3">
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link text-dark" id="attendance-tab" (click)="activateMe('attendance-tab')" aria-current="page"
          href="javascript:void(0)">ATTENDENCE</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" id="timesheet-tab" (click)="activateMe('timesheet-tab')"
          href="javascript:void(0)">TIMESHEET</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark nav-active" id="leave-tab" (click)="activateMe('leave-tab')"
          href="javascript:void(0)">LEAVE</a>
      </li>
    </ul>
  </div>

  <div class="x_panel">
    <div class="x_header">
      <h2>Pending Leave requests</h2>
      <div class="clearfix"></div>
    </div>
    <div class="px-1">
      <app-breadcrums></app-breadcrums>
    </div>
    <div class="x_content">
      <div class="row pt-3">
        <div class="col-md-8">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex align-items-center pt-3 ps-3 pb-3">
                <div>
                  <i class="fa fa-tasks fa-5x" aria-hidden="true"></i>
                </div>
                <div class="ps-4 pt-2">
                  <h5>Nothing here.</h5>
                  <p>Working hard yeah? Request time off on the right - ></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="pb-1">
                <button class="btn btn-primary-c ms-2" type="button" (click)="leavePopUp()">Apply Leave</button>
              </div>
              <p class="ps-2 mb-2 mt-2">
                <a href="javascript:void(0)" class="text-decoration-none">Request Credit for Compensatory Off</a>
              </p>
              <p class="ps-2 mb-2 mt-2">
                <a href="javascript:void(0)" class="text-decoration-none">Leave Policy Explaination</a>
              </p>
            </div>
          </div>
        </div>
      </div>
      <h5 class="mt-3 pt-3 pb-3">My Leave Status</h5>
      <div class="row">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Last Week
                </h6>
                <div>
                  <i class="fa fa-info-circle fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="weeklyPatternChart" width="300" height="115"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Consumed Leave Types
                </h6>
                <div>
                  <i class="fa fa-info-circle fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block pb-3 pt-2">
                <canvas id="consumeLeaveChart" width="100" height="100"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Monthly Status
                </h6>
                <div>
                  <i class="fa fa-info-circle fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="MonthlyStatusChart" width="300" height="115"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h5 class="mt-3 pt-3 pb-3">Leave Balances</h5>
      <div class="row">
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2">
                  Casual Leave
                </h6>
                <div>
                  <i class="fa fa-refresh fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="casualLeaveChart" width="200" height="200"></canvas>
              </div>
              <div class="row mt-3 border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">AVAILABLE</h6>
                  <p>2</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">CONSUMED</h6>
                  <p>0</p>
                </div>
              </div>
              <div class="row border-top">
                <div class="col-md-4 border-end pt-3">
                  <h6 class="custom-text-size">ACCRUED SO FAR</h6>
                  <p>1.5</p>
                </div>
                <div class="col-md-4 border-end pt-3">
                  <h6 class="custom-text-size">CARRYOVER</h6>
                  <p>0.5</p>
                </div>
                <div class="col-md-4 pt-3">
                  <h6 class="custom-text-size">ANNUAL QUOTA</h6>
                  <p>6</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Unpaid Leave
                </h6>
                <div>
                  <i class="fa fa-refresh fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="compLeaveChart" width="200" height="200"></canvas>
              </div>
              <div class="row mt-3 border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">AVAILABLE</h6>
                  <p>0</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">CONSUMED</h6>
                  <p>0</p>
                </div>
              </div>
              <div class="row border-top pt-3">
                <h6 class="custom-text-size">ANNUAL QUOTA</h6>
                <p>0</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Earned Leave
                </h6>
                <div>
                  <i class="fa fa-refresh fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="earnLeaveChart" width="200" height="200"></canvas>
              </div>
              <div class="row mt-3 border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">AVAILABLE</h6>
                  <p>1</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">CONSUMED</h6>
                  <p>1</p>
                </div>
              </div>
              <div class="row border-top">
                <div class="col-md-4 border-end pt-3">
                  <h6 class="custom-text-size">ACCRUED SO FAR</h6>
                  <p>1.5</p>
                </div>
                <div class="col-md-4 border-end pt-3">
                  <h6 class="custom-text-size">CARRYOVER</h6>
                  <p>0.5</p>
                </div>
                <div class="col-md-4 pt-3">
                  <h6 class="custom-text-size">ANNUAL QUOTA</h6>
                  <p>6</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2">
                  Sick Leave
                </h6>
                <div>
                  <i class="fa fa-refresh fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="sickLeaveChart" width="200" height="200"></canvas>
              </div>
              <div class="row mt-3 border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">AVAILABLE</h6>
                  <p>0.5</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">CONSUMED</h6>
                  <p>1</p>
                </div>
              </div>
              <div class="row border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">ACCRUED SO FAR</h6>
                  <p>1.5</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">ANNUAL QUOTA</h6>
                  <p>6</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body pb-0">
              <div class="d-flex justify-content-between">
                <h6 class="pt-2 ps-2">
                  Unpaid Leave
                </h6>
                <div>
                  <i class="fa fa-refresh fa-lg p-3" aria-hidden="true"></i>
                </div>
              </div>
              <div class="d-block mt-2">
                <canvas id="unpaidLeaveChart" width="200" height="200"></canvas>
              </div>
              <div class="row mt-3 border-top">
                <div class="col-md-6 border-end pt-3">
                  <h6 class="custom-text-size">AVAILABLE</h6>
                  <p>118</p>
                </div>
                <div class="col-md-6 pt-3">
                  <h6 class="custom-text-size">CONSUMED</h6>
                  <p>2</p>
                </div>
              </div>
              <div class="row border-top pt-3">
                <h6 class="custom-text-size">ANNUAL QUOTA</h6>
                <p>120</p>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Apply Leave Modal Start-->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="commentModal" tabindex="-1"
aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <form [formGroup]="leaveForm">
      <div class="modal-content px-4 py-3" *ngIf="isPageReady">
        <div class="modal-header border-bottom-0">
          <h5 class="modal-title" id="exampleModalLabel">Leave Request</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="col-md-12 px-4 d-block">
          <p class="mt-2">Enter your leave reson and apply with one click.
            Select your manage or reporting person under Notify section to get approval.</p>
        </div>
        <div class="modal-body px-4">
          <div class="d-flex position-relative">
            <div class="col-md-8 d-flex">
              <div class="col-md-6 ps-2 py-3 border">
                <small>START DATE</small>
                <p class="mb-0 text-dark fs-5">{{leaveDetail.LeaveFromDay | date}}</p>
              </div>
              <div class="col-md-6 pe-3 py-3 border text-end">
                <small>END DATE</small>
                <div class="mb-0 text-dark fs-5">
                  <p class="mb-0" (click)="d.toggle()">{{leaveDetail.LeaveToDay | date}}</p>
                  <form class="row row-cols-sm-auto">
                    <div class="col-12">
                      <div class="input-group">
                        <input class="form-control d-none" placeholder="yyyy-mm-dd" (dateSelect)="onDateSelect($event)"
                              name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker">
                        <button class="btn btn-outline-secondary calendar d-none" (click)="d.toggle()" type="button"></button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <span class="px-3 py-2 day-wfh text-dark">{{leaveDays}}day leave</span>
          <div class="row align-items-end">
            <div class="col-md-6">
              <p class="mb-0 text-dark ps-2 pt-3 fs-5">Session</p>
              <div class="btn-group mt-2 mb-4" role="group" aria-label="Basic radio toggle button group">
                <input type="radio" class="btn-check" name="Session" id="btnradio10" autocomplete="off" checked formControlName="Session" [ngClass]="{'error-field':submitted && f['Session'].errors != null && f['Session'].errors['required']}"
                  value="fullday">
                <label class="btn btn-outline-primary" for="btnradio10">Full Day</label>
                <input type="radio" class="btn-check" name="Session" id="btnradio11" autocomplete="off" formControlName="Session" [ngClass]="{'error-field':submitted && f['Session'].errors != null && f['Session'].errors['required']}"
                  value="halfday">
                <label class="btn btn-outline-primary" for="btnradio11">Half Day</label>
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Leave Type</label>
              <select class="form-select mb-3" aria-label=".form-select-lg example" formControlName="LeaveType" [ngClass]="{'error-field':submitted && f['LeaveType'].errors != null && f['LeaveType'].errors['required']}">
                <option value=null>Select leave type</option>
                <option value="1">Casual Leave</option>
                <option value="2">Paid Leave</option>
                <option value="3">Sick Leave</option>
              </select>
            </div>
          </div>
          <p class="mb-0 text-dark ps-2 fs-5">Reason</p>
          <textarea class="comment-text-area form-control" placeholder="Enter your comment" name="Reason" formControlName="Reason" [ngClass]="{'error-field':submitted && f['Reason'].errors != null && f['Reason'].errors['required']}"></textarea>
          <div class="col-md-6">
            <p class="mb-0 text-dark ps-2 fs-5 py-2">Reporting Manager</p>
            <app-iautocomplete [data]="managerList" formControlName="AssignTo" [ngClass]="{'error-field':submitted && f['AssignTo'].errors != null && f['AssignTo'].errors['required']}"
              name="AssignTo">
            </app-iautocomplete>
          </div>
          <p class="mb-0 py-2">These employees will be notified through email when you leave request is approved.</p>
        </div>
        <div class="modal-footer border-top-0 pe-4">
          <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary-c" [disabled]="isLoading" (click)="submitLeave()">
            <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-user-circle-o': !isLoading}"></i>
            {{ isLoading ? 'Wait' : 'Request' }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
<!-- End -->
