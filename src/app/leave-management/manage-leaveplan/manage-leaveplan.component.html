<div class="col-md-12 col-sm-12 main-container">
  <div class="col-md-12 bg-light mb-3">
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link text-dark" id="attendance-tab" (click)="activateMe('attendance-tab')" aria-current="page"
          href="javascript:void(0)">ATTENDENCE</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" id="timesheet-tab" (click)="activateMe('timesheet-tab')"
          href="javascript:void(0)">TIMESHEET</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark nav-active" id="leave-tab" (click)="activateMe('leave-tab')"
          href="javascript:void(0)">LEAVE</a>
      </li>
    </ul>
  </div>

  <div class="x_panel pb-0 mb-0">
    <div class="x_header">
      <h2>LEAVE TYPE: {{leaveTypeDeatils.PlanName | uppercase}}</h2>
      <div class="clearfix"></div>
    </div>
    <div class="px-1">
      <app-breadcrums></app-breadcrums>
    </div>
    <ng-container *ngIf="!isPageReady">
      <ng-container *ngIf="isDataLoaded">
        <div class="x_content pb-0">
          <div class="row mt-3">
            <div class="col-md-3 panel-h">
              <div class="x_panel px-3 pt-3 pb-1">
                <ul class="d-flex justify-content-center flex-column list-unstyled config-tab"
                  id="leaveConfigModal">
                  <li class="py-3 px-3 active-index" name="tab-index" [attr.index]="1">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(1)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>LEAVE QUOTA</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="2">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(2)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>LEAVE FROM MANAGMENT</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="3">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(3)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>LEAVE ACCRUAL</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="4">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(4)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>APPLYING FOR LEAVE</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="5">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(5)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>LEAVE RESTRICTIONS</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="6">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(6)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>HOLIDAYS AND WEEKOFFS</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="7">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(7)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>LEAVE APPROVAL</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" name="tab-index" [attr.index]="8">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(8)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>YEAR END PROCESSING</span>
                      </div>
                    </a>
                  </li>
                  <li class="py-3 px-3" *ngIf="isConfigCompleted" name="tab-index" [attr.index]="9" [ngClass]="{'active-index': configPageNo == 9}">
                    <a href="javascript:void(0)" (click)="ConfigPageTab(9)" class="text-decoration-none text-muted">
                      <div class="d-flex align-items-center">
                        <span>Confirmation Detail</span>
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-9 panel-h">
              <div class="x_panel px-4">
                <ng-container *ngIf="configPageNo == 1">
                  <form [formGroup]="leaveDetailForm">
                    <div class="mt-3">
                      <h6 class="fw-bold text-dark">What is the annual quota of Casual days for an employee? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="The maximum number of leave days an employee is allocated within a calender year."></i>
                      </h6>
                      <div class="form-check align-items-center d-flex">
                        <input class="form-check-input" value="true" type="radio" name="IsLeaveDaysLimit"
                          formControlName="IsLeaveDaysLimit" (click)="quotaLimit($event)">
                        <div class="d-flex align-items-center">
                          <label class="form-check-label ps-2">Limit to</label>
                          <div class="col-md-2 mx-3">
                            <input type="text" class="form-control form-control-sm" name="LeaveLimit" OnlyNumber="3"
                              [readonly]="leaveDetailForm.controls.IsLeaveDaysLimit.value == 'false'"
                              formControlName="LeaveLimit">
                          </div>
                          <span>days per year</span>
                        </div>
                      </div>
                      <div class="form-check mt-2">
                        <input class="form-check-input" value="false" type="radio" name="IsLeaveDaysLimit"
                          formControlName="IsLeaveDaysLimit" (click)="quotaLimit($event)">
                        <label class="form-check-label">
                          Unlimited <i class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                            data-bs-placement="right" title="Tooltip on top"></i>
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can an employee apply for leave beyond the Annual Quota?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="CanApplyExtraLeave"
                          formControlName="CanApplyExtraLeave" (click)="beyondAnnualQuota($event)">
                        <label class="form-check-label">
                          No, Employee cannot exceed annual quota.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" name="CanApplyExtraLeave"
                          formControlName="CanApplyExtraLeave" (click)="beyondAnnualQuota($event)">
                        <div class="d-flex align-items-center">
                          <label class="form-check-label ps-2">Yes, An employee can apply for leave beyond annual quota
                            not
                            exceeding</label>
                          <div class="col-md-1 mx-3">
                            <input type="text" [readonly]="leaveDetailForm.controls.ExtraLeaveLimit.value <=0"
                              class="form-control form-control-sm" name="ExtraLeaveLimit" OnlyNumber="3"
                              formControlName="ExtraLeaveLimit">
                          </div>
                          <span>days per year</span>
                        </div>
                      </div>
                    </div>
                    <div class="form-check my-2 d-flex align-items-center">
                      <input class="form-check-input" type="checkbox" (click)="noLeaveDetailAllow($event)"
                        formControlName="IsNoLeaveAfterDate">
                      <div class="d-flex align-items-center">
                        <label class=" ps-2 form-check-label fw-bold text-dark">No leave quota is allocated in the
                          joining
                          month if the employee joins after</label>
                        <div class="col-md-1 mx-3">
                          <input type="text" name="LeaveNotAllocatedIfJoinAfter"
                            class="form-control form-control-sm d-flex align-items-center"
                            formControlName="LeaveNotAllocatedIfJoinAfter"
                            [readonly]="leaveDetailForm.controls.LeaveNotAllocatedIfJoinAfter.value <=0" OnlyNumber="2">
                        </div>
                        <span class="fw-bold text-dark">th of the month. <i
                            class="fw-normal fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                            data-bs-placement="right"
                            title="In case this option is not selected the entire quota for the month will be allocated to employees, irrespective of their date of joining"></i></span>
                      </div>
                    </div>
                    <div class="text-end my-3">
                      <button class="btn btn-primary-c" (click)="submitLeaveQuota()">
                        <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                        <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                      </button>
                    </div>
                  </form>
                </ng-container>

                <ng-container *ngIf="configPageNo == 2">
                  <form [formGroup]="managementLeave">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can reporting manager award Casual credits to his reportees?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="CanManagerAwardCausalLeave"
                          formControlName="CanManagerAwardCausalLeave">
                        <label class="form-check-label">
                          No, Reporting manager cannot award leave credits.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="CanManagerAwardCausalLeave"
                          formControlName="CanManagerAwardCausalLeave">
                        <label class="form-check-label">
                          Yes, Reporting manager cannot award leave credits.
                        </label>
                      </div>
                    </div>
                    <div class="text-end my-3">
                      <button class="btn btn-primary-c" (click)="submitManagementLeave()">
                        <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                        <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                      </button>
                    </div>
                  </form>
                </ng-container>

                <ng-container *ngIf="configPageNo == 3">
                  <form [formGroup]="leaveAccrualForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">
                        How is available leave balance of an employee calculated?
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" value="true" name="CanApplyEntireLeave"
                          formControlName="CanApplyEntireLeave" (click)="toggleCurrent(1, $event)">
                        <label class="form-check-label">
                          Entire annual quota can be availed anytime during the year.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" value="true" name="IsLeaveAccruedPatternAvail"
                          formControlName="IsLeaveAccruedPatternAvail" (click)="toggleCurrent(1, $event)">
                        <label class="form-check-label">
                          Leave are accrued (earned) at regular intervals (Define accrual pattern below).
                        </label>
                      </div>
                      <ng-container>
                        <div id="LeaveBalanceCalculated" [ngClass]="{'d-none': leaveAccrualForm.controls.IsLeaveAccruedPatternAvail.value == 'false'}">
                          <div class="my-4" name="LeaveBalanceCalculated">
                            <h6 class="fw-bold text-dark">Leave accrual of Annual quota happens at the following rate</h6>
                            <div class="d-flex align-items-center">
                              <div class="col-md-1 me-3">
                                <select class="form-select" formControlName="LeaveDistributionSequence" (change)="changeAccrualRate($event)">
                                  <option value="1">Monthly</option>
                                  <option value="2">Quarterly</option>
                                  <option value="3">Half Yearly</option>
                                </select>
                              </div>
                              <label name="AccrualRateBasedon" class="form-label d-flex">
                                <div class="ps-1 pe-1">
                                  <div>Accrual (or earned) </div>
                                </div>
                              </label>
                              <div class="col-md-1 me-3">
                                <input type="number" class="form-control" step="0.1" name="LeaveDistributionAppliedFrom" OnlyNumber="2"
                                  formControlName="LeaveDistributionAppliedFrom" (keyup)="findDay($event)">
                              </div>
                              <label name="AccrualRateBasedon" class="form-label d-flex">
                                <ng-container *ngIf="leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 1 || leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 21 || leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 31; then t1"></ng-container>
                                <ng-container *ngIf="leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 2 || leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 22; then t2"></ng-container>
                                <ng-container *ngIf="leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 3 || leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value == 23; then t3"></ng-container>
                                <ng-container *ngIf="(leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value >= 4 && leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value <= 20) || (leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value >= 24 && leaveAccrualForm.controls.LeaveDistributionAppliedFrom.value <= 30); then t4"></ng-container>
                                <ng-template #t1>st</ng-template>
                                <ng-template #t2>nd</ng-template>
                                <ng-template #t3>rd</ng-template>
                                <ng-template #t4>th</ng-template>

                                <div class="ps-1" [ngSwitch]="leaveAccrualForm.controls.LeaveDistributionSequence.value">
                                  <div *ngSwitchCase="1"> days on every month</div>
                                  <div *ngSwitchCase="2"> days on every Quarter</div>
                                  <div *ngSwitchDefault> days Half Year</div>
                                </div>
                              </label>
                            </div>
                          </div>

                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="true" name="IsLeaveAccruedProrateDefined"
                              formControlName="IsLeaveAccruedProrateDefined" (click)="toggleCurrent(2, $event)">
                            <label class="form-check-label">
                              Define leave accrued (earned) rate else defined above quota will be calculated automatically (Only for monthly leave accrual).
                            </label>
                          </div>
                          <div
                            [ngClass]="{'d-none': leaveAccrualForm.controls.IsLeaveAccruedProrateDefined.value == false}">
                            <ng-container formArrayName="LeaveDistributionRateOnStartOfPeriod">
                              <div class="my-4" [formGroupName]="i"
                                *ngFor="let item of formLeaveProrate.controls; let i = index">
                                <div class="card bg-light p-3">
                                  <div class="row align-items-center">
                                    <div class="col-md-10">
                                      <h6 class="fw-bold text-dark">Define how leave will get credited to employee's bucket
                                        <span *ngIf="monthlyLeave > 0">[monthly limit: {{monthlyLeave}}]</span>
                                      </h6>
                                      <div class="d-flex align-items-center">
                                        <label class="form-label me-3">If from date is</label>
                                        <div class="col-md-1">
                                          <input type="text" class="form-control" OnlyNumber="2" formControlName="FromDate" name="FromDate" (blur)="accrualRateDateValidation($event, i)">
                                        </div>
                                        <span class="px-2">to</span>
                                        <div class="col-md-1 mx-3">
                                          <input type="text" class="form-control" OnlyNumber="2" formControlName="ToDate" name="ToDate" (keyup)="accrualRateDateValidation($event, i)">
                                        </div>
                                        <label class="form-label">then </label>
                                        <div class="col-md-1 mx-3">
                                          <input type="text" class="form-control" (keyup)="accrualRateValidation($event)"
                                            onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.key <= '.'" OnlyNumber="3"
                                            formControlName="AllocatedLeave">
                                        </div>
                                        <label class="form-label">days(s) will be accrualed or earned.</label>
                                      </div>
                                    </div>
                                    <div class="col-md-2" >
                                      <a href="javascript:void(0)" class="text-decoration-none text-secondary" data-name="add-remove-setion"
                                        (click)="addFormLeaveProrate()">
                                        <i class="fa fa-plus-circle fa-lg"></i>
                                      </a>
                                      <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                        (click)="removeFormLeaveProrate(i)">
                                        <i class="fa fa-minus-circle fa-lg ms-2"></i>
                                      </a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="alert alert-danger" role="alert" *ngIf="allocateleave != 0">
                                Your monthly accrual limit i.e {{allocateleave | number: "1.2-2"}} is less than actual monthly accrual rate. Actual monthly accrual rate is {{monthlyLeave}};
                              </div>
                            </ng-container>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">What happens to the leave quota when an employee joins company in
                        the
                        middle of the leave calendar month?</h6>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" value="true" name="IsLeavesProratedForJoinigMonth"
                          formControlName="IsLeavesProratedForJoinigMonth" (click)="empJoinMiddle(false)">
                        <label class="form-check-label">
                          Leave accrual are prorate based on joining date (recommended). <i
                            class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                            data-bs-placement="right"
                            title="If an employee is joining in between a leave calender year, the leave will be prorated and allocated accordingly. Example: If annual quoata is 12 and employee is joining on 16th June, the prorated leave allocation will be 6.5 for the remaining year. If the employee joins on 1st July, he will get 6 leave."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" value="false" name="IsLeavesProratedForJoinigMonth"
                          formControlName="IsLeavesProratedForJoinigMonth" (click)="empJoinMiddle(true)">
                        <label class="form-check-label">
                          Leaves are credited (in joining month) based on date of month, on which employee has joined
                          the
                          company.
                        </label>
                      </div>

                      <div [ngClass]="{'d-none': leaveAccrualForm.controls.IsLeavesProratedForJoinigMonth.value == 'true'}" id="EmpJoinMiddle">
                        <ng-container formArrayName="JoiningMonthLeaveDistribution">
                          <div class="my-4" [formGroupName]="i"
                            *ngFor="let item of formBetweenJoiningDate.controls; let i = index">
                            <div class="card bg-light p-3">
                              <div class="row align-items-center">
                                <div class="col-md-10">
                                  <h6 class="fw-bold text-dark">Define the leave credit below of an employee's joining date
                                  </h6>
                                  <div class="d-flex align-items-center">
                                    <label class="form-label me-3">If date of joining between</label>
                                    <div class="col-md-1">
                                      <input type="text" class="form-control" OnlyNumber="2" formControlName="FromDate" name="FromDate" (blur)="empJoinMiddleDateValidation($event)">
                                    </div>
                                    <span class="px-2">to</span>
                                    <div class="col-md-1 mx-3">
                                      <input type="text" class="form-control" OnlyNumber="2" formControlName="ToDate" name="ToDate" (blur)="empJoinMiddleDateValidation($event)">
                                    </div>
                                    <label class="form-label">of the month allocate</label>
                                    <div class="col-md-1 mx-3">
                                      <input type="text" class="form-control"
                                            OnlyNumber="3"
                                            formControlName="AllocatedLeave">
                                    </div>
                                    <label class="form-label">days(s) of leave.</label>
                                  </div>
                                </div>
                                <div class="col-md-2">
                                  <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                    (click)="addFormBetweenJoiningDate()">
                                    <i class="fa fa-plus-circle fa-lg"></i>
                                  </a>
                                  <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                    (click)="removeFormBetweenJoiningDate(i)">
                                    <i class="fa fa-minus-circle fa-lg ms-2"></i>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">What happens to the leave quota when an employee exits company in
                        the
                        middle of the leave calendar month?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsLeavesProratedOnNotice"
                          formControlName="IsLeavesProratedOnNotice" (click)="toggleCurrent(3, $event)">
                        <label class="form-check-label">
                          Leave are prorated based on actual exit date of employee (recommended). <i
                            class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                            data-bs-placement="right"
                            title="If an employee is existing in between a leave calender year, the leave will be prorated will be prorated and allocated accordingly. Example: If annual quota is 12 and employee is existing on 15th June, the prorated leave allocation will be 5.5 for that year. If the employee exits on 1st July, he will get 6 leaves."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsNotAllowProratedOnNotice"
                          formControlName="IsNotAllowProratedOnNotice" (click)="toggleCurrent(3, $event)">
                        <label class="form-check-label">
                          Leaves are updated based on date of month, on which employee is exiting the company..
                        </label>
                      </div>
                      <div [ngClass]="{'d-none': leaveAccrualForm.controls.IsNotAllowProratedOnNotice.value == 'false'}" id="EmpExitMiddle">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="" formControlName="">
                          <label class="form-check-label">This rule is applied from this days
                            <i class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip" data-bs-placement="right" title="If an employee is existing in between a leave calender year, the leave will be prorated will be prorated and allocated accordingly. Example: If annual quota is 12 and employee is existing on 15th June, the prorated leave allocation will be 5.5 for that year. If the employee exits on 1st July, he will get 6 leaves."></i></label>
                        </div>
                        <ng-container formArrayName="ExitMonthLeaveDistribution">
                          <div class="my-4" [formGroupName]="i"
                            *ngFor="let item of leaveAccrualForm.get('ExitMonthLeaveDistribution').controls; let i = index">
                            <div class="card bg-light p-3">
                              <div class="row align-items-center">
                                <div class="col-md-10">
                                  <h6 class="fw-bold text-dark">Define the leave credit below (for the exit month) based
                                    on
                                    employee's exit date</h6>
                                  <div class="d-flex align-items-center">
                                    <label class="form-label me-3">If date of joining between</label>
                                    <div class="col-md-1">
                                      <input type="text" class="form-control" OnlyNumber="2" formControlName="FromDate" (blur)="empLeaveMiddleDateValidation($event)">
                                    </div>
                                    <span class="px-2">to</span>
                                    <div class="col-md-1 mx-3">
                                      <input type="text" class="form-control" OnlyNumber="2" formControlName="ToDate" (blur)="empLeaveMiddleDateValidation($event)">
                                    </div>
                                    <label for="" class="form-label">of the month allocate</label>
                                    <div class="col-md-1 mx-3">
                                      <input type="text" class="form-control"
                                            onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.key <= '.'" OnlyNumber="3"
                                            formControlName="AllocatedLeave">
                                    </div>
                                    <label for="" class="form-label">days(s) of leave.</label>
                                  </div>
                                </div>
                                <div class="col-md-2">
                                  <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                    (click)="addFormBetweenExitDate()">
                                    <i class="fa fa-plus-circle fa-lg"></i>
                                  </a>
                                  <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                    (click)="removeFormBetweenExitDate(i)">
                                    <i class="fa fa-minus-circle fa-lg ms-2"></i>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsNoLeaveOnNoticePeriod"
                          formControlName="IsNoLeaveOnNoticePeriod" (click)="toggleCurrent(3, $event)">
                        <label class="form-check-label">
                          Do not accure leave when an employee has resigned and is under notice period.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Does Leave accrual vary based on probation period or experience? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="Most organizations choose No to this option and have a flat accrual rate. You can however choose to give different treatment based on probation of experience. You can allocate more leave quota for your experienced employees by giving higher accrual amount. THe accrual rate here overides the annual quota given in previous step."></i>
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="IsVaryOnProbationOrExprience"
                          formControlName="IsVaryOnProbationOrExprience" (click)="AccrualLevelVary($event)">
                        <label class="form-check-label">
                          No. Accrual is same for all employees regardless of Experience.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsVaryOnProbationOrExprience"
                          formControlName="IsVaryOnProbationOrExprience" (click)="AccrualLevelVary($event)">
                        <label class="form-check-label">
                          Yes. Accrual varies based on experience of employee from Date of Joining/Probation.
                        </label>
                      </div>
                    </div>
                    <div class="my-4"
                      [ngClass]="{'d-none': leaveAccrualForm.controls.IsVaryOnProbationOrExprience.value == 'false'}"
                      name="AccrualLevelVary">
                      <h6 class="fw-bold text-dark">From when does the accrual start? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="Most organizations choose No to this option and have a flat accrual rate. You can however choose to give different treatment based on probation of experience. You can allocate more leave quota for your experienced employees by giving higher accrual amount. THe accrual rate here overides the annual quota given in previous step."></i>
                      </h6>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" name="IsAccrualStartsAfterJoining"
                          formControlName="IsAccrualStartsAfterJoining" (click)="toggleCurrent(5, $event)">
                        <div class="d-flex align-items-center mx-2">
                          <div class="col-md-2 me-2">
                            <input type="text" class="form-control form-control-sm"
                              [readonly]="leaveAccrualForm.controls.AccrualDaysAfterJoining.value <=0"
                              name="AccrualDaysAfterJoining" formControlName="AccrualDaysAfterJoining" OnlyNumber="3">
                          </div>
                          <label class="form-check-label">
                            days after joining.
                          </label>
                        </div>
                      </div>
                      <div class="form-check d-flex align-items-center mt-2">
                        <input class="form-check-input" value="true" type="radio"
                          name="IsAccrualStartsAfterProbationEnds" formControlName="IsAccrualStartsAfterProbationEnds"
                          (click)="toggleCurrent(5, $event)">
                        <div class="d-flex align-items-center mx-2">
                          <div class="col-md-2 me-2">
                            <input type="text" class="form-control form-control-sm" name="AccrualDaysAfterProbationEnds"
                              formControlName="AccrualDaysAfterProbationEnds" OnlyNumber="3"
                              [readonly]="leaveAccrualForm.controls.AccrualDaysAfterProbationEnds.value <= 0">
                          </div>
                          <label class="form-check-label">
                            days after Probation ends.
                          </label>
                        </div>
                      </div>
                      <ng-container formArrayName="AccrualProrateDetail">
                        <div class="my-4" [formGroupName]="i"
                          *ngFor="let item of leaveAccrualForm.get('AccrualProrateDetail').controls; let i = index">
                          <div class="card bg-light p-3">
                            <div class="row align-items-center">
                              <div class="col-md-10">
                                <h6 class="fw-bold text-dark">Define the accrual rates below based on employee
                                  experience
                                </h6>
                                <div class="d-flex align-items-center">
                                  <div class="form-group">
                                    <select class="form-control" formControlName="PeriodType">
                                      <option selected value="After Probation">After Probation</option>
                                      <option value="After Joining">After Joining</option>
                                    </select>
                                  </div>
                                  <div class="col-md-1">
                                    <input type="text" class="form-control" OnlyNumber="2"
                                      formControlName="YearsAfterJoining">
                                  </div>
                                  <span class="px-2">Year from joining</span>
                                  <span class="ps-5">Accrue</span>
                                  <div class="col-md-1 mx-3">
                                    <input type="text" class="form-control" OnlyNumber="2"
                                      formControlName="DaysMonthly">
                                  </div>
                                  <label for="" class="form-label">days Monthly</label>
                                  <div class="col-md-1 mx-3">
                                    <input type="text" class="form-control" OnlyNumber="2" formControlName="DaysYearly">
                                  </div>
                                  <label for="" class="form-label">days/year</label>
                                </div>
                              </div>
                              <div class="col-md-2">
                                <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                  (click)="addAccruralRateOnExp()">
                                  <i class="fa fa-plus-circle fa-lg"></i>
                                </a>
                                <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                  (click)="removeAccruralRateOnExp(i)">
                                  <i class="fa fa-minus-circle fa-lg ms-2"></i>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Is leave accrual impacted by employee's attendance/number of days
                        worked
                        every month? <i class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="Most organizations choose No to this option and have a flat accrual rate. You can however choose to give different treatment based on probation of experience. You can allocate more leave quota for your experienced employees by giving higher accrual amount. THe accrual rate here overides the annual quota given in previous step."></i>
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsImpactedOnWorkDaysEveryMonth"
                          formControlName="IsImpactedOnWorkDaysEveryMonth">
                        <label class="form-check-label">
                          No. Accrual has nothing to with employees's attendance/number of days worked.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="IsImpactedOnWorkDaysEveryMonth"
                          formControlName="IsImpactedOnWorkDaysEveryMonth">
                        <label class="form-check-label">
                          Yes. Leave are prorate on actual attendance/number of days worked by employees.
                        </label>
                      </div>
                      <div class="my-4" [ngClass]="{'d-none': leaveAccrualForm.controls.IsImpactedOnWorkDaysEveryMonth.value == 'true'}">
                        <h6 class="fw-bold text-dark">For the purpose of accrual based on attendance of employee, how do
                          you
                          consider Weekly-Off & Holidays:</h6>
                        <div class="d-flex align-items-center">
                          <label for="" class="form-label">Do not consider weekly-off as absent, for the purpose of
                            attendance, if employee is present at least</label>
                          <div class="col-md-1 mx-2">
                            <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                              formControlName="WeekOffAsAbsentIfAttendaceLessThen">
                          </div>
                          <label for="" class="form-label">days in a Month.</label>
                        </div>
                        <div class="d-flex align-items-center mt-2">
                          <label for="" class="form-label">Do not consider holiday as absent, for the purpose of
                            attendance,
                            if employee is present at least</label>
                          <div class="col-md-1 mx-2">
                            <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                              formControlName="HolidayAsAbsentIfAttendaceLessThen">
                          </div>
                          <label for="" class="form-label">days in a Month.</label>
                        </div>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can employees apply leave for a future date based on leave accrual
                        balance projected as of that date?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="CanApplyForFutureDate"
                          formControlName="CanApplyForFutureDate">
                        <label class="form-check-label">
                          Yes, Employee can avail the leave balance as of the day for which leave being applied.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="CanApplyForFutureDate"
                          formControlName="CanApplyForFutureDate">
                        <label class="form-check-label">
                          No, Employee is limited to apply for leave balance accrued on the day of leave application and
                          not
                          on future day for which leave is applied.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can employees apply leave beyond their accrued balance?</h6>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio"
                          name="IsExtraLeaveBeyondAccruedBalance" formControlName="IsExtraLeaveBeyondAccruedBalance"
                          (click)="toggleCurrent(8, $event)">
                        <div class="d-flex align-items-center ps-2">
                          <label class="form-check-label">
                            Yes, Employee can go beyond their accrued balance but no more than
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="leaveAccrualForm.controls.NoOfDaysForExtraLeave.value <= 0"
                              name="NoOfDaysForExtraLeave" formControlName="NoOfDaysForExtraLeave">
                          </div>
                          <label for="" class="form-label">
                            days and not exceeding their annual quota.
                          </label>
                        </div>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio"
                          name="IsNoExtraLeaveBeyondAccruedBalance" formControlName="IsNoExtraLeaveBeyondAccruedBalance"
                          (click)="toggleCurrent(8, $event)">
                        <label class="form-check-label">
                          No, Employee is limited to their accrued balance and cannot take leave beyond the accrued
                          balance.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="checkbox" name="IsAccrueIfHavingLeaveBalance"
                          formControlName="IsAccrueIfHavingLeaveBalance" (click)="toggleCurrent(8, $event)">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Do not accrue leave when the total leave balance (including carry forward and other manual
                            credits)
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="leaveAccrualForm.controls.AllowOnlyIfAccrueBalanceIsAlleast.value <= 0"
                              name="AllowOnlyIfAccrueBalanceIsAlleast"
                              formControlName="AllowOnlyIfAccrueBalanceIsAlleast">
                          </div>
                          <label for="" class="form-label">
                            days.
                          </label>
                        </div>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="checkbox" name="IsAccrueIfOnOtherLeave"
                          formControlName="IsAccrueIfOnOtherLeave" (click)="toggleCurrent(8, $event)">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Do not accrue leave if an employee is on any leave for more than
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              name="NotAllowIfAlreadyOnLeaveMoreThan"
                              [readonly]="leaveAccrualForm.controls.NotAllowIfAlreadyOnLeaveMoreThan.value <= 0"
                              formControlName="NotAllowIfAlreadyOnLeaveMoreThan">
                          </div>
                          <label for="" class="form-label">
                            days in previous Month. (irrespective of leave calender year)
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="mt-4">
                      <h6 class="fw-bold text-dark">When applying for a leave, if leave balance is in decimals, do you
                        want
                        to round-off the balance for thr purpose of leave application? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="Rounding off the leave balance will not have effect on annual quota, if a leave balance of 0.5 is rounded to 1, employee is granted a negative balance of -0.4 which is adjust in his immediate accrual period."></i>
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="RoundOffLeaveBalance"
                          (click)="toggleCurrent(9, $event)" formControlName="RoundOffLeaveBalance">
                        <label class="form-check-label">
                          No. Do not round-off decimals. Employee will not be able to consume leave if does not have
                          sufficient leave balance.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ToNearestHalfDay"
                          (click)="toggleCurrent(9, $event)" formControlName="ToNearestHalfDay">
                        <label class="form-check-label">
                          Round-off to nearest half day. <i class="fa fa-exclamation-circle text-secondary ps-2"
                            data-bs-toggle="tooltip" data-bs-placement="right"
                            title="A balance of 0.2 will be rounded to 1. A balance of 0.3 will be rounded to 0.5. A balance of 0.7 will be rounded to 0.5 and a balance of 0.8 will be rounded to 1 day."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ToNearestFullDay"
                          (click)="toggleCurrent(9, $event)" formControlName="ToNearestFullDay">
                        <label class="form-check-label">
                          Round-off to nearest full day. <i class="fa fa-exclamation-circle text-secondary ps-2"
                            data-bs-toggle="tooltip" data-bs-placement="right"
                            title="A balance less than 0.5 will be rounded to 0 and a balance of 0.5 or more will be rounded to 1."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ToNextAvailableHalfDay"
                          (click)="toggleCurrent(9, $event)" formControlName="ToNextAvailableHalfDay">
                        <label class="form-check-label">
                          Round-off to next available half day. <i class="fa fa-exclamation-circle text-secondary ps-2"
                            data-bs-toggle="tooltip" data-bs-placement="right"
                            title="Balance of 0.1 to 0.5 will be rounded to 0.6 or more will be rounded to 1 day."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ToNextAvailableFullDay"
                          (click)="toggleCurrent(9, $event)" formControlName="ToNextAvailableFullDay">
                        <label class="form-check-label">
                          Round-off to next available full day. <i class="fa fa-exclamation-circle text-secondary ps-2"
                            data-bs-toggle="tooltip" data-bs-placement="right"
                            title="A balance of 0.1 or more will be rounded to 1."></i>
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ToPreviousHalfDay"
                          (click)="toggleCurrent(9, $event)" formControlName="ToPreviousHalfDay">
                        <label class="form-check-label">
                          Round-off to previous available half day. <i
                            class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                            data-bs-placement="right"
                            title="Balance of 2.1 tp 2.4 will be rounded to 2. Balance 2.6 to 2.9 will be rounded to 2.5. Balance of 2.5 remain 2.5."></i>
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Does the leave credit (including accrual, compensatory off and other
                        manual credits) expire after some time?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="DoesLeaveExpireAfterSomeTime"
                          (click)="toggleCurrent(10, $event)" formControlName="DoesLeaveExpireAfterSomeTime">
                        <label class="form-check-label">
                          No. Leave do not expire.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" (click)="toggleCurrent(10, $event)"
                          name="DoesLeaveExpireAfterSomeTime" formControlName="DoesLeaveExpireAfterSomeTime">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, Leave will expire after
                          </label>
                          <div class="col-md-2 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              name="AfterHowManyDays" [readonly]="leaveAccrualForm.controls.AfterHowManyDays.value <= 0"
                              formControlName="AfterHowManyDays">
                          </div>
                          <label for="" class="form-label">
                            days from date of accrual or credit.
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="text-end">
                      <button class="btn btn-primary-c" (click)="submitLeaveAccrual()">
                        <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                        <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                      </button>
                    </div>
                  </form>
                </ng-container>

                <ng-container *ngIf="configPageNo == 4">
                  <form [formGroup]="applyForLeaveForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Allow applying for half-day? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="If you choose Yes, leave request can be for half days. Either first half or second half of an employee shift."></i>
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsAllowForHalfDay"
                          formControlName="IsAllowForHalfDay">
                        <label class="form-check-label">
                          Yes
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="IsAllowForHalfDay"
                          formControlName="IsAllowForHalfDay">
                        <label class="form-check-label">
                          No
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Allow an employee to see and apply for this leave?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio"
                          name="EmployeeCanSeeAndApplyCurrentPlanLeave"
                          formControlName="EmployeeCanSeeAndApplyCurrentPlanLeave">
                        <label class="form-check-label">
                          Yes, Employee can see and be able to apply for leave.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio"
                          name="EmployeeCanSeeAndApplyCurrentPlanLeave"
                          formControlName="EmployeeCanSeeAndApplyCurrentPlanLeave">
                        <label class="form-check-label">
                          No, Employee cannot apply by themselves. HR Manager or a Reporting manager can apply on their
                          behalf.
                        </label>
                      </div>
                    </div>
                    <div class="mt-4"
                      [ngClass]="{'d-none': applyForLeaveForm.controls.EmployeeCanSeeAndApplyCurrentPlanLeave.value == 'true'}">
                      <ng-container formArrayName="RuleForLeaveInNotice">
                        <h6 class="fw-bold text-dark">How many days prior notice is required to apply for this leave?
                        </h6>
                        <div class="card bg-light p-3" [formGroupName]="i"
                          *ngFor="let item of applyForLeaveForm.get('RuleForLeaveInNotice').controls; let i = index">
                          <div class="row align-items-center">
                            <div class="col-md-10">
                              <h6 class="fw-bold text-dark">Define the leave credit below (for the exit month) based on
                                employee's
                                exit date</h6>
                              <div class="d-flex align-items-center">
                                <label class="form-label me-3">If the duration is more and includes</label>
                                <div class="col-md-1">
                                  <input type="text" class="form-control" OnlyNumber="2"
                                    formControlName="RemaningCalendarDayInNotice">
                                </div>
                                <label class="px-2 form-label">Calendar days</label>
                                <label for="" class="form-label ps-3">Need</label>
                                <div class="col-md-1 mx-3">
                                  <input type="text" class="form-control" OnlyNumber="2"
                                    formControlName="RequiredCalendarDaysForLeaveApply">
                                </div>
                                <label for="" class="form-label">Calendar days Notice</label>
                                <label for="" class="form-label ps-3">and contain at least</label>
                                <div class="col-md-1 mx-3">
                                  <input type="text" class="form-control" OnlyNumber="2"
                                    formControlName="RemaningWorkingDaysInNotice">
                                </div>
                                <label for="" class="form-label ps-3">working days</label>
                              </div>
                            </div>
                            <div class="col-md-2">
                              <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                (click)="addRuleForLeaveInNotice()">
                                <i class="fa fa-plus-circle fa-lg"></i>
                              </a>
                              <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                (click)="removeRuleForLeaveInNotice(i)">
                                <i class="fa fa-minus-circle fa-lg ms-2"></i>
                              </a>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <div class="mt-4">
                      <h6 class="fw-bold text-dark">How early can an employee apply for this leave?</h6>
                      <div class="d-flex align-items-center">
                        <label class="form-check-label">
                          Leave request must be made no sooner than
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="ApplyPriorBeforeLeaveDate">
                        </div>
                        <label for="" class="form-label">
                          calendar days prior to the leave date.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Check restrictions that are applicable for back dated leave
                        application
                        by
                        employes?</h6>
                      <div class="d-flex align-items-center">
                        <label class="form-check-label">
                          Employee can apply leave for past days, but no beyond than
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="BackDateLeaveApplyNotBeyondDays">
                        </div>
                        <label for="" class="form-label">
                          calendar days back.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Does this leave require a comment?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="CurrentLeaveRequiredComments"
                          formControlName="CurrentLeaveRequiredComments">
                        <label class="form-check-label">
                          Yes, Require a comment.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="CurrentLeaveRequiredComments"
                          formControlName="CurrentLeaveRequiredComments">
                        <label class="form-check-label">
                          No, This leave does not require any comments although the employee is shown a comment box
                          field.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Do you require a document proof or attachment for extended days of
                        this
                        leave?
                      </h6>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" name="ProofRequiredIfDaysExceeds"
                          formControlName="ProofRequiredIfDaysExceeds">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, Require an attachment if the leave exceeds
                          </label>
                          <div class="col-md-2 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="applyForLeaveForm.controls.ProofRequiredIfDaysExceeds.value == 'false'"
                              formControlName="NoOfDaysExceeded">
                          </div>
                          <label for="" class="form-label">
                            calendar days.
                          </label>
                        </div>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="ProofRequiredIfDaysExceeds"
                          formControlName="ProofRequiredIfDaysExceeds">
                        <label class="form-check-label">
                          No, This leave does not require any attachment of document proofs.
                        </label>
                      </div>
                    </div>
                  </form>
                  <div class="text-end">
                    <button class="btn btn-primary-c" (click)="submitApplyForLeave()">
                      <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                      <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                    </button>
                  </div>
                </ng-container>

                <ng-container *ngIf="configPageNo == 5">
                  <form [formGroup]="leaveRestrictionForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">A new joinee employee can apply for leave?</h6>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" name="CanApplyAfterProbation"
                          (click)="toogleLeaveRestrictions(1, $event)" formControlName="CanApplyAfterProbation">
                        <div class="d-flex align-items-center ms-2">
                          <div class="col-md-2 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="leaveRestrictionForm.controls.CanApplyAfterProbation.value == 'false'"
                              formControlName="DaysAfterProbation">
                          </div>
                          <label for="" class="form-label">
                            days after Probation ends.
                          </label>
                        </div>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio" name="CanApplyAfterJoining"
                          (click)="toogleLeaveRestrictions(1, $event)" formControlName="CanApplyAfterJoining">
                        <div class="d-flex align-items-center ms-2">
                          <div class="col-md-2 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="leaveRestrictionForm.controls.CanApplyAfterJoining.value == 'false'"
                              formControlName="DaysAfterJoining">
                          </div>
                          <label for="" class="form-label pe-3">
                            days after joining.
                          </label>
                        </div>
                      </div>
                      <div class="my-4">
                        <div class="form-check d-flex align-items-center">
                          <input class="form-check-input" type="radio" value="true"
                            name="IsAvailRestrictedLeavesInProbation"
                            formControlName="IsAvailRestrictedLeavesInProbation">
                          <div class="d-flex align-items-center ms-2">
                            <label class="form-check-label">
                              Do not allow employees to avail/apply for more than
                            </label>
                            <div class="col-md-1 mx-2">
                              <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                                [readonly]="leaveRestrictionForm.controls.IsAvailRestrictedLeavesInProbation.value == 'false'"
                                formControlName="LeaveLimitInProbation">
                            </div>
                            <label for="" class="form-label">
                              days of leave during probation (irrespective of accrual/credit).
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can an employee on the maximum number of leave balance that can be
                        availed in
                        a month?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio"
                          name="IsLeaveInNoticeExtendsNoticePeriod"
                          formControlName="IsLeaveInNoticeExtendsNoticePeriod">
                        <label class="form-check-label">
                          No. Employee cann't avail all available leave balance in a month.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="radio" value="true"
                          name="IsLeaveInNoticeExtendsNoticePeriod"
                          formControlName="IsLeaveInNoticeExtendsNoticePeriod">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, Employee in notice period can consume available leave given that the notice period
                            extends
                            by
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="leaveRestrictionForm.controls.IsLeaveInNoticeExtendsNoticePeriod.value == 'false'"
                              formControlName="NoOfTimesNoticePeriodExtended">
                          </div>
                          <label for="" class="form-label">
                            times the actual leave days.
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Can Manager override leave restriction and apply leave? <i
                          class="fa fa-exclamation-circle text-secondary ps-2" data-bs-toggle="tooltip"
                          data-bs-placement="right"
                          title="Do you want manager (Reporting Manager / HR Manager) yto apply leave for an employee incase there is no leave balance or employee is unable to apply leave because of any other leave restriction."></i>
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio"
                          name="CanManageOverrideLeaveRestriction" formControlName="CanManageOverrideLeaveRestriction">
                        <label class="form-check-label">
                          No. Manager cannot apply by overriding restrictions.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio"
                          name="CanManageOverrideLeaveRestriction" formControlName="CanManageOverrideLeaveRestriction">
                        <label class="form-check-label">
                          Yes, Manager can apply by overriding restrictions
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Check all restrictions you'd like to apply on the number of leave
                        instance
                        (requests)?</h6>
                      <div class="d-flex align-items-center">
                        <label class="form-check-label">
                          Enforce a minimum gap of
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="GapBetweenTwoConsicutiveLeaveDates">
                        </div>
                        <label for="" class="form-label">
                          calendar days between two leave requests.
                        </label>
                      </div>
                      <div class="d-flex align-items-center mt-2">
                        <label class="form-check-label">
                          Do not allow more than
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="LimitOfMaximumLeavesInCalendarYear">
                        </div>
                        <label for="" class="form-label">
                          instance (leave request) in a leave calendar year.
                        </label>
                      </div>
                      <div class="d-flex align-items-center mt-2">
                        <label class="form-check-label">
                          Do not allow more than
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="LimitOfMaximumLeavesInCalendarMonth">
                        </div>
                        <label for="" class="form-label">
                          instance (leave request) in a calendar month.
                        </label>
                      </div>
                      <div class="d-flex align-items-center mt-2">
                        <label class="form-check-label">
                          Do not allow more than
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="LimitOfMaximumLeavesInEntireTenure">
                        </div>
                        <label for="" class="form-label">
                          instance (leave request) in a entire tenure.
                        </label>
                      </div>
                      <div class="d-flex align-items-center mt-2">
                        <label class="form-check-label">
                          Do not allow availing less than
                        </label>
                        <div class="col-md-1 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="MinLeaveToApplyDependsOnAvailable">
                        </div>
                        <label for="" class="form-label">
                          days to leave in a single instance when total available leave balance is greater than or equal
                          to
                        </label>
                        <div class="col-md-1 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="AvailableLeaves">
                        </div>
                      </div>
                      <div class="d-flex align-items-center mt-2">
                        <label class="form-check-label">
                          Restrict employees from applying leave from
                        </label>
                        <div class="col-md-2 mx-2">
                          <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                            formControlName="RestrictFromDayOfEveryMonth">
                        </div>
                        <label for="" class="form-label">
                          of every month.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Check all restrictions you'd like to apply to enforce in relation
                        with
                        other leave types?</h6>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="checkbox"
                          formControlName="IsCurrentPlanDepnedsOnOtherPlan">
                        <label class="form-check-label ps-2">
                          This leave cannot be taken along with
                        </label>
                        <div class="col-md-1 mx-2">
                          <select class="form-select form-select-sm" formControlName="AssociatedPlanTypeId"
                            [disabled]="leaveRestrictionForm.controls.IsCurrentPlanDepnedsOnOtherPlan.value == false">
                            <option value="0">Select</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-check d-flex align-items-center mt-2">
                        <input class="form-check-input" type="checkbox" formControlName="IsCheckOtherPlanTypeBalance">
                        <label class="form-check-label ps-2">
                          This leave is not available when there is balance in
                        </label>
                        <div class="col-md-1 mx-2">
                          <select class="form-select form-select-sm" formControlName="DependentPlanTypeId"
                            [disabled]="leaveRestrictionForm.controls.IsCheckOtherPlanTypeBalance.value == false">
                            <option value="0">Select</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div class="text-end">
                    <button class="btn btn-primary-c" (click)="submitLeaveRestriction()">
                      <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                      <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                    </button>
                  </div>
                </ng-container>

                <ng-container *ngIf="configPageNo == 6">
                  <form [formGroup]="holidayWeekendOffForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">If a holiday is adjoining a leave, is it considered a leave?</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio"
                          name="AdJoiningHolidayIsConsiderAsLeave" formControlName="AdJoiningHolidayIsConsiderAsLeave">
                        <label class="form-check-label">
                          No, Holidays have nothing to do with leave.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio"
                          name="AdJoiningHolidayIsConsiderAsLeave" formControlName="AdJoiningHolidayIsConsiderAsLeave">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, Holidays accompanying leave is treated as leave when total number of leave includes
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="holidayWeekendOffForm.controls.AdJoiningHolidayIsConsiderAsLeave.value == 'false'"
                              formControlName="ConsiderLeaveIfNumOfDays">
                          </div>
                          <div class="col-md-2 mx-2">
                            <select class="form-select form-select-sm">
                              <option value="">Calender Days</option>
                            </select>
                          </div>
                          <label for="" class="form-label">
                            and
                          </label>
                        </div>
                      </div>
                      <div class="my-4 ms-3"
                        [ngClass]="{'d-none': holidayWeekendOffForm.controls.AdJoiningHolidayIsConsiderAsLeave.value == 'false'}">
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfLeaveLieBetweenTwoHolidays"
                            (click)="toogleHolidayAndWeekOff(1, $event)" formControlName="IfLeaveLieBetweenTwoHolidays">
                          <label class="form-check-label">
                            If Holiday is right between two leave days (Holiday is sanwiched between leave days)
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfHolidayIsRightBeforLeave"
                            (click)="toogleHolidayAndWeekOff(1, $event)" formControlName="IfHolidayIsRightBeforLeave">
                          <label class="form-check-label">
                            If leave day is right before a holiday.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfHolidayIsRightAfterLeave"
                            (click)="toogleHolidayAndWeekOff(1, $event)" formControlName="IfHolidayIsRightAfterLeave">
                          <label class="form-check-label">
                            If leave day is right after a holiday.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfHolidayIsBetweenLeave"
                            (click)="toogleHolidayAndWeekOff(1, $event)" formControlName="IfHolidayIsBetweenLeave">
                          <label class="form-check-label">
                            If leave day is before or after or in-between a holiday.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio"
                            name="IfHolidayIsRightBeforeAfterOrInBetween" (click)="toogleHolidayAndWeekOff(1, $event)"
                            formControlName="IfHolidayIsRightBeforeAfterOrInBetween">
                          <label class="form-check-label">
                            If leave day is between holidays.
                          </label>
                        </div>
                        <div class="form-check d-flex align-items-center">
                          <input class="form-check-input" type="checkbox"
                            formControlName="AdjoiningHolidayRulesIsValidForHalfDay">
                          <label class="form-check-label ms-2">
                            Do not consider holidays accompanying Half day leave as leave (ignores the above rule if
                            leave
                            taken
                            is half day. This rule doesn't apply if leave is taken on half day week off).
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">If a week off day is adjoining a leave, is it considered a leave?
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio"
                          name="AdjoiningWeekOffIsConsiderAsLeave" formControlName="AdjoiningWeekOffIsConsiderAsLeave">
                        <label class="form-check-label">
                          No, Week Off days have nothing to do with leave.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" value="true" type="radio"
                          name="AdjoiningWeekOffIsConsiderAsLeave" formControlName="AdjoiningWeekOffIsConsiderAsLeave">
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, Week Off accompanying leave is treated as leave when total number of leave includes
                          </label>
                          <div class="col-md-1 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="holidayWeekendOffForm.controls.AdjoiningWeekOffIsConsiderAsLeave.value == 'false'"
                              formControlName="ConsiderLeaveIfIncludeDays">
                          </div>
                          <div class="col-md-2 mx-2">
                            <select class="form-select form-select-sm">
                              <option value="">Calender Days</option>
                            </select>
                          </div>
                          <label for="" class="form-label">
                            and
                          </label>
                        </div>
                      </div>
                      <div class="my-4 ms-3"
                        [ngClass]="{'d-none': holidayWeekendOffForm.controls.AdjoiningWeekOffIsConsiderAsLeave.value == 'false'}">
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfLeaveLieBetweenWeekOff"
                            (click)="toogleHolidayAndWeekOff(2, $event)" formControlName="IfLeaveLieBetweenWeekOff">
                          <label class="form-check-label">
                            If week off day is right between two leave days (Week off is sandwiched  between leave
                            days).
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfWeekOffIsRightBeforLeave"
                            (click)="toogleHolidayAndWeekOff(2, $event)" formControlName="IfWeekOffIsRightBeforLeave">
                          <label class="form-check-label">
                            If leave day is right before a Week off.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfWeekOffIsRightAfterLeave"
                            (click)="toogleHolidayAndWeekOff(2, $event)" formControlName="IfWeekOffIsRightAfterLeave">
                          <label class="form-check-label">
                            If leave day is right after a week off.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio" name="IfWeekOffIsBetweenLeave"
                            (click)="toogleHolidayAndWeekOff(2, $event)" formControlName="IfWeekOffIsBetweenLeave">
                          <label class="form-check-label">
                            If leave day is before or after or in-between a week off.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="true" type="radio"
                            name="IfWeekOffIsRightBeforeAfterOrInBetween" (click)="toogleHolidayAndWeekOff(2, $event)"
                            formControlName="IfWeekOffIsRightBeforeAfterOrInBetween">
                          <label class="form-check-label">
                            If leave day is between week off.
                          </label>
                        </div>
                        <div class="form-check d-flex align-items-center">
                          <input class="form-check-input" type="checkbox"
                            formControlName="AdjoiningWeekOffRulesIsValidForHalfDay">
                          <label class="form-check-label ms-2">
                            Do not consider week off accompanying Half day leave as leave (ignores the above rule if
                            leave
                            taken
                            is half day. This rule doesn't apply if leave is taken on half day week off).
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Do you want to club sandwich policy across leave types</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ClubSandwichPolicy"
                          formControlName="ClubSandwichPolicy">
                        <label class="form-check-label">
                          Yes, club sandwich policy across leave type.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="ClubSandwichPolicy"
                          formControlName="ClubSandwichPolicy">
                        <label class="form-check-label">
                          No, do not club sandwich policy across leave type.
                        </label>
                      </div>
                    </div>
                  </form>
                  <div class="text-end">
                    <button class="btn btn-primary-c" (click)="submitHolidayNWeekOffLeave()">
                      <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                      <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                    </button>
                  </div>
                </ng-container>

                <ng-container *ngIf="configPageNo == 7">
                  <form [formGroup]="leaveApprovalForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Does this leave request require an approval</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="IsLeaveRequiredApproval"
                          (click)="leaveRequestForApproval($event)" formControlName="IsLeaveRequiredApproval">
                        <label class="form-check-label">
                          No
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="IsLeaveRequiredApproval"
                          (click)="leaveRequestForApproval($event)" formControlName="IsLeaveRequiredApproval">
                        <label class="form-check-label">
                          Yes
                        </label>
                      </div>
                      <div class="card px-2 pt-2 mt-3 pb-3 "
                        [ngClass]="{'d-none': leaveApprovalForm.controls.IsLeaveRequiredApproval.value == 'false'}"
                        data-name="ApprovalChainContainer">
                        <h6>Approval Chain</h6>
                        <ng-container formArrayName="ApprovalChain">
                          <div class="px-5 pt-3 mt-3 bg-light" [formGroupName]="i"
                            *ngFor="let item of leaveApprovalForm.get('ApprovalChain').controls; let i = index">
                            <div class="d-flex">
                              <div class="col-auto me-3">
                                LEVEL {{i+1}} <i class=" fa fa-circle text-primary ps-3"></i>
                              </div>
                              <div class="col-md-8">
                                <select class="form-control" name="ApprovalRoleTypeId"
                                  formControlName="ApprovalRoleTypeId">
                                  <option value="1">Reporting Manager</option>
                                  <option value="2">Sr. HR Manager</option>
                                </select>
                                <div class="d-flex align-items-center mt-3"
                                  [ngClass]="{'d-none': leaveApprovalForm.controls['ApprovalChain'].controls[i].controls.IsSkipToNextLevel.value != true}"
                                  data-name="skip-section">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" formControlName="IsSkipToNextLevel"
                                      (click)="skipLeaveNextLevel($event, i)">
                                    <label class="form-check-label">
                                      Skip to next level after
                                    </label>
                                  </div>
                                  <div class="d-flex ms-2 align-items-center">
                                    <div class="col-md-3">
                                      <input type="text" class="form-control" name="SkipToNextLevelAfterDays"
                                        formControlName="SkipToNextLevelAfterDays"
                                        [readonly]="leaveApprovalForm.controls['ApprovalChain'].controls[i].controls.SkipToNextLevelAfterDays.value <= 0">
                                    </div>
                                    <span class="ps-2">days</span>
                                  </div>
                                </div>
                              </div>
                              <a href="javascript:void(0)" class="text-decoration-none text-secondary"
                                (click)="removeApprovalChain(i)">
                                <i class="fa fa-trash ps-3 text-secondary fa-lg"></i>
                              </a>
                            </div>
                            <a href="javascript:void(0)"
                              [ngClass]="{'d-none': leaveApprovalForm.controls['ApprovalChain'].controls[i].controls.IsSkipToNextLevel.value == true}"
                              data-name="createApprovalChain" class="text-decoration-none mt-4"
                              (click)="createApprovalChain(i)"><i class="fa fa-plus pe-2 py-3"></i>Add New Level</a>
                          </div>
                        </ng-container>
                      </div>
                      <div class="form-check mt-4">
                        <input class="form-check-input" type="checkbox" formControlName="IsRequiredAllLevelApproval">
                        <label class="form-check-label">
                          Auto-approve (and skip) approver level, in case approver is not yet registered with HiringBell
                          not yet assigned role (e.g. RM, Project Manager, Department Head/Business uunit Head etc.) on
                          has been relieved.
                        </label>
                      </div>
                      <div class="form-check mt-2">
                        <input class="form-check-input" type="checkbox"
                          formControlName="IsPauseForApprovalNotification">
                        <label class="form-check-label">
                          Pause sending of email notification (to approvers) for each request that uis being raised or
                          approved. Approvers will be able to view these requests as part of the daily email digest.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">Default approval action</h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio"
                          name="IsReportingManageIsDefaultForAction"
                          formControlName="IsReportingManageIsDefaultForAction">
                        <label class="form-check-label">
                          Doest reporting manage is default for approval.
                        </label>
                      </div>
                    </div>
                  </form>
                  <div class="text-end">
                    <button class="btn btn-primary-c" (click)="submitLeaveApproval()">
                      <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                      <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                    </button>
                  </div>
                </ng-container>

                <ng-container *ngIf="configPageNo == 8">
                  <form [formGroup]="yearEndProcessForm">
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">
                        What happens to the leave balances at the end of the year?
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio"
                          name="IsLeaveBalanceExpiredOnEndOfYear" (click)="toggleLeaveOnYearEnds(1, $event)"
                          formControlName="IsLeaveBalanceExpiredOnEndOfYear" />
                        <label class="form-check-label">
                          All leave balances expire or get reset.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="AllConvertedToPaid"
                          (click)="toggleLeaveOnYearEnds(1, $event)" formControlName="AllConvertedToPaid" />
                        <label class="form-check-label">
                          All leave balances get paid to the employee
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="AllLeavesCarryForwardToNextYear"
                          (click)="toggleLeaveOnYearEnds(1, $event)"
                          formControlName="AllLeavesCarryForwardToNextYear" />
                        <label class="form-check-label">
                          All leave balances get carried forward to the next year.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="PayFirstNCarryForwordRemaning"
                          (click)="toggleLeaveOnYearEnds(1, $event)" formControlName="PayFirstNCarryForwordRemaning" />
                        <label class="form-check-label">
                          Pay first and then carry forward remaining
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="CarryForwordFirstNPayRemaning"
                          (click)="toggleLeaveOnYearEnds(1, $event)" formControlName="CarryForwordFirstNPayRemaning" />
                        <label class="form-check-label">
                          Carry forward first anf then pay remaining
                        </label>
                      </div>
                      <div class="my-4"
                        [ngClass]="{'d-none': yearEndProcessForm.controls.PayFirstNCarryForwordRemaning.value == 'false' && yearEndProcessForm.controls.CarryForwordFirstNPayRemaning.value == 'false'}">
                        <h6 class="fw-bold text-dark"
                          [ngClass]="{'d-none': yearEndProcessForm.controls.PayFirstNCarryForwordRemaning.value == 'false'}">
                          Pay first and carry forward remaining?
                        </h6>
                        <h6 class="fw-bold text-dark"
                          [ngClass]="{'d-none': yearEndProcessForm.controls.CarryForwordFirstNPayRemaning.value == 'false'}">
                          Carry forward first and pay remaining?
                        </h6>
                        <div class="d-flex">
                          <label for="" class="form-label">Leave for payment and carryforward is defined
                            as</label>
                          <div class="col-md-1 ms-3">
                            <select class="form-select form-select-sm" formControlName="PayNCarryForwardDefineType">
                              <option value=null>Select</option>
                              <option value="fixed">Fixed number of days</option>
                              <option value="percentage">
                                Percentage of remaining leave
                              </option>
                            </select>
                          </div>
                        </div>
                        <!-- For percentage select start-->
                        <div class=""
                          [ngClass]="{'d-none': yearEndProcessForm.controls.PayNCarryForwardDefineType.value != 'percentage'}">
                          <ng-container formArrayName="PercentagePayNCarryForward">
                            <div class="d-flex align-items-center my-2"
                              *ngFor="let item of yearEndProcessForm.get('PercentagePayNCarryForward').controls; let i = index"
                              [formGroupName]="i">
                              <div class="card p-2">
                                <div class="d-flex align-items-center">
                                  <label class="form-label me-3">If the balance is more than</label>
                                  <div class="col-md-1">
                                    <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                      formControlName="PayNCarryForwardRuleInPercent" />
                                  </div>
                                </div>
                                <div class="d-flex align-items-center ms-3 my-3">
                                  <label class="form-label me-3">Pay</label>
                                  <div class="col-md-1">
                                    <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                      formControlName="PayPercent" />
                                  </div>
                                  <label class="px-2">% of remaining leave days and carryforward</label>
                                  <div class="col-md-1 mx-3">
                                    <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                      formControlName="CarryForwardPercent" />
                                  </div>
                                  <label for="" class="form-label">% of remaining leave days</label>
                                </div>
                                <div class="form-check d-flex align-items-center">
                                  <input class="form-check-input" type="checkbox"
                                    formControlName="IsMaximumPayableRequired" />
                                  <div class="d-flex align-items-center ps-2">
                                    <label class="form-check-label">
                                      Restrict maximum payable days to .
                                    </label>
                                    <div class="col-md-2 mx-3">
                                      <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                        [readonly]="yearEndProcessForm.controls['PercentagePayNCarryForward'].controls[i].controls.IsMaximumPayableRequired.value == false"
                                        formControlName="MaximumPayableDays" />
                                    </div>
                                  </div>
                                </div>
                                <div class="form-check d-flex align-items-center">
                                  <input class="form-check-input" type="checkbox"
                                    formControlName="IsMaximumCarryForwardRequired" />
                                  <div class="d-flex align-items-center ps-2">
                                    <label class="form-check-label">
                                      Restrict maximum carried forward days to days to .
                                    </label>
                                    <div class="col-md-2 mx-3">
                                      <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                        [readonly]="yearEndProcessForm.controls['PercentagePayNCarryForward'].controls[i].controls.IsMaximumCarryForwardRequired.value == false"
                                        formControlName="MaximumCarryForwardDays" />
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <i class="fa fa-plus px-3 fa-lg" (click)="createPercentagePayNCarryForward()"></i>
                              <i class="fa fa-trash fa-lg" (click)="removePercentagePayNCarryForward(i)"></i>
                            </div>
                          </ng-container>
                        </div>
                        <!-- percentage select end -->
                        <!-- Fixed number of days start -->
                        <div class=""
                          [ngClass]="{'d-none': yearEndProcessForm.controls.PayNCarryForwardDefineType.value != 'fixed'}">
                          <ng-container formArrayName="FixedPayNCarryForward">
                            <div class="p-2 bg-light d-flex align-items-center my-2" [formGroupName]="i"
                              *ngFor="let item of yearEndProcessForm.get('FixedPayNCarryForward').controls; let i = index">
                              <div class="d-flex align-items-center">
                                <label class="form-label me-3">If the balance is more than</label>
                                <div class="col-md-1">
                                  <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                    formControlName="PayNCarryForwardRuleInDays" />
                                </div>
                                <span class="px-2">days, pay upto</span>
                                <div class="col-md-1 mx-3">
                                  <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                    formControlName="PaybleForDays" />
                                </div>
                                <label for="" class="form-label">days and carry forward upto</label>
                                <div class="col-md-1 mx-3">
                                  <input type="text" class="form-control form-control-sm" OnlyNumber="2"
                                    formControlName="CarryForwardForDays" />
                                </div>
                                <label for="" class="form-label ps-3">remaining days</label>
                              </div>
                              <i class="fa fa-plus-circle fa-lg" (click)="createFixedPayNCarryForward()"></i>
                              <i class="fa fa-trash ps-2 fa-lg" (click)="removeFixedPayNCarryForward(i)"></i>
                            </div>
                          </ng-container>
                        </div>
                        <!-- Fixed Number of days end -->
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">
                        Does carried forward leave expire after certain time?
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="false" type="radio" name="DoestCarryForwardExpired"
                          formControlName="DoestCarryForwardExpired" />
                        <label class="form-check-label">
                          No. carried forward leave don't expire after cetain
                          time.
                        </label>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="radio" value="true" name="DoestCarryForwardExpired"
                          formControlName="DoestCarryForwardExpired" />
                        <div class="d-flex align-items-center ms-2">
                          <label class="form-check-label">
                            Yes, carried forward leave expires
                          </label>
                          <div class="col-md-2 mx-2">
                            <input type="text" OnlyNumber="3" class="form-control form-control-sm"
                              [readonly]="yearEndProcessForm.controls.DoestCarryForwardExpired.value == 'false'"
                              formControlName="ExpiredAfter" />
                          </div>
                          <label for="" class="form-label">
                            days in the next leave calendar year.
                          </label>
                        </div>
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <input class="form-check-input" type="checkbox"
                          formControlName="DoesExpiryLeaveRemainUnchange" />
                        <label class="form-check-label ms-2">
                          Any leave that has an expiry date, either through
                          previous carry forward, or expiray settings under step2
                          (leave accrual) remains unchanged.
                        </label>
                      </div>
                    </div>
                    <div class="my-4">
                      <h6 class="fw-bold text-dark">
                        What happens to the negative leave balances that may have
                        accumulated for employees who have taken leave beyond
                        their anuual quota?
                      </h6>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="DeductFromSalaryOnYearChange"
                          (click)="toggleLeaveOnYearEnds(2, $event)" formControlName="DeductFromSalaryOnYearChange" />
                        <label class="form-check-label">
                          Deduct from Salary.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="ResetBalanceToZero"
                          (click)="toggleLeaveOnYearEnds(2, $event)" formControlName="ResetBalanceToZero" />
                        <label class="form-check-label">
                          Nullify and reset the balance to zero.
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" value="true" type="radio" name="CarryForwardToNextYear"
                          (click)="toggleLeaveOnYearEnds(2, $event)" formControlName="CarryForwardToNextYear" />
                        <label class="form-check-label">
                          Carry forward negative balance to following year.
                        </label>
                      </div>
                    </div>
                  </form>
                  <div class="text-end">
                    <button class="btn btn-primary-c" (click)="submitYearEndProcessing()">
                      <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-floppy-o': !isLoading}"></i>
                      <span class="ps-2">{{ isLoading ? 'Wait' : 'Save & Next' }}</span>
                    </button>
                  </div>
                </ng-container>

                <ng-container *ngIf="configPageNo == 9 && isConfigCompleted">
                  <div class="wrapper-checkmark flex-column">
                    <svg class="checkmark-register" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"> <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                    </svg>
                  </div>
                  <div class="text-center mt-4">
                    <h4 class="text-center">
                      {{leaveTypeDeatils.PlanName | titlecase}} Type configuration is completed successfully!
                    </h4>
                    <button class="btn btn-primary mt-2" (click)="gotoLeave()">Go To Leave</button>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="!isDataLoaded">
        <div class="d-flex align-items-center justify-content-center my-5 py-5">
          <div class="my-5 py-5 text-dark fs-5 fw-bold">
            Unable to load current plan detail. Please contact to admin.
          </div>
        </div>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="isPageReady">
      <div class="fs-5 my-5 py-5 d-flex flex-column justify-content-center align-items-center">
        <div class="col-md-3 my-5 py-5 modal-container f-12 text-center cog-wheel">
          <img src="assets/images/cog.gif" alt="">
          <h6 class="modal-title title-message">Please Wait ........</h6>
        </div>
      </div>
    </ng-container>
  </div>
</div>
