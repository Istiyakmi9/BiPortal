<div class="main-container">
  <div class="content-header">
    <div class="col-8">
      <div class="px-1">
        <app-breadcrums [title]="'Chekc and process payroll'"></app-breadcrums>
      </div>
    </div>
    <div class="col-3 d-flex align-items-center me-2" *ngIf="isPageReady">
      <!-- <bot-autocomplete [data]="employeeData" [(ngModel)]="employeeId" (OnSelect)="onEmloyeeChanged($event)" (keydown.esc)="resetFilter()">
      </bot-autocomplete> -->
      <div class="col-auto blink fw-semibold me-3">
        {{selectedPayrollCalendar.Status == 15 ? 'PROCESSING' : selectedPayrollCalendar.Status == 14 ? 'COMPLETED' :
        selectedPayrollCalendar.Status == 16 ? 'PENDING' : selectedPayrollCalendar.Status == 4 ? 'CURRENT' :
        selectedPayrollCalendar.Status == 17 ? 'HOLD': selectedPayrollCalendar.Status == 18 ? 'CANCELED' : 'FAILED'}}
      </div>
      <div class="col-auto">
        <div class="d-flex align-items-center py-2">
          <h5 class="fw-bold text-dark pe-2 mb-0">{{selectedPayrollCalendar.MonthName}} {{selectedPayrollCalendar.Year}}
          </h5>
          <small class="text-muted">({{selectedPayrollCalendar.MonthName | uppercase}}
            {{selectedPayrollCalendar.StartDate}} - {{selectedPayrollCalendar.MonthName | uppercase}}
            {{selectedPayrollCalendar.EndDate}}, {{selectedPayrollCalendar.EndDate}} days)</small>
        </div>
      </div>
    </div>
  </div>
  <div class="x_panel">
    <div class="x_content mt-0">
      <ng-container *ngIf="isPageReady">
        <div class="row align-items-center justify-content-end">
          <div class="col-auto form-check">
            <input class="form-check-input" type="checkbox" id="previousCheckbox"
              (click)="previousMonthyPayroll($event)">
            <label class="form-check-label" for="previousCheckbox">
              Previous month payroll
            </label>
          </div>
          <div class="col-md-3">
            <select class="form-select" (change)="selectPayrollMonth($event)" disabled data-name="payroll-month">
              <option [value]="item.Month" *ngFor="let item of payrollCalendar; let i=index;"
                [selected]="selectedPayrollCalendar.Month == item.Month">{{item.MonthName}} {{item.Year}}</option>
            </select>
          </div>
        </div>

        <div class="col-12 p-4 mt-4 mb-2">
          <div class="ps-2 fw-bold c-title">You need to process the below payroll</div>
          <div class="bt-card px-4 py-3 justify-content-between">
            <div class="fe-1">
              <p>DRAFT</p>
              <span>Regular payroll</span>
              <div class="fw-bold">
                01 Mar 2024 to 31 Mar 2024
              </div>
            </div>
            <div class="fe-1 d-flex flex-column justify-content-end">
              <span>Pay Date</span>
              <div class="fw-bold">
                31 Mar 2024
              </div>
            </div>
            <div class="fe-1 d-flex flex-column justify-content-end">
              <span>Employees</span>
              <div class="fw-bold">
                {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalEmployees : "0"}}
              </div>
            </div>
            <div class="fe-2 d-flex flex-column justify-content-end">
              <div class="d-flex justify-content-end">
                <button class="btn btn-outline-danger me-2" (click)="runPayrollPopup()">
                  Config Run Payroll
                </button>
                <button class="btn btn-primary-c">
                  <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                  Start Payroll
                </button>
              </div>
              <div class="mt-2 d-flex justify-content-start">
                <i class="fa-solid fa-circle-info pe-2" style="color: #a1c3dd;"></i>
                <span>
                  Before run payroll please complete pre-processing of leave, attendance etc.
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 d-flex justify-content-between p-4 mt-4 mb-2">
          <div class="fe-3">
            <div class="ps-2 fw-bold c-title">Taxes & Calculations</div>
            <div class="bt-card bt-card-hight px-4 py-3 justify-content-between">
              <div class="w-100">
                <div class="d-flex justify-content-between mb-3">
                  <p>
                    <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                    PAYROLL
                  </p>

                  <div class="d-flex justify-content-start">
                    <span class="pe-2">
                      <i class="fa-solid fa-calendar-days pe-2"></i>
                      Pay Date
                    </span>
                    <div class="fw-bold">
                      31 Mar 2024
                    </div>
                  </div>
                </div>

                <div class="d-flex justify-content-between">
                  <div>
                    <div class="card-box">
                      {{selectedPayrollDetail != null ? (selectedPayrollDetail.TotalPayableToEmployees +
                      selectedPayrollDetail.TotalPFByEmployer + selectedPayrollDetail.TotalProfessionalTax) : "0.00"}}
                    </div>
                    <span class="fw-bold">
                      <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                      Total Payroll coat
                    </span>
                  </div>
                  <div>
                    <div class="card-box">
                      {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalEmployees : "0"}} /
                      {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalEmployees : "0"}}
                    </div>
                    <span class="fw-bold">
                      <i class="fa-solid fa-users-gear pe-2"></i>
                      Employees
                    </span>
                  </div>
                  <div class="d-flex flex-column justify-content-end">
                    <div class="card-box">
                      Pending
                    </div>
                    <span>
                      <i class="fa-solid fa-list-check pe-2"></i>
                      Processed Status
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="fe-2">
            <div class="ps-2 fw-bold c-title">Calculation</div>
            <div class="bt-card bt-card-hight px-4 py-3 justify-content-between">
              <div class="w-100">
                <p class="mb-3">
                  PAYROLL
                  <span class="ps-2">
                    (
                    Amount in INR <i class="ps-1 fa-solid fa-indian-rupee-sign"></i>
                    )
                  </span>
                </p>

                <div class="d-flex flex-column justify-content-end">
                  <table>
                    <tbody>
                      <tr>
                        <td>Paid To Employee</td>
                        <td>
                          INR {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalPayableToEmployees : "0.00"}}
                        </td>
                      </tr>
                      <tr>
                        <td>Total Deduction</td>
                        <td>
                          INR {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalPFByEmployer : "0.00"}}
                        </td>
                      </tr>
                      <tr>
                        <td>Employer Contribution</td>
                        <td>
                          INR {{selectedPayrollDetail != null ? selectedPayrollDetail.TotalProfessionalTax : "0.00"}}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <a href="javaascript:void(0)" class="text-decoration-none">
            <div class="d-flex align-items-center">
              <h5 class="fw-bold me-3 mb-0">Run Payroll</h5>
              <ng-container *ngIf="!this.allRunPayroll.RunPayrollFinalize">
                <div class="col-md-8">
                  <p class="mb-0"><ngb-progressbar type="success"
                      [value]="this.allRunPayroll.completedValue"></ngb-progressbar></p>
                </div>
                <p class="fw-bold ms-3 mb-0">{{this.allRunPayroll.completedValue / 16.66 > 6 ? 6 :
                  this.allRunPayroll.completedValue / 16.66}} to 6 steps completed</p>
              </ng-container>
              <ng-container *ngIf="this.allRunPayroll.RunPayrollFinalize">
                <span class="badge text-bg-primary text-normal">Finalize</span>
                <span class="ps-1">(On {{submittedPayrollDate | date}} by {{userName}})</span>
              </ng-container>
            </div>
          </a>
        </div>
        <div class="mt-3 me-4 text-end">
          <button class="btn btn-outline-primary" *ngIf="!this.allRunPayroll.RunPayrollFinalize" [disabled]="isLoading"
            (click)="previewPayroll()">
            <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-gear': !isLoading}"></i>
            <span class="ps-2">{{ isLoading ? "Wait" : "Preview Run Payroll" }}</span>
          </button>
          <button class="btn btn-outline-primary ms-2" [disabled]="isLoading">
            <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-gear': !isLoading}"></i>
            <span class="ps-2">{{ isLoading ? "Wait" : "Rreview all employees" }}</span>
          </button>
          <button class="btn btn-primary-c ms-2" *ngIf="!this.allRunPayroll.RunPayrollFinalize" [disabled]="isLoading"
            (click)="finalizePayrollPopUp()">
            <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-gear': !isLoading}"></i>
            <span class="ps-2">{{ isLoading ? "Wait" : "Finalize Payroll" }}</span>
          </button>
        </div>
        <div class="col-md-12">
          <div class="ps-2 fw-bold c-title">Payroll Outcome</div>
          <div class="bt-card bt-card-hight px-4 py-3 justify-content-between">
            <div class="col-md-8">
              <div class="w-100">
                <div class="d-flex justify-content-between">
                  <div class="col-md-9">
                    <div class="mb-3">
                      <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                      Employee Payables
                    </div>
                    <div class="d-flex justify-content-between">
                      <div>
                        <div class="card-box">120533</div>
                        <span class="fw-bold">
                          <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                          BANK TRANSFER
                        </span>
                      </div>
                      <div>
                        <div class="card-box">0</div>
                        <span class="fw-bold">
                          <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                          CHEQUES
                        </span>
                      </div>
                      <div>
                        <div class="card-box">0</div>
                        <span class="fw-bold">
                          <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                          CASH
                        </span>
                      </div>
                      <div>
                        <div class="card-box">120533</div>
                        <span class="fw-bold">
                          <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                          TOTAL
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex align-items-start flex-column">
                    <a href="javascript:void(0)" class="text-decoration-none py-2">
                      <i class="fa-regular fa-rectangle-list pe-1"></i> View Pay Register
                    </a>
                    <a href="javascript:void(0)" class="text-decoration-none py-2">
                      <i class="fa-solid fa-list pe-1"></i> Manage PaySlip
                    </a>
                    <a href="javascript:void(0)" class="text-decoration-none py-2">
                      <i class="fa-solid fa-money-bill-1 pe-1"></i>Manage Payment
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-auto border-start"></div>
            <div class="col-md-3">
              <div class="w-100">
                <div class=" mb-3">
                  <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                  Income Tax TDS
                </div>
                <div class="d-flex justify-content-between">
                  <div>
                    <div class="card-box">0</div>
                    <span class="fw-bold">
                      <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                      TDS PAYABLE
                    </span>
                  </div>
                  <div>
                    <div class="card-box">0</div>
                    <span class="fw-bold">
                      <i class="fa-solid fa-users-gear pe-2"></i>
                      Employees
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="bt-card bt-card-hight px-4 py-3 justify-content-between">
                <div class="w-100">
                  <div class=" mb-3">
                    <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                    PF
                  </div>
                  <div class="d-flex justify-content-between">
                    <div>
                      <div class="card-box">1800</div>
                      <span class="fw-bold">
                        <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                        EMPLOYEE SHARE
                      </span>
                    </div>
                    <div>
                      <div class="card-box">1800</div>
                      <span class="fw-bold">
                        <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                        EMPLOYER SHARE
                      </span>
                    </div>
                    <div>
                      <div class="card-box">180</div>
                      <span class="fw-bold">
                        <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                        OTHER CHARGES
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="bt-card bt-card-hight px-4 py-3 justify-content-between">
                <div class="w-100">
                  <div class=" mb-3">
                      <i class="pe-2 fa-solid fa-indian-rupee-sign"></i>
                      Professional Tax
                  </div>
                  <div class="d-flex justify-content-between">
                    <div>
                      <div class="card-box">1800</div>
                      <span class="fw-bold">
                        <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                        TAX PAYABLE

                      </span>
                    </div>
                    <div>
                      <div class="card-box">18</div>
                      <span class="fw-bold">
                        <i class="fa-solid fa-users-gear pe-2"></i>
                        NUMBER OF EMPLOYEES
                      </span>
                    </div>
                    <div>
                      <div class="card-box">West Bengal</div>
                      <span class="fw-bold">
                        <i class="pe-1 fa-solid fa-indian-rupee-sign"></i>
                        STATES
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>

<!-- Conform Payroll Modal -->
<div class="modal fade" id="confirmPayrollFinalize" tabindex="-1" aria-labelledby="confirmPayrollFinalizeLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5" id="confirmPayrollFinalizeLabel">Confirm Payroll Finalize</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Whe you finalize payroll, you can no longer make any chnages to payroll reviews screens such as leave, salary
          chnages. Please ensure all
          reviews are done right before finalizing the Payroll.
        </p>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-secondary" [disabled]="isLoading" data-bs-dismiss="modal">Close</button>
        <button [disabled]="isLoading" class="btn btn-primary-c" (click)="finalizePayroll()">
          <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
          <span class="ps-2">{{isLoading ? "Wait" : "Finalize Payroll"}}</span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->


<!-- RunPayrollStepPopup -->
<div class="modal fade" id="runPayrollSteopModal" tabindex="-1" aria-labelledby="runPayrollSteopModalLabel"
  aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen p-4">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5" id="runPayrollSteopModalLabel">Run Payroll</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body overflow-x-hidden pt-0">
        <div class="row col-md-12 mb-4">
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewleaveAttendanceWages()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="Leave, Attendance & Daily Wages">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 1}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-regular fa-calendar-days fa-lg fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">Leave, Attendance & Daily Wages
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.LeaveAttendanceCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken </p>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewNewJoineeExist()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="New Joinee & Exits">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 2}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-regular fa-user fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">New Joinee & Exits
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.EmployeeChangeseCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken </p>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewBonusSalaryRevisionOT()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="Bonus, Salary Revision & Overtime">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 3}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-solid fa-cake-candles fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">Bonus, Salary Revision & Overtime
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.BonusSalaryOvertimeCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken </p>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewReimbursementAdhocDeduction()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="Reimbursement, Adhoc Payment, Deduction">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 4}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-regular fa-object-group fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">Reimbursement, Adhoc Payment, Deduction
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.ReimbursementAdhicDeductCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken</p>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewSalaryOnHoldArrear()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="Salaries on Hold & Arrears">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 5}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-solid fa-trophy fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">Salaries on Hold & Arrears
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.SalaryHoldArrearsCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken </p>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-2 mt-3">
            <a href="javascript:void(0)" class="text-decoration-none" (click)="viewOveridePTESI()"
              data-bs-toggle="tooltip" data-bs-placement="right" title="Override (PT, ESI, TDS, LWF)">
              <div class="custom-card ps-3" [ngClass]="{'inactive-payroll-tab': activePayrollTab != 6}">
                <div class="row py-4 px-2">
                  <div class="col-md-3">
                    <div class="d-flex align-items-center justify-content-center bg-c rounded-pill rounded-icon">
                      <span><i class="fa-solid fa-user-xmark fa-lg text-white"></i></span>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <h6 class="mb-0 text-truncate">Override (PT, ESI, TDS, LWF)
                      <i class="fa float-end"
                        [ngClass]="{'fa-check-square-o text-success': this.allRunPayroll.OverrideCompleted && !this.allRunPayroll.RunPayrollFinalize, 'fa-lock text-primary-c': this.allRunPayroll.RunPayrollFinalize}"></i>
                    </h6>
                    <p class="text-muted text-truncate mb-0">No Action Taken </p>
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ng-container *ngIf="activePayrollTab == 1">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink (click)="loadLeaveData()">LEAVE APPLIED</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All leave (approved or pending) that fails under thid payroll
                  cycel month will be displayed here</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index pe-2">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-2">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-2">
                          <div class="cell-wrapper">
                            <div class="t-filter ">
                              <a href="javascript:void(0)" class="pe-2">Date</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter text-center d-block">
                              <a href="javascript:void(0)" class="pe-2">Total Days</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Leave Type</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Status</a>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="th fe-1">
                                      <div class="cell-wrapper">
                                          <div class="t-filter">
                                              <a href="javascript:void(0)" class="pe-2">Approver</a>
                                          </div>
                                      </div>
                                  </div> -->
                        <div class="th fe-1 text-center">
                          <div class="t-filter d-block text-center">
                            <a href="javascript:void(0)">ACTIONS</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="appliedLeaveDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of appliedLeaveDetail; let i=index;">
                          <div class="td align-middle ps-2 text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-2 text-truncate">
                            {{item.FirstName}} {{item.LastName}}
                          </div>
                          <div class="td align-middle fe-2">
                            <div class="cell-wrapper text-truncate">
                              {{item.FromDate | date}} - {{item.ToDate | date}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper text-center">
                              <span class="badge text-bg-primary rounded-pill">
                                {{item.NumOfDays}} {{item.NumOfDays > 1? "days" : "day"}}
                              </span>
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.PlanName}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper"
                              [ngClass]="{'text-primary': item.RequestStatusId == 2, 'text-danger': item.RequestStatusId == 5, 'text-success': item.RequestStatusId == 9}">
                              <i class="fa pe-1"
                                [ngClass]="{'fa-clock-o': item.RequestStatusId == 2, 'fa-solid fa-xmark': item.RequestStatusId == 5, 'fa-check-square-o': item.RequestStatusId == 9}"></i>
                              {{item.RequestStatusId == 2 ? 'Pending' : item.RequestStatusId == 5
                              ? 'Rejected' : 'Approved'}}
                            </div>
                          </div>
                          <!-- <div class="td align-middle fe-1">
                                          <div class="cell-wrapper">
                                              {{item.Approver}}
                                          </div>
                                      </div> -->
                          <div class="td align-middle text-center fe-1">
                            <ng-container *ngIf="item.RequestStatusId != 9">
                              <a href="javascript:void(0)" class="text-decoration-none"
                                (click)="leaveActionPopUp(item)">
                                <i class="fa-solid fa-ellipsis" data-bs-toggle="tooltip" data-bs-placement="right"
                                  title="Action"></i>
                              </a>
                              <!-- <a href="javascript:void(0)"(click)="submitActionForLeave(item, 'Approved')"
                                                  data-bs-toggle="tooltip" data-bs-placement="right"
                                                  title="Approve Leave">
                                                  <i class="fa-regular fa-square-check" aria-hidden="true"></i>
                                              </a>
                                              <a href="javascript:void(0)" class="ms-3" data-bs-toggle="tooltip"
                                                  data-bs-placement="right" title="Reject Leave">
                                                  <i class="fa-solid fa-xmark text-danger"
                                                      (click)="submitActionForLeave(item, 'Rejected')"
                                                      aria-hidden="true"></i>
                                              </a> -->
                            </ng-container>
                            <ng-container *ngIf="item.RequestStatusId == 9">
                              <i class="fa-regular fa-square-check text-success" data-bs-toggle="tooltip"
                                data-bs-placement="right" title="Leave Approved"></i>
                            </ng-container>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="appliedLeaveDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">No Record Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <!-- <div class="mt-3" *ngIf="isPageReady">
                  <app-pagination [pagination]="leaveData" (onPageChange)="GetFilterLeaveResult($event)"></app-pagination>
              </div> -->
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink (click)="getAttendanceDetail()">ATTENDANCE</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All employees attendance summaries for this month will be
                  displayed below. Admin can override if required.</div>
                <div class="x_content">
                  <div class="row align-items-center justify-content-between">
                    <div class="col-md-11 row">
                      <div class="cell-wrapper col-md-4 mb-3">
                        <div class="t-filter">
                          <a href="javascript:void()" class="pe-2">Full Name</a>
                        </div>
                        <input class="form-control" (keyup.enter)="filterRecords()" autofocus
                          [(ngModel)]="attendance.EmployeeName" placeholder="Search by Name" id="namefilter"
                          (keydown.esc)="resetFilter()">
                      </div>
                    </div>
                    <div class="col-auto">
                      <a href="javascript:void(0)" class="text-decoration-none px-2" (click)="filterRecords()">
                        <i class="fa-solid fa-filter fa-lg"></i>
                      </a>
                      <a href="javascript:void(0)" class="text-decoration-none px-2 text-danger"
                        (click)="resetFilter()">
                        <i class="fa-solid fa-repeat fa-lg"></i>
                      </a>
                    </div>
                  </div>
                  <div class="excel-table" id="excel-table">
                    <table>
                      <thead>
                        <ng-container>
                          <tr>
                            <th>Name</th>
                            <th class="text-truncate" *ngFor="let data of daysInMonth">
                              {{data}}
                            </th>
                            <th>A</th>
                            <th>B</th>
                            <th>C</th>
                            <th>D</th>
                            <th>E</th>
                            <th>F</th>
                            <th>G</th>
                            <th>H</th>
                            <th>I</th>
                            <th>J</th>
                          </tr>
                        </ng-container>
                      </thead>
                      <tbody>
                        <ng-container *ngIf="attendanceDetail.length > 0">
                          <tr *ngFor="let item of attendanceDetail">
                            <td>
                              {{item.EmployeeName}}
                            </td>
                            <ng-container *ngFor="let data of item.AttendanceDetail">
                              <td [ngClass]="{'holiday-color': data.PresentDayStatus == 3}">
                                <ng-container *ngIf="!data.IsOnLeave">
                                  <i class="fa-solid fa-check text-success" *ngIf="data.PresentDayStatus == 9"></i>
                                  <i class="fa-solid fa-xmark text-white" *ngIf="data.PresentDayStatus == 5"></i>
                                  <a href="javascript:void(0)"
                                    (click)="showAttendanceHandler(data, item.AttendanceId, item.EmployeeName)">
                                    <i class="fa-solid fa-triangle-exclamation text-warning"
                                      *ngIf="data.PresentDayStatus == 0"></i>
                                  </a>
                                  <i class="fa-regular fa-clock text-danger"
                                    *ngIf="data.PresentDayStatus == 2 || data.PresentDayStatus == 12"></i>
                                  <i class="fa-solid fa-gift"
                                    *ngIf="data.PresentDayStatus == 3 || data.PresentDayStatus == 4"></i>
                                </ng-container>
                                <ng-container *ngIf="data.IsOnLeave">
                                  <i class="fa-regular fa-flag"></i>
                                </ng-container>
                              </td>
                            </ng-container>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                          </tr>
                        </ng-container>
                        <ng-container *ngIf="attendanceDetail.length == 0">
                          <tr>
                            <td colspan="31">
                              <div
                                class="my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                                <p class="my-5 py-5">Record Not Found</p>
                              </div>
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                  <div class="mt-3 row align-items-center justify-content-between">
                    <div class="col" *ngIf="!isLoading">
                      <app-pagination [pagination]="attendanceData"
                        (onPageChange)="GetFilterLosspayResult($event)"></app-pagination>
                    </div>
                    <div class="col-auto row align-items-center">
                      <div class="col-auto text-muted">
                        Scroll
                      </div>
                      <div class="col-auto">
                        <div id="scroll-dv" class="scroll-bar-dv border-0">
                          <div class="inner-scroller" id="inner-scroller"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-auto">
                      <span class="px-2 py-1">
                        <i class="fa-solid fa-check text-success"></i>
                      </span>
                      <span> Approved</span>
                    </div>
                    <div class="col-auto">
                      <span class="px-2 py-1">
                        <i class="fa-solid fa-xmark text-danger"></i>
                      </span>
                      <span> Rejected</span>
                    </div>
                    <div class="col-auto">
                      <span class=" px-2 py-1">
                        <i class="fa-solid fa-ban text-dark"></i>
                      </span>
                      <span> Blocked</span>
                    </div>
                    <div class="col-auto">
                      <span class="px-2 py-1">
                        <i class="fa-regular fa-clock text-warning"></i>
                      </span>
                      <span> Submitted</span>
                    </div>
                    <div class="col-auto">
                      <span class="px-2 py-1">
                        <i class="fa-solid fa-triangle-exclamation text-warning"></i>
                      </span>
                      <span> Not Submitted</span>
                    </div>
                    <div class="col-auto">
                      <span class="holiday-color px-2 py-1">
                        <i class="fa-solid fa-gift"></i>
                      </span>
                      <span> WeekOff/ Holiday</span>
                    </div>
                    <div class="col-auto">
                      <span class=" px-2 py-1">
                        <i class="fa-regular fa-flag"></i>
                      </span>
                      <span> Leave</span>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink (click)="getLopAdjustment()">LOP VIEW AND DETAIL</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All employees 'LOP' summaries for this month will be displayed
                  below. Admin can override LOP days if required.</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="">Actual LOP</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="">LOP Adjustment</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="">Final LOP</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-index">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="lossPayDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of lossPayDetail; let i=index;">
                          <div class="td align-middle fe-index text-center">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.ActualLOP}} days
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.LOPAdjusment}} days
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.FinalLOP}} days
                            </div>
                          </div>
                          <div class="td align-middle fe-index">
                            <div class="cell-wrapper text-center">
                              <a href="javascript:void(0)" class="text-decoration-none"
                                (click)="lopAdjustmentPopUp(item)">
                                <i class="fa-regular fa-pen-to-square"></i>
                              </a>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="lossPayDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <!-- <div class="mt-3" *ngIf="isPageReady">
              <app-pagination [pagination]="lossPayData" (onPageChange)="GetFilterLosspayResult($event)"></app-pagination>
              </div> -->
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <ng-container *ngIf="activePayrollTab == 2">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink (click)="getNewJoineeRecord()">NEW JOINEES</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All the employees for whom payroll is enabled and whosse date of joining
                  falls under this month will be shown here.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="newJoineeDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1 mt-2">
                                  <b>Date of Joining:</b>
                                  {{item.get('DOJ').value | date}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>No working day:</b>
                                  {{item.get('NoOfDays').value | date}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Salary</b>
                                <div class="cell-wrapper pt-2">
                                  <i class="fa-solid fa-indian-rupee-sign pe-2"></i>
                                  {{item.get('CTC').value}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option value="Hold salary processing this month">Hold salary processing this month</option>
                                      <option value="Process as salary">Process as salary</option>
                                      <option value="Void salary processing">Void salary processing</option>
                                      <option value="Hold salary payout this month">Hold salary payout this month</option>
                                      <option value="Void salary payout">Void salary payout</option>
                                      <option value="Already Paid">Already Paid</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="newJoineeDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveNewJoineeExitsFinalSattlement()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink (click)="getExistEmpRecord()">EMPLOYEE IN EXIT PROCESS</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">Employee whose exit has been approved and are serving notice period wil be
                  shown under 'Employee in Exit Process'. If there are any exit requests
                  that are yet to be approved but last working date fails under this month (based on the notice period
                  assigned) will be shown under 'Pending Exit Requests.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="exitEmpDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1 mt-2">
                                  <b>Resigned on:</b>
                                  {{item.get('DOR').value | date}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Last working day:</b>
                                  {{item.get('LWD').value | date}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>User Reason</b>
                                <div class="cell-wrapper pt-2">
                                  {{item.get('Reason').value}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select w-auto border-0" formControlName="Status">
                                      <option value="2">Pending</option>
                                      <option value="9">Approved</option>
                                      <option value="5">Rejected</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option value="Hold salary processing this month">Hold salary processing this month</option>
                                      <option value="Process as salary">Process as salary</option>
                                      <option value="Void salary processing">Void salary processing</option>
                                      <option value="Hold salary payout this month">Hold salary payout this month</option>
                                      <option value="Void salary payout">Void salary payout</option>
                                      <option value="Already Paid">Already Paid</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="exitEmpDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveNewJoineeExitsFinalSattlement()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink (click)="getExistEmpRecord()">FULL & FINAL SETTLEMENT</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">Employees whose last working date is completed but F & F settlement is not
                  done will be displayed here.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <!-- <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Exit Action & Reason</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Last Working Day</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Status</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Settled Amount</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Actions</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comment</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                      <ng-container formArrayName="RunPayroll">
                        <div class="t-body">
                          <div class="tr py-2" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                            <div class="td align-middle text-center fe-index">{{item.get('RowIndex').value}}</div>
                            <div class="td align-middle fe-1 text-truncate">
                              {{item.get('FirstName').value}} {{item.get('LastName').value}}
                            </div>
                            <div class="td align-middle fe-1">
                              <div class="cell-wrapper">
                                <input type="text" placeholder="Reason" formControlName="Reason" class="form-control">
                              </div>
                            </div>
                            <div class="td align-middle fe-1">
                              <div class="cell-wrapper">
                                {{item.get('LWD').value | date}}
                              </div>
                            </div>
                            <div class="td align-middle fe-1">
                              <div class="cell-wrapper">
                                <select class="form-select" formControlName="Status">
                                  <option value="1">Pending</option>
                                  <option value="2">Approved</option>
                                  <option value="3">Rejected</option>
                                </select>
                              </div>
                            </div>
                            <div class="td align-middle text-center fe-1">
                              <div class="cell-wrapper">
                                <input type="text" placeholder="Settle Amount" formControlName="Amount" class="form-control">
                              </div>
                            </div>
                            <div class="td align-middle fe-1">
                              <div class="cell-wrapper">
                                <select class="form-select" formControlName="Status">
                                  <option value="1">Pending</option>
                                  <option value="2">Approved</option>
                                  <option value="3">Rejected</option>
                                </select>
                              </div>
                            </div>
                            <div class="td align-middle text-center fe-1">
                              <div class="cell-wrapper">
                                <input type="text" placeholder="Comment" formControlName="Comments" class="form-control">
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </form> -->
                    <ng-container *ngIf="settlementDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Last working day:</b>
                                  {{item.get('LWD').value | date}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>User Reason</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  {{item.get('Reason').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Status</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <select class="form-select  w-auto" formControlName="Status">
                                    <option value="2">Pending</option>
                                    <option value="9">Approved</option>
                                    <option value="5">Rejected</option>
                                  </select>
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Settled Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <input type="text" placeholder="Settle Amount" formControlName="Amount" class="form-control w-50">
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="Status">
                                      <option value="2">Pending</option>
                                      <option value="9">Approved</option>
                                      <option value="5">Rejected</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" placeholder="Comment" formControlName="Comments" class="form-control" placeholder="Comment">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="settlementDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveNewJoineeExitsFinalSattlement()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Next</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="markEmpChangeComplete()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <ng-container *ngIf="activePayrollTab == 3">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink (click)="getBonusEmpRecord()">BONUS</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All pending bonuses to be paid (including any pasy unpaid bonuses) will be
                  shown here. New bonuses can also be added using 'Import Bonus'.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="bonusDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Bonus Type:</b>
                                  {{item.get('ComponentFullName').value}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Payout Month & Year:</b>
                                  {{item.get('ForMonth').value}} {{item.get('ForYear').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value | number: '1.2-2'}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" disabled>Select Payment Action Type</option>
                                      <option value="Hold bonus processing this month">Hold bonus processing this month</option>
                                      <option value="Process bonus this month">Process bonus this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="bonusDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveBonusSalaryRevisionOvertime()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink (click)="getSalaryRevisionEmpRecord()">Salary Revision</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All pending revisions (including on-hold revisions from past months) will
                  be displayed here.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="salaryRevisionDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Bonus Type:</b>
                                  {{item.get('ComponentFullName').value}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Payout Month & Year:</b>
                                  {{item.get('ForMonth').value}} {{item.get('ForYear').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value | number: '1.2-2'}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" disabled>Select Payment Action Type</option>
                                      <option value="Hold salary revision processing this month">Hold salary revision processing this month</option>
                                      <option value="Process salary revision this month">Process salary revision this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="overTimePaymentDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveBonusSalaryRevisionOvertime()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink (click)="getOverTimeEmpRecord()">OVERTIME</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">Overtime details, including amount and OT dates will be displayed here
                  (only if OT policies are configured and assigned to the employees). Any pending
                  overtime payments from past months will be also be displayed here.
                </div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="overTimePaymentDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Calculated Amount:</b>
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value | number: '1.2-2'}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Payout Month & Year:</b>
                                  {{item.get('ForMonth').value}} {{item.get('ForYear').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Total Minutes</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  {{item.get('TotalMinutes').value}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper mb-2">
                                    <select class="form-select" (change)="selectOvertimeAction($event)" formControlName="IsCompOff">
                                      <option [value]="false">Pay as Amount</option>
                                      <option [value]="true">Convert as Comp Off</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper" [ngClass]="{'d-none': item.get('IsCompOff').value == true }">
                                    <select class="form-select" (change)="selectOvertimeCalculationOn($event, item)"  formControlName="OTCalculatedOn">
                                      <option [value]="null" disabled>Select Calculation On</option>
                                      <option value='GROSS'>Calculated on Gross</option>
                                      <option value="BASIC">Calculated on Basic</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" selected>Select Payment Action Type</option>
                                      <option value="Hold over time processing this month">Hold over time processing this month</option>
                                      <option value="Process over time this month">Process over time this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="overTimePaymentDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveBonusSalaryRevisionOvertime()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <ng-container *ngIf="activePayrollTab == 4">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink (click)="getSalaryCompClaimRecord()">SALARY COMPONENT CLAIM</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">All pending or approved claims (both reimbursable and reimbursement) that
                  are supposed to be paid in this month will be displayed here.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="salaryComponentsDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Name:</b>
                                  {{item.get('ComponentFullName').value}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Type:</b>
                                  {{item.get('ComponentType').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Claim Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value  | number: '1.2-2'}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" disabled>Select Payment Action Type</option>
                                      <option value="Hold salary component claim processing this month">Hold salary component claim processing this month</option>
                                      <option value="Process salary component claim this month">Process salary component claim this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="salaryComponentsDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveReimbursementAdhocPaymentDeduction()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink (click)="getAdhocPaymentRecord()">ADHOC PAYMENT</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">Adhoc payment that are supposed to be paid to the employees in this month,
                  can be managed below.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="adhocPaymentDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Name:</b>
                                  {{item.get('ComponentFullName').value}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Type:</b>
                                  {{item.get('ComponentType').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Claim Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value  | number: '1.2-2'}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" disabled>Select Payment Action Type</option>
                                      <option value="Hold adhoc payment processing this month">Hold adhoc payment processing this month</option>
                                      <option value="Process adhoc payment this month">Process adhoc payment this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="adhocPaymentDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                  <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                  <span class="ps-2">Back</span>
                </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveReimbursementAdhocPaymentDeduction()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink (click)="getAdhocDeductionRecord()">ADHOC DEDUCTION</button>
              <ng-template ngbNavContent>
                <div class="alert alert-info">Adhoc deduction that are supposed to be deducted to the employees salary
                  in this month, can be managed below.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <ng-container *ngIf="adhocDeductionDetail.length > 0">
                      <form [formGroup]="runPayrollForm" *ngIf="runPayrollForm">
                        <ng-container formArrayName="RunPayroll">
                          <div class="t-body">
                            <div class="tr p-4 d-flex justify-content-between" *ngFor="let item of RunPayroll.controls; let i=index;" [formGroupName]="i">
                              <div class="td d-flex flex-column justify-content-end">
                                <div class="td align-middle fe-1 text-truncate">
                                  <a href="javascript:void(0)">
                                    <i class="fa-regular fa-circle-user pe-2" style="color: #63E6BE;"></i>
                                    {{item.get('FirstName').value}} {{item.get('LastName').value}}
                                  </a>
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Name:</b>
                                  {{item.get('ComponentFullName').value}}
                                </div>
                                <div class="td align-middle fe-1">
                                  <b>Component Type:</b>
                                  {{item.get('ComponentType').value}}
                                </div>
                              </div>
                              <div class="td d-flex flex-column justify-content-end">
                                <b>Claim Amount</b>
                                <div class="cell-wrapper pt-2 ps-0">
                                  <i class="fa-solid fa-indian-rupee-sign px-1"></i>
                                  {{item.get('Amount').value  | number: '1.2-2'}}
                                </div>
                              </div>
                              <div class="td d-flex justify-content-end">
                                <div>
                                  <div class="cell-wrapper">
                                    <select class="form-select" formControlName="PaymentActionType">
                                      <option [value]="null" disabled>Select Payment Action Type</option>
                                      <option value="Hold adhoc deduction processing this month">Hold adhoc deduction processing this month</option>
                                      <option value="Process adhoc deduction this month">Process adhoc deduction this month</option>
                                    </select>
                                  </div>
                                  <div class="cell-wrapper mt-2">
                                    <input type="text" class="form-control" formControlName="Comments" placeholder="Comments">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </form>
                    </ng-container>
                    <ng-container *ngIf="adhocDeductionDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="saveReimbursementAdhocPaymentDeduction()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" (click)="markReimburseAdhocDeductionComplete()">
                    <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <ng-container *ngIf="activePayrollTab == 5">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink>SALARY PROCESSING ON HOLD</button>
              <ng-template ngbNavContent>
                <h5>Salary Processing on Hold</h5>
                <div class="alert alert-info">In case of employer who are absconding or are on uninformed leave, you
                  might want to hold/stop the processing of their salary. use the 'Salary processing on hold'
                  the processing of salary for selected employees. They will also be excluded from PF/ESI/TDS
                  calculation and will only be considered if you decide to process their salary in the future.</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Pay Period</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Amount</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Pay Action</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comments</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-index">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="salaryProcessingDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of salaryProcessingDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.PayPeriod}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" class="form-control" placeholder="Amount" [(ngModel)]="item.Amount">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <select class="form-select" [(ngModel)]="item.PayAction">
                                <option value="1">Action</option>
                              </select>
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" class="form-control" placeholder="Amount" [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete Salary Processing on Hold">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="salaryProcessingDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="markSalariesArrearsComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink>SALARY PAYOUT ON HOLD</button>
              <ng-template ngbNavContent>
                <h5>Salary Payout on Hold</h5>
                <div class="alert alert-info">In case you wish to process the ssalary bit hold the payout of employees
                  (in cases such as, employee is under notice period, on uninformed leave for a while etc)
                  use "Salary payout on hold" option. The salary of such employees will be processed, i.e they will be
                  include for PF/ESI/TDS calculation and only the payout of salary will be put on hold. you
                  can decide to payout this salary anytime in future.
                </div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Pay Period</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Pay Action</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comments</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-index">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="salaryPayoutDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of salaryPayoutDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.PayPeriod}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <select class="form-select" [(ngModel)]="item.PayAction">
                                <option value="1">Action</option>
                              </select>
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" class="form-control" placeholder="Amount" [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete Salary Payout on Hold">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="salaryPayoutDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="markSalariesArrearsComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink>ARREARS</button>
              <ng-template ngbNavContent>
                <h5>Arrears</h5>
                <div class="alert alert-info">Employees arraers, either due to past dated revisions or due to salary on
                  holds will be displayed here.</div>
                <div class="x_content">
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Date Joined</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Total Arrear Amount</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Reasons</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="arraersDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of arraersDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.DOJ | date}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" class="form-control" placeholder="Amount"
                                [(ngModel)]="item.TotalArrearAmount">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" class="form-control" placeholder="Reason" [(ngModel)]="item.Reason">
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="arraersDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="saveSalariesArrears()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 3"
                    (click)="markSalariesArrearsComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <ng-container *ngIf="activePayrollTab == 6">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
            <li [ngbNavItem]="1">
              <button ngbNavLink>PT OVERRIDE</button>
              <ng-template ngbNavContent>
                <h5>PT Overrides</h5>
                <div class="alert alert-info">All Professional Tax overrides that were added for this month will be
                  shown here. New overrides can be added as well from here</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Gross Salary</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Regular PT</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">PT Override Amount</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Override Month</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comment</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-index">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="ptOverrideDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of ptOverrideDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.GrossSalary | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.RegularPT | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.PTOverRideAmount">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.PTOverRideMonth}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete PT Override">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="ptOverrideDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 4"
                    (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4" (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4"
                    (click)="markOverrideComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <button ngbNavLink>ESI OVERRIDE</button>
              <ng-template ngbNavContent>
                <h5>ESI Overrides</h5>
                <div class="alert alert-info">All ESI overrides that were added for this month will be shown here. New
                  overrides can be added as well from here.</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Gross Salary</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">ESI Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee(Override)</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">ESI Employer</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employer(Override)</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Override Month</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comment</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="esiOverrideDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of esiOverrideDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.GrossSalary | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.ESIEmployee | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="ESI employee Override Amount" class="form-control"
                                [(ngModel)]="item.EmployeeOverride">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.ESIEmployer | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="ESI employee Override Amount" class="form-control"
                                [(ngModel)]="item.EmployerOverride">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.OverRideMonth}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete ESI Override">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="esiOverrideDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 4"
                    (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4" (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4"
                    (click)="markOverrideComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <button ngbNavLink>TDS OVVERRIDE</button>
              <ng-template ngbNavContent>
                <h5>TDS Overrides</h5>
                <div class="alert alert-info">The Tds overrides that were added for this month will be shown here. New
                  overrides can be addded as well from here.</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Gross Salary</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Regular TDS</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">TDS Override Amount</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Override Month</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comment</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-index">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="tdsOverrideDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of tdsOverrideDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.GrossSalary | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.RegularTDS | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.TDSOverRideAmount">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.TDSOverRideMonth}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete TDS Override">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="tdsOverrideDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 4"
                    (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4" (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4"
                    (click)="markOverrideComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="4">
              <button ngbNavLink>LWS OVVERRIDE</button>
              <ng-template ngbNavContent>
                <h5>LWF Overrides</h5>
                <div class="alert alert-info">All LWF overrides that were added for this month will be shown here. New
                  overrides can be added as well from here.</div>
                <div class="x_content">
                  <div class="d-flex mb-3 align-items-center justify-content-between">
                    <button [disabled]="isLoading" class="btn btn-primary-c"><i class="fa-solid fa-plus pe-1"></i> Add
                      Employee</button>
                    <div class="col-md-3 float-end">
                      <div class="form-group has-search">
                        <span class="fa-solid fa-magnifying-glass form-control-feedback"></span>
                        <input type="text" class="form-control" oninput="this.value = this.value.toUpperCase()"
                          placeholder="Search Component">
                      </div>
                    </div>
                  </div>
                  <div class="t-table t-list  col-md-12">
                    <div class="hide-bar"></div>
                    <div class="t-head">
                      <div class="tr">
                        <div class="th fe-index">
                          <div class="t-filter t-index">
                            <a href="javascript:void(0)" class="ps-3">#</a>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee Name</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Gross Salary</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">LWF Employee</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employee(Override)</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">LWF Employer</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Employer(Override)</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Override Month</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Comment</a>
                            </div>
                          </div>
                        </div>
                        <div class="th fe-1">
                          <div class="cell-wrapper">
                            <div class="t-filter">
                              <a href="javascript:void(0)" class="pe-2">Action</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="t-body">
                      <ng-container *ngIf="lwfOverrideDetail.length > 0">
                        <div class="tr py-2" *ngFor="let item of lwfOverrideDetail; let i=index;">
                          <div class="td align-middle text-center fe-index">{{i+1}}</div>
                          <div class="td align-middle fe-1 text-truncate">
                            {{item.EmployeeName}}
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.GrossSalary | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.LWFEmployee | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="ESI employee Override Amount" class="form-control"
                                [(ngModel)]="item.EmployeeOverride">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.LWFEmployer | number: '1.2-2'}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="ESI employee Override Amount" class="form-control"
                                [(ngModel)]="item.EmployerOverride">
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              {{item.OverRideMonth}}
                            </div>
                          </div>
                          <div class="td align-middle fe-1">
                            <div class="cell-wrapper">
                              <input type="text" placeholder="PT Override Amount" class="form-control"
                                [(ngModel)]="item.Comment">
                            </div>
                          </div>
                          <div class="td align-middle fe-index text-center ">
                            <a href="javascript:void(0)" class="" data-bs-toggle="tooltip" data-bs-placement="right"
                              title="Delete ESI Override">
                              <i class="fa-solid fa-trash-can-o text-danger" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="lwfOverrideDetail.length == 0">
                      <div
                        class="custom-height my-5 py-5 fw-bold fs-3 text-danger d-flex align-items-center justify-content-center">
                        <p class="my-5 py-5">Record Not Found</p>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="modal-footer border-top-0">
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active > 1"
                    (click)="backActivePages()">
                    <i class="fa-solid" [ngClass]="{'fa-spinner fa-spin': isLoading, 'fa-arrow-left': !isLoading}"></i>
                    <span class="ps-2">Back</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active >= 1 && active < 4"
                    (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Continue</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4" (click)="saveOverride()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
                    <span class="ps-2">Save & Close</span>
                  </button>
                  <button [disabled]="isLoading" class="btn btn-primary-c" *ngIf="active == 4"
                    (click)="markOverrideComplete()">
                    <i
                      [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-square-check': !isLoading}"></i>
                    <span class="ps-2">Mark as Completed</span>
                  </button>
                </div>
              </ng-template>
            </li>
          </ul>

          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </ng-container>

        <!-- <p class="text-muted text-end mt-3 me-4">Last Changes on By </p> -->
        <!-- <div class="mt-3 me-4 text-end">
            <button class="btn btn-outline-primary" *ngIf="!this.allRunPayroll.RunPayrollFinalize"
              [disabled]="isLoading" (click)="previewPayroll()">
              Preview Run Payroll
            </button>
            <button class="btn btn-outline-primary ms-2" [disabled]="isLoading">Rreview all employees</button>
            <button class="btn btn-primary-c ms-2" *ngIf="!this.allRunPayroll.RunPayrollFinalize"
              [disabled]="isLoading" (click)="finalizePayrollPopUp()">
                Finalize Payroll
            </button>
        </div> -->
      </div>
      <div class="modal-footer border-top-0">

      </div>
    </div>
  </div>
</div>
<!-- End -->


<!--LOP Adjustment Modal -->
<div class="modal fade" id="lopAdjustment" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="lopAdjustmentLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5" id="lopAdjustmentLabel">LOP Adjustment</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" *ngIf="selectedLOP != null">
        <div class="col-md-12 row">
          <div class="col-md-6">
            <label class="form-label fw-semibold pe-1">Name: </label>
            <span>{{selectedLOP.EmployeeName}}</span>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-semibold pe-1">Actual LOP: </label>
            <span>{{selectedLOP.ActualLOP}} days</span>
          </div>
        </div>
        <div class="col-12">
          <div class="col-md-12">
            <fieldset class="mt-3">
              <legend>Deducted Leave</legend>
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label">Leave Type</label>
                  <select class="form-select mb-3" (change)="validateLeaveStatus($event)">
                    <option value="" disabled selected>Select leave type</option>
                    <option [value]="l.LeavePlanTypeId" *ngFor="let l of leaveQuota">
                      <div class="col-md-12">
                        {{l.LeavePlanTypeName}} - Balance: {{l.AvailableLeaves | number:
                        '1.2-2'}} days
                      </div>
                    </option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">LOP Adjustment</label>
                  <select class="form-select" [(ngModel)]="selectedLOP.LOPAdjusment">
                    <option value="0">0</option>
                    <ng-container *ngFor="let item of availLopAdjusmentDay; let i= index;">
                      <option [value]="item">{{item}}</option>
                    </ng-container>
                  </select>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="mt-3">
          <label class="form-label">Comment</label>
          <textarea rows="3" placeholder="Comments" class="form-control" [(ngModel)]="selectedLOP.Comment"></textarea>
        </div>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary-c" [disabled]="isLoading" (click)="saveLOPAjustment()">
          <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
          <span class="ps-1">{{ isLoading ? 'Wait' : 'Save' }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->

<!--Attendance Adjustment Modal -->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="attendanceAdjustment" tabindex="-1"
  aria-labelledby="attendanceAdjustmentLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5" id="attendanceAdjustmentLabel">Attendance Adjustment</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ng-container *ngIf="selectedAttendance != null">
          <div class="col-md-12">
            <label class="form-label">Name</label>
            <span>: {{selectedAttendance.EmployeeName}} </span>
          </div>
          <div class="col-md-12 mt-2">
            <label class="form-label">Date</label>
            <span>: {{selectedAttendance.AttendanceDay | date}} </span>
          </div>
          <div class="col-md-12 mt-2">
            <label class="form-label">Submitted By</label>
            <span>: {{currentUser.FirstName}} {{currentUser.LastName}} </span>
          </div>
          <div class="col-md-12 mt-2">
            <label class="form-label">Message</label>
            <textarea class="form-control" placeholder="Message" rows="2"
              [(ngModel)]="selectedAttendance.UserComments"></textarea>
          </div>
        </ng-container>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal"
          [disabled]="isLoading">Cancel</button>
        <button type="button" class="btn btn-primary-c" [disabled]="isLoading" (click)="saveAttedanceAjustment()">
          <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-circle-user': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Save' }}
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->

<!--Attendance Adjustment Modal -->
<div class="modal fade" id="leaveActionModal" tabindex="-1" aria-labelledby="leaveActionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content px-4">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5" id="leaveActionModalLabel">Leave Action</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ng-container *ngIf="selectedLeave != null">
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Total Days</th>
                <th>Leave Type</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{selectedLeave.FirstName}} {{selectedLeave.LastName}}</td>
                <td>{{selectedLeave.FromDate | date}} - {{selectedLeave.ToDate | date}}</td>
                <td>{{selectedLeave.NumOfDays}}</td>
                <td>{{selectedLeave.PlanName}}</td>
                <td>{{selectedLeave.RequestStatusId == 2 ? 'Pending' : selectedLeave.RequestStatusId ==
                  5 ? 'Rejected' : 'Approved'}}</td>
              </tr>
            </tbody>
          </table>
          <div>
            <input type="text" class="form-control" placeholder="Message" [(ngModel)]="selectedLeave.Reason">
          </div>
        </ng-container>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal"
          [disabled]="isLoading">Cancel</button>
        <button type="button" class="btn btn-primary-c" [disabled]="isLoading"
          (click)="submitActionForLeave('Approved')">
          <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-regular fa-floppy-disk': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Save' }}
        </button>
        <button type="button" class="btn btn-danger" [disabled]="isLoading" (click)="submitActionForLeave('Rejected')">
          <i [ngClass]="{'fa-solid fa-spinner fa-spin': isLoading, 'fa-solid fa-xmark': !isLoading}"></i>
          {{ isLoading ? 'Wait' : 'Reject' }}
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End -->
